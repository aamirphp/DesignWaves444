(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1806],{93316:function(e,t,n){"use strict";n.d(t,{B:function(){return r}});var r=n(2784).lazy(function(){return Promise.all([n.e(8917),n.e(7120),n.e(4100),n.e(3421)]).then(n.bind(n,23421)).then(function(e){return{default:e.default}})})},37803:function(e,t,n){"use strict";n.d(t,{R:function(){return r}});var r={100:"Thin",200:"Extra Light",300:"Light",400:"Regular",500:"Medium",600:"Semi Bold",700:"Bold",800:"Extra Bold",900:"Black"}},47130:function(e,t,n){"use strict";n.d(t,{Av:function(){return C},B_:function(){return P},CZ:function(){return O},QP:function(){return S},Sd:function(){return _},UK:function(){return E},ZN:function(){return T},cC:function(){return w},x_:function(){return k},zn:function(){return v}});var r,o=n(12741),i=n(95235),a=n(20406),c=n(28526),l=n.n(c),s=n(18149),u=n.n(s),d=n(53553),h=n(24553);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function m(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return g(e,t)}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){c=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw i}}}}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var b=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=["italic","oblique"],r=m(t);try{for(r.s();!(e=r.n()).done;){var o,i=e.value,a=m(n);try{for(a.s();!(o=a.n()).done;){var c=o.value;if(-1!==i.toLowerCase().indexOf(c))return!0}}catch(l){a.e(l)}finally{a.f()}}}catch(s){r.e(s)}finally{r.f()}return!1},j=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=m(t);try{for(n.s();!(e=n.n()).done;){var r=e.value;if(x(r,["thin"]))return 100;if(x(r,["light","lite"],["extra","ultra","x"]))return 200;if(x(r,["light"]))return 300;if(x(r,["medium"]))return 500;if(x(r,["bold"],["demi","semi"]))return 600;if(x(r,["bold"],["extra","x"]))return 800;if(x(r,["bold"]))return 700;if(x(r,["black","heavy","ultra"]))return 900}}catch(o){n.e(o)}finally{n.f()}return 400},x=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],o=m(n);try{for(o.s();!(t=o.n()).done;){var i=t.value;if(0===r.length){if(-1!==e.toLowerCase().indexOf(i.toLowerCase()))return!0}else{var a,c=m(r);try{for(c.s();!(a=c.n()).done;){var l=a.value;if(-1!==e.toLowerCase().indexOf(i.toLowerCase())&&-1!==e.toLowerCase().indexOf(l.toLowerCase()))return!0}}catch(s){c.e(s)}finally{c.f()}}}}catch(u){o.e(u)}finally{o.f()}return!1},v=(r=(0,a.Z)(l().mark(function e(t){return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,n){var r=new FileReader;r.onload=function(t){var r=null===(o=t.target)||void 0===o?void 0:o.result;try{var o,i,a,c,l,s,u,h,f,p,m,g,x,v,y,O,E,k,w,C=d.ZP.parse(r),T=null!==(i=null===(a=Object.values(null!==(c=null===(l=C.tables)||void 0===l?void 0:null===(s=l.name)||void 0===s?void 0:s.preferredSubfamily)&&void 0!==c?c:null===(u=C.tables)||void 0===u?void 0:null===(h=u.name)||void 0===h?void 0:h.fontSubfamily))||void 0===a?void 0:a[0])&&void 0!==i?i:"",P=null!==(f=null===(p=Object.values(null===(m=C.tables)||void 0===m?void 0:null===(g=m.name)||void 0===g?void 0:g.fullName))||void 0===p?void 0:p[0])&&void 0!==f?f:"",S=null!==(x=null===(v=Object.values(null!==(y=null===(O=C.tables)||void 0===O?void 0:null===(E=O.name)||void 0===E?void 0:E.preferredFamily)&&void 0!==y?y:null===(k=C.tables)||void 0===k?void 0:null===(w=k.name)||void 0===w?void 0:w.fontFamily))||void 0===v?void 0:v[0])&&void 0!==x?x:"";e({familyName:S,isItalic:b([T,P]),weight:j([T,P])})}catch(_){n(_)}},r.onerror=function(t){console.error("[parseFontFile] unable to read the font file, providing defaults",t),e({familyName:"",isItalic:!1,weight:400})},r.readAsArrayBuffer(t)}));case 1:case"end":return e.stop()}},e)})),function(e){return r.apply(this,arguments)}),y=function(e){var t=e.lastIndexOf(".");return -1===t||t===e.length-1?{name:e,extension:void 0}:{name:e.slice(0,t),extension:e.slice(t+1)}},O=function(e){var t=y(e).extension;return t===h.sA6.Otf||t===h.sA6.Ttf?t:h.sA6.Ttf},E=function(e){var t=e.existingFont;if(!t)return!0;var n={fontName:t.name,fontId:t.id,fontFiles:t.fontFiles.map(function(e){return{id:e.id,name:e.name,weight:e.weight,isItalic:e.isItalic,fileType:e.fileType,sourceUrl:e.sourceUrl}})},r={fontName:e.fontName,fontId:e.fontId,fontFiles:e.uploadFontFiles.map(function(e){return{id:e.fontFile.id,name:e.fontFile.name,weight:e.fontFile.weight,isItalic:e.fontFile.isItalic,fileType:e.fontFile.fileType,sourceUrl:e.fontFile.sourceUrl}})};return!u()(n,r)},k=function(e){return Object.keys(e.reduce(function(e,t){var n=[t.weight,t.isItalic].join("__");return p(p({},e),{},(0,i.Z)({},n,!0))},{})).length},w=function(e){return Object.values(e.reduce(function(e,t){var n=t.fontFile,r=[n.weight,n.isItalic,n.fileType].join("__");return e[r]=e[r]||[],e[r].push(t),e},{})).reduce(function(e,t){if(t.length>1){var n,r=m(t);try{for(r.s();!(n=r.n()).done;)e[n.value.uploadId]=!0}catch(o){r.e(o)}finally{r.f()}}return e},{})},C=function(e){return e.reduce(function(e,t){var n=t.fontFile.weight;return p(p({},e),{},(0,i.Z)({},n,[].concat((0,o.Z)(e[n]||[]),[t])))},{})},T=function(e){var t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];return e.sort(function(e,n){return t?Number(e)-Number(n):Number(n)-Number(e)})},P=function(e){return T(Array.from(new Set(e.map(function(e){return e.weight}))))},S=function(e,t){if(void 0!==t){if(t>e[e.length-1])return e[e.length-1];for(var n=1/0,r=-1,o=0;o<e.length;o++){var i=Math.abs(t-e[o]);if(i<n)n=i,r=o;else break}return e[r]}},_=function(e){return!!e&&0!==e.length&&-1===e.findIndex(function(e){return!e.isItalic})}},11565:function(e,t,n){"use strict";n.d(t,{z:function(){return np}});var r,o,i=n(82269),a=n(95235),c=n(81333),l=n(55479),s=n(78116),u=n(56915),d=n(16796),h=n(92619),f=n(11919),p=n(91012),m=n(53738),g=n(76648),b=n(45650),j=n(2167),x=n(64827),v=n(27302),y=n(420),O=n(42751),E=n(18149),k=n.n(E),w=n(2784),C=n(43997),T=n(24553),P=n(29999),S=n(66564),_=n(33660),D=n(49201),I=n(51183),F=n(47299),A=n(47557),M=n(89190),z=n(73848),U=n(24798),H=n(8283),N=n(84520),R=n(95085),G=n(8848),L=n(49929),B=n(69479),W=n(22087),Z=n(4640),V=n(69930),q=n(79898),K=n(39363),Q=n(1388),Y=n(93230),$=n(61694),J=n(12741),X=n(16686),ee=n(5766),et=n(36880),en=n(70685),er=n(52322),eo=(0,w.memo)(function(e){var t=e.theme,n=e.onThemeClick,r=e.onSelectClick,o=(0,T.BCl)({variables:{workspaceId:null,archived:!1},fetchPolicy:"cache-first",nextFetchPolicy:"cache-only"}),i=o.data,a=o.loading,c=(null==i?void 0:i.themes)||[];return(0,er.jsxs)(er.Fragment,{children:[a?(0,er.jsx)(et.t,{size:4}):(0,er.jsx)(m.xu,{flex:1,p:6,children:(0,er.jsx)(ee.M,{columns:{base:1,lg:2},spacing:1,children:(0,J.Z)(c).sort($.qb).map(function(e){return(0,er.jsx)(en.o,{type:"standard",theme:e,isChecked:e.id===t.id,onThemeClicked:n,variant:"ghost"},e.id)})})}),(0,er.jsx)(f.k,{pos:"sticky",bottom:0,px:6,py:4,alignItems:"center",bg:"white",children:(0,er.jsx)(b.z,{"data-testid":"select-this-theme",flex:1,variant:"solid",leftIcon:(0,er.jsx)(L.G,{icon:X.Jy}),onClick:r,children:"Start with this theme"})})]})}),ei=n(23649),ea=n(73137),ec=n(25925),el=(0,w.createContext)({});function es(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function eu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?es(Object(n),!0).forEach(function(t){(0,a.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):es(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var ed=(0,ea.E)(m.xu),eh={enter:function(e){return{position:"absolute",width:"100%",x:"push"===e?"100%":"-100%",opacity:0}},center:{width:"100%",position:"static",x:0,opacity:1},exit:function(e){return{width:"100%",position:"absolute",x:"push"===e?"-100%":"100%",opacity:0}}},ef=function(e){var t=e.containerProps,n=e.motionProps,r=e.InitialComponent,o=(0,w.useState)(r?[r]:[]),i=o[0],a=o[1],c=(0,w.useRef)("push"),l=(0,w.useCallback)(function(){c.current="pop",a((0,J.Z)(i.slice(0,-1)))},[i]),s=(0,w.useCallback)(function(e){c.current="push",a([].concat((0,J.Z)(i),[e]))},[i]),u=i[i.length-1];return((0,w.useEffect)(function(){0===i.length&&r&&s(r)},[r,s,i]),u)?(0,er.jsx)(el.Provider,{value:{push:s,pop:l},children:(0,er.jsx)(m.xu,eu(eu({},t||{}),{},{position:"relative",children:(0,er.jsx)(ec.M,{initial:!1,custom:c.current,children:(0,er.jsx)(ed,eu(eu({variants:eh,custom:c.current,initial:"enter",animate:"center",exit:"exit",transition:{default:{duration:.2}}},n||{}),{},{children:(0,er.jsx)(u,{})}),i.length)})}))}):null};function ep(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function em(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ep(Object(n),!0).forEach(function(t){(0,a.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ep(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var eg=(0,w.createContext)({});function eb(){var e=(0,w.useContext)(eg),t=(0,w.useContext)(el);return em(em({},e),t)}var ej=n(55997),ex=n(37578),ev=n(4519),ey=n(97200),eO=n(29113),eE=n(18746),ek=n(30771),ew=n(90950),eC=n(35837),eT=n(69262),eP=n(71354),eS=n(2046),e_=n(70287),eD=n(30302),eI=n(41446),eF=n(10441),eA=n(83484),eM=n(67784),ez=["icon","label","onClick"];function eU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function eH(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eU(Object(n),!0).forEach(function(t){(0,a.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eU(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var eN={width:"100%",variant:"unstyled",borderRadius:"revert",height:"revert",justifyContent:"flex-start"},eR=(0,w.memo)(function(e){var t=e.icon,n=e.label,r=e.onClick,o=(0,i.Z)(e,ez);return(0,er.jsxs)(f.k,eH(eH(eH({"data-testid":"theme-config-menu-button-".concat(n.replace(/^\d+\.\s*/,"").replaceAll(/\s/g,"-").toLowerCase()),as:b.z},eN),{},{onClick:r,p:4,borderBottomWidth:"1px",_hover:{bg:"trueblue.50"}},o),{},{children:[(0,er.jsx)(m.xu,{color:"trueblue.500",children:(0,er.jsx)(L.G,{icon:t,fixedWidth:!0})}),(0,er.jsx)(m.xu,{fontWeight:"600",ml:2,mr:"auto",children:n}),(0,er.jsx)(m.xu,{color:"gray.600",children:(0,er.jsx)(L.G,{icon:eM._t})})]}))});function eG(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function eL(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eG(Object(n),!0).forEach(function(t){(0,a.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eG(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}eR.displayName="ThemeConfigNavigationMenuButton";var eB=function(e){var t=e.label,n=e.onBackClick,r=e.children;return(0,er.jsxs)(er.Fragment,{children:[(0,er.jsxs)(f.k,eL(eL({"data-testid":"theme-config-back-button",as:b.z},eN),{},{p:4,borderBottomWidth:"1px",bg:"gray.50",_hover:{bg:"gray.200"},onClick:n,children:[(0,er.jsx)(m.xu,{color:"gray.600",mr:2,children:(0,er.jsx)(L.G,{icon:eA.A3})}),(0,er.jsx)(m.xu,{fontWeight:"600",children:t})]})),(0,er.jsx)(m.xu,{p:6,children:r})]})},eW=n(49626),eZ=n(72360),eV=n(48322),eq=n(36895),eK=n(37164),eQ=n(30475),eY=n(48298),e$=n(64300),eJ=n(61411);function eX(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function e0(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eX(Object(n),!0).forEach(function(t){(0,a.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eX(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var e1=function(e){return(0,eJ.bH)(e)&&(0,eJ.Rr)(e)},e2=function(e){var t=e.setBackground,n=e.background,r=e.defaultMessage,o=e.isDark,i=e.isValidSource,a=(0,w.useState)(eQ.UnsplashProvider.key),c=a[0],l=a[1],s=eY.ah[c],u=(0,w.useCallback)(function(e){return i?i(e)&&e1(e):e1(e)},[i]),d=(0,w.useCallback)(function(e){t(e0(e0({},n),e))},[n,t]);return(0,er.jsx)(e$.O,{isDark:o,isValidSource:u,defaultMessage:r,currentBackground:n,currentSource:s,updateCurrentBackground:d,setCurrentSourceKey:l,currentSourceKey:c})},e3=n(93143),e4=n(37696);function e6(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function e5(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?e6(Object(n),!0).forEach(function(t){(0,a.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):e6(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var e8=function(e){return e.backgroundType!==q.Eo.NONE},e9=e5(e5({},q.Gx),{},{accentId:void 0}),e7=function(e){var t=e.theme,n=e.updateTheme,r=(0,w.useState)(!1),o=r[0],i=r[1],a=(0,w.useState)(null),c=a[0],l=a[1],s=(0,w.useState)(null),u=s[0],d=s[1],h=c&&!!c.accentId,f=t.config.accentBackgrounds,m=(0,w.useCallback)(function(){d(e9),l(e9)},[]),j=(0,w.useCallback)(function(){l(null),d(null)},[]),x=(0,w.useCallback)(function(e){var t=e||c;if(t){var r=e5(e5({},t),{},{source:I.cx,originalSource:t.source,accentId:(0,eK.x0)()}),o=f||[];if(h){var i=o.findIndex(function(e){return e.accentId===c.accentId});if(-1===i){console.warn("[AccentImagePicker] Could not find accent image to edit");return}n({accentBackgrounds:[].concat((0,J.Z)(o.slice(0,i)),[r],(0,J.Z)(o.slice(i+1)))})}else n({accentBackgrounds:[].concat((0,J.Z)(o),[r])});j()}},[f,c,h,j,n]),v=(0,w.useCallback)(function(e){n({accentBackgrounds:(f||[]).filter(function(t){return t.accentId!==e.accentId})})},[f,n]),y=(0,w.useCallback)(function(e){d(e5(e5({},e),{},{source:e.originalSource})),l(e5(e5({},e),{},{source:e.originalSource}))},[]),E=(0,w.useCallback)(function(e){if(e.source===eQ.UnsplashProvider.key||e.source===eQ.GiphyProvider.key){x(e);return}if(e.source===eQ.CustomImageProvider.key){var t,n,r,o;(null===(t=e.image)||void 0===t?void 0:t.uploadStatus)===eQ.UploadStatus.Uploading?i(!0):(null===(n=e.image)||void 0===n?void 0:n.uploadStatus)===eQ.UploadStatus.Done&&(null===(r=e.image)||void 0===r?void 0:r.uploadResultStep)==="optimized"?i(!1):(null===(o=e.image)||void 0===o?void 0:o.uploadStatus)===eQ.UploadStatus.Error&&i(!1)}l(e)},[x]),C=(0,w.useMemo)(function(){return!k()(c,u)},[c,u]),T=(0,$.wj)(t);return c?(0,er.jsxs)(er.Fragment,{children:[(0,er.jsx)(e2,{setBackground:E,background:c,isValidSource:e8,defaultMessage:(0,er.jsxs)(eZ.b,{children:[(0,er.jsx)(eV.z,{}),"Set an accent image for the card layout."]}),isDark:T}),(0,er.jsxs)(g.h,{pt:6,display:"flex",children:[(0,er.jsx)(b.z,{variant:"ghost",onClick:j,children:"Cancel"}),(0,er.jsx)(b.z,{variant:"solid",onClick:function(){return x()},isLoading:o,isDisabled:!C,flex:1,children:h?"Save":"Add accent image"})]})]}):(0,er.jsxs)(er.Fragment,{children:[(0,er.jsxs)(eP.K,{spacing:3,children:[(0,er.jsx)(b.z,{leftIcon:(0,er.jsx)(L.G,{icon:eW.r8}),alignSelf:"flex-start",onClick:m,children:"Add"}),f&&(null==f?void 0:f.length)!==0?(0,er.jsx)(e4.U,{accentImages:f,isDark:T,handleDelete:v,handleItemClick:y}):(0,er.jsx)(te,{})]}),(0,er.jsxs)(eZ.b,{fontSize:"xs",mt:6,children:[(0,er.jsx)(eV.z,{}),(0,er.jsxs)(p.x,{children:["Accent images are a set of images associated with this theme that can be used as decoration in your ",O._u,"."]})]})]})},te=function(){return(0,er.jsxs)(m.xu,{alignSelf:"center",maxWidth:52,children:[(0,er.jsx)(eq.E,{src:e3.Z.src,alt:"Sal, the Gamma mascot, flying and spraying pink and purple flecks of stars and slide deck icons",py:4}),(0,er.jsx)(p.x,{fontSize:"sm",color:"gray.700",textAlign:"center",children:"There’s nothing here yet."})]})};function tt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var tn=n(8022),tr=n(20406),to=n(28526),ti=n.n(to),ta=n(60807),tc=n(93316),tl=(r=(0,tr.Z)(ti().mark(function e(t,r,o){var i,a,c;return ti().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all([n.e(5489),n.e(4751)]).then(n.bind(n,94207));case 3:return i=e.sent.default,e.next=6,Promise.all([n.e(5489),n.e(9224)]).then(n.bind(n,30058));case 6:a=e.sent.default,c=i.parse(t),r(a.objectify(c)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),o(e.t0.message);case 15:case"end":return e.stop()}},e,null,[[0,12]])})),function(e,t,n){return r.apply(this,arguments)}),ts=(o=(0,tr.Z)(ti().mark(function e(t,r,o){var i,a;return ti().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all([n.e(5489),n.e(4751)]).then(n.bind(n,94207));case 3:return i=e.sent.default,e.next=6,Promise.all([n.e(5489),n.e(9224)]).then(n.bind(n,30058));case 6:a=e.sent.default,i().process(t,{parser:a}).then(function(e){r(e.css)}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),o(e.t0.message);case 13:case"end":return e.stop()}},e,null,[[0,10]])})),function(e,t,n){return o.apply(this,arguments)}),tu=function(e){var t=e.label,r=e.initialValue,o=e.updateValue,i=e.helperText,a=(0,w.useState)(""),c=a[0],l=a[1],s=(0,w.useState)(null),u=s[0],d=s[1],h=(0,w.useState)(),f=h[0],p=h[1],g=(0,D.Kt)(tl,100);return((0,w.useEffect)(function(){Promise.all([n.e(8917),n.e(7120),n.e(6214)]).then(n.bind(n,96214)).then(function(e){p(e.css())})},[]),(0,D.vm)(function(){d(null),r&&ts(r,l,d)},[r],[]),(0,D.vm)(function(){d(null),g(c,o,d)},[c,o,g],[c]),f)?(0,er.jsxs)(eS.NI,{isInvalid:!!u,children:[(0,er.jsx)(e_.l,{children:t}),u&&(0,er.jsx)(ta.J1,{children:u}),i&&(0,er.jsx)(eS.Q6,{children:i}),(0,er.jsx)(m.xu,{border:"1px solid",borderColor:"gray.200",fontSize:"md",children:(0,er.jsx)(w.Suspense,{fallback:(0,er.jsx)("span",{}),children:(0,er.jsx)(tc.B,{value:c,height:"300px",extensions:[f],onChange:l})})})]}):null},td=n(25590),th=n(77103),tf=n(26673),tp=n(9088),tm=n(30893),tg=n(40771),tb=n(2575),tj=n(38675);function tx(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var tv=function(e){var t=e.theme,n=e.dispatch,r=(0,tj.c)(t);return(0,er.jsxs)(eS.NI,{children:[(0,er.jsx)(e_.l,{children:"Card style"}),(0,er.jsxs)(tp.v,{matchWidth:!0,children:[(0,er.jsx)(tm.j,{size:"lg",as:b.z,borderRadius:"md",rightIcon:(0,er.jsx)(L.G,{icon:tf.pt,transform:"shrink-6"}),variant:"toolbar",px:4,h:10,w:"100%",border:"1px solid",borderColor:"gray.200",children:(0,er.jsx)(p.x,{textAlign:"left",fontWeight:"400",children:r.name})}),(0,er.jsx)(tg.q,{maxH:"320px",maxW:"100%",overflow:"auto",children:tj.N.map(function(e){return(0,er.jsx)(tb.i,{isChecked:r.name===e.name,value:e.key,onClick:function(){return n({type:"THEME_UPDATE_THEME_CONFIG",data:{themeConfig:{themeBase:e.key}}})},children:(0,er.jsxs)(H.U,{maxW:"100%",children:[(0,er.jsx)(ty,{base:e}),(0,er.jsxs)(m.xu,{flex:"1",minW:"0",children:[e.name,(0,er.jsx)(p.x,{color:"gray.400",fontSize:"sm",children:e.description})]})]})},e.key)})})]})]})},ty=function(e){var t=e.base,n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tx(Object(n),!0).forEach(function(t){(0,a.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tx(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({"--card-color":"#FFF"},t.getCSSVars("#FFF","#F00"));return(0,er.jsx)(m.xu,{backgroundColor:"gray.200",p:4,css:n,children:(0,er.jsx)(m.xu,{sx:t.cardSx,h:"3em",w:"5em"})})},tO=(0,w.memo)(function(){var e,t=eb(),n=t.state,r=t.pop,o=t.dispatch,i=t.label,a=n.theme,c=(null===(e=a.config.cardBackground)||void 0===e?void 0:e.type)===q.Eo.COLOR?a.config.cardBackground.color:null;return(0,er.jsx)(eB,{onBackClick:r,label:i,children:(0,er.jsxs)(eP.K,{children:[(0,er.jsxs)(eS.NI,{"data-testid":"custom-theme-card-color-picker",children:[(0,er.jsx)(e_.l,{children:"Card color"}),(0,er.jsx)(eS.Q6,{mb:4,children:"The default background color of the card itself. Text colors will adjust automatically to stand out against this background."}),(0,er.jsx)(th.T,{value:(null==c?void 0:c.hex)||null,updateValue:function(e){return o({type:"THEME_UPDATE_THEME_CONFIG",data:{themeConfig:{cardBackground:e?{type:q.Eo.COLOR,color:{hex:e}}:void 0}}})},defaultValue:"#FFFFFF"})]}),(0,er.jsx)(tv,{theme:a,dispatch:o})]})})});tO.displayName="ThemeConfigCardStylesPanel";var tE=n(47130),tk=n(2459),tw=n(25180),tC=n(91128),tT=n(63849),tP=n(49747),tS=n(47457),t_=function(e){var t=e.label,n=e.description,r=e.labelColor,o=e.fontFamily,i=e.fontStyle,a=e.fontWeight,c=(0,er.jsxs)(H.U,{alignItems:"baseline",children:[(0,er.jsx)(m.xu,{color:"yellow.400",children:(0,er.jsx)(L.G,{icon:tS.e7})}),(0,er.jsx)(p.x,{textAlign:"left",color:void 0===r?"black":r,fontWeight:void 0===a?400:a,fontSize:"lg",fontFamily:o,fontStyle:void 0===i?"normal":i,children:t})]});return n?(0,er.jsxs)(m.xu,{children:[c,(0,er.jsx)(p.x,{fontSize:"xs",color:"gray.500",children:n})]}):c},tD=["value","updateValue","onFontUploadClick","weight","defaultFont","fonts","customFontsEnabled"];function tI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function tF(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tI(Object(n),!0).forEach(function(t){(0,a.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tI(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var tA=function(e){var t=e.value,n=e.updateValue,r=e.onFontUploadClick,o=e.weight,a=void 0===o?"regular":o,c=e.defaultFont,l=e.fonts,s=e.customFontsEnabled,u=(0,i.Z)(e,tD),d=l.workspaceFonts,h=l.globalFonts,f=(0,w.useMemo)(function(){var e=[].concat((0,J.Z)(d),(0,J.Z)(h));return[e.find(function(e){return e.id===t}),(0,tk.Yw)(e,t),(0,tk.Yw)(e,t,!1)]},[h,d,t]),m=f[0],g=f[1],j=f[2],x=s&&d.filter(function(e){return!e.archived||e.id===(null==m?void 0:m.id)}).length>0,v=!1,y="normal",E="bold"===a?700:400;if(m&&null!==m.workspaceId){v=!0===m.archived;var k=(0,J.Z)(m.fontFiles||[]);y=(0,tE.Sd)(k)?"italic":"normal";var C=(0,tE.B_)(k);E=(0,tE.QP)(C,"bold"===a?700:400)||400}return(0,er.jsxs)(tp.v,{matchWidth:!0,isLazy:!0,children:[(0,er.jsx)(tm.j,tF(tF({size:"lg",as:b.z,borderRadius:"md",rightIcon:(0,er.jsx)(L.G,{icon:tf.pt,transform:"shrink-6"}),variant:"toolbar",px:4,h:10,w:"100%",border:"1px solid",borderColor:"gray.200"},u),{},{children:s&&v?(0,er.jsx)(t_,{label:j||"",fontFamily:'"'.concat(g,'"'),labelColor:t?"gray.800":"gray.400",fontStyle:y,fontWeight:E}):(0,er.jsx)(p.x,{textAlign:"left",fontFamily:'"'.concat(g||c,'"'),fontWeight:E,color:t?"gray.800":"gray.400",fontStyle:y,children:j||"".concat(c," (Gamma default)")})})),(0,er.jsxs)(tg.q,{maxH:"320px",overflow:"auto",zIndex:"dropdown",children:[(0,er.jsxs)(tT._,{type:"radio",value:t||"",onChange:function(e){return n(e||void 0)},children:[x&&(0,er.jsx)(O.NZ,{m:2,children:"Uploaded fonts"}),x&&d.map(function(e){var n,r=e.id!==t,o=e.archived&&r,i=(null===(n=e.fontFiles)||void 0===n?void 0:n.length)===0&&r;if(!e.fontFiles||i||o)return null;var c=(0,tE.Sd)(e.fontFiles)?"italic":"normal";return v&&e.id===t?(0,er.jsx)(tb.i,{value:e.id,disabled:!0,children:(0,er.jsx)(t_,{fontFamily:e.name,label:e.name,fontStyle:c,description:"This font family has been deleted. If you switch to a different font and save, you won’t be able to switch back without re-uploading this font."})},e.id):(0,er.jsx)(tb.i,{value:e.id,children:(0,er.jsx)(p.x,{fontFamily:'"'.concat(e.name,'"'),fontSize:"lg",fontWeight:a,fontStyle:c,children:e.name})},e.id)}),x&&(0,er.jsxs)(er.Fragment,{children:[(0,er.jsx)(tP.R,{}),(0,er.jsx)(O.NZ,{m:2,children:"Built-in fonts"})]}),(0,er.jsx)(tb.i,{value:"",children:(0,er.jsx)(p.x,{fontFamily:c,fontSize:"lg",fontWeight:a,color:"gray.400",children:"Gamma default"})}),h&&h.map(function(e){return(0,er.jsx)(tb.i,{value:e.id,children:(0,er.jsx)(p.x,{fontFamily:(0,tk.eu)(e.id)?'"'.concat(e.id,'"'):'"'.concat(e.name,'"'),fontSize:"lg",fontWeight:a,children:e.name})},e.id)})]}),s&&(0,er.jsx)(b.z,{width:"calc(100% + var(--chakra-space-4))",variant:"plain",position:"sticky",bottom:-2,m:-2,mt:2,p:2,borderX:"none",borderBottom:"none",fontSize:"sm",borderRadius:"none",onClick:r,leftIcon:(0,er.jsx)(L.G,{icon:tC.A$}),children:"Upload fonts"})]})]})},tM=n(29705),tz=n(84103),tU=n(37803),tH=["font","value","defaultWeight","updateValue"];function tN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function tR(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tN(Object(n),!0).forEach(function(t){(0,a.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tN(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var tG=function(e){var t,n,r,o=e.font,a=e.value,c=e.defaultWeight,l=e.updateValue,s=(0,i.Z)(e,tH),u=(0,w.useCallback)(function(e){var t=Number(e);Number.isNaN(t)||l(t)},[l]),d=(null==a?void 0:a.toString())||"",h=tU.R[c],f=(0,w.useMemo)(function(){var e=(0,tk.W9)(o),t=void 0!==a&&!e.includes(a);return t&&a?{isDeletedFontWeight:t,weightOptions:[].concat((0,J.Z)(e),[a]).sort(function(e,t){return e-t})}:{isDeletedFontWeight:t,weightOptions:e}},[o,a]),m=f.weightOptions,g=f.isDeletedFontWeight,j=o&&(null==o?void 0:o.workspaceId)!==null,x=j&&(null===(t=o.fontFiles)||void 0===t?void 0:t.length)===0,v=g&&j,y=(0,tw.p6)();return(0,er.jsxs)(er.Fragment,{children:[(0,er.jsxs)(tp.v,{matchWidth:!0,isLazy:!0,strategy:"fixed",children:[(0,er.jsx)(tm.j,tR(tR({size:"lg",as:b.z,borderRadius:"md",rightIcon:(0,er.jsx)(L.G,{icon:tf.pt,transform:"shrink-6"}),variant:"toolbar",px:4,h:10,w:"100%",border:"1px solid",borderColor:"gray.200",isDisabled:m.length<=1},s),{},{children:g?(0,er.jsx)(t_,{label:x?"Empty font family":null!==(n=tU.R[d])&&void 0!==n?n:h,labelColor:a?"gray.800":"gray.400"}):(0,er.jsx)(p.x,{textAlign:"left",color:a?"gray.800":"gray.400",fontWeight:400,children:null!==(r=tU.R[d])&&void 0!==r?r:h})})),(0,er.jsx)(tg.q,{maxH:"320px",overflow:"auto",zIndex:"dropdown",children:(0,er.jsx)(tT._,{type:"radio",value:d,onChange:u,children:m.map(function(e){var t,n;return g&&a===e?(0,er.jsx)(tb.i,{value:e.toString(),disabled:!0,children:(0,er.jsx)(t_,{label:null!==(n=tU.R[e])&&void 0!==n?n:h,description:v?"This weight no longer exists in this font family. You can upload font files for it, or choose a different one.":"This weight isn't available for this font family. Please switch to a supported weight."})},e):(0,er.jsx)(tb.i,{value:e.toString(),children:(0,er.jsx)(p.x,{fontSize:"lg",children:null!==(t=tU.R[e])&&void 0!==t?t:h})},e)})})})]}),v&&(0,er.jsx)(p.x,{fontSize:"xs",mt:1.5,children:(0,er.jsxs)(tz.r,{href:y,textDecoration:"underline",isExternal:!0,children:["Manage font files",(0,er.jsx)(tM.h,{ml:1})]})})]})},tL=["label","helperText","value","defaultValue","updateValue"];function tB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function tW(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tB(Object(n),!0).forEach(function(t){(0,a.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tB(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var tZ=function(e){var t=e.label,n=e.helperText,r=e.value,o=e.defaultValue,a=e.updateValue,c=(0,i.Z)(e,tL);return(0,er.jsxs)(eS.NI,tW(tW({},c),{},{children:[(0,er.jsx)(e_.l,{children:(0,er.jsx)(p.x,{children:t})}),(0,er.jsx)(th.T,{value:r,updateValue:a,defaultValue:o}),n&&(0,er.jsx)(eS.Q6,{children:n})]}))},tV=n(94659),tq=n(42643),tK=n(34321),tQ=n(52333),tY=function(e){var t=e.value,n=e.updateValue,r=e.onLogoUploadStart,o=e.onLogoUploadFail,i=(0,w.useState)(null),a=i[0],c=i[1],l=(0,w.useState)(null),s=l[0],u=l[1],d=(0,W.CG)(S.KV),h=(0,_.SE)().currentWorkspace,f=d||(null==h?void 0:h.id);return f?t||s?(0,er.jsxs)(tV.g,{align:"flex-start",spacing:4,children:[(0,er.jsxs)(m.xu,{position:"relative",w:"100%",background:"gray.50",children:["placeholder"==s?(0,er.jsx)(tq.k3,{w:"100%"}):(0,er.jsx)(eq.E,{w:"100%",src:t||s||void 0,alt:"",onMouseDown:tK.br}),a==eQ.UploadStatus.Uploading&&(0,er.jsx)(tq.HI,{}),a==eQ.UploadStatus.Error&&(0,er.jsx)(tq.s7,{})]}),(0,er.jsx)(b.z,{onClick:function(){n(null),c(null)},mt:2,w:"100%",children:"Remove Logo"})]}):(0,er.jsx)(eQ.UploadBox,{orgId:f,uploadType:"image",editType:"icon",afterLinkDropHereText:"your logo",customHeight:"250px",customFontSize:"sm",showTip:!1,onUploadStart:function(e){var t=e.file,n=e.tempUrl;c(eQ.UploadStatus.Uploading),r&&r(),t.type&&(0,tQ.Ns)(t.type)?u("placeholder"):u(n)},onUploadSuccess:function(e){var t=e.src;c(eQ.UploadStatus.Done),n(t),u(null)},onUploadFailed:function(e){c(eQ.UploadStatus.Error),o&&o()}}):null};function t$(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var tJ=[{label:"Theme background",icon:ew.AV,Component:function(){var e=eb(),t=e.dispatch,n=e.state,r=e.pop,o=e.label,i=(0,$.E7)(n.theme),a=(0,$.wj)(n.theme),c=(0,w.useCallback)(function(e){var n,r;(null==e?void 0:e.type)===q.Eo.IMAGE&&(null===(n=e.image)||void 0===n?void 0:n.uploadStatus)===td.D.Uploading?t({type:"THEME_BACKGROUND_IMAGE_UPLOAD_STARTED",data:{background:e}}):(null==e?void 0:e.type)===q.Eo.IMAGE&&(null===(r=e.image)||void 0===r?void 0:r.uploadStatus)===td.D.Error?t({type:"THEME_BACKGROUND_IMAGE_UPLOAD_FAIL"}):t({type:"THEME_BACKGROUND_UPDATE_SUCCESS",data:{background:e}})},[t]);return(0,er.jsx)(eB,{onBackClick:r,label:o,children:(0,er.jsx)(e2,{setBackground:c,background:i,defaultMessage:(0,er.jsxs)(eZ.b,{fontSize:"xs",children:[(0,er.jsx)(eV.z,{}),(0,er.jsxs)(p.x,{children:["Choose an option above to set a default background for all"," ",O.Cq," using this theme."]})]}),isDark:a})})}},{label:"Card styles",icon:ek.lC,Component:tO},{label:"Accent colors",icon:eE.Zk,Component:function(){var e,t,n=eb(),r=n.label,o=n.state,i=n.dispatch,a=n.pop,c=o.theme,l=(0,w.useCallback)(function(e){return i({type:"THEME_UPDATE_THEME_PROPS",data:{themeProps:{accentColor:null!=e?e:void 0}}})},[i]);return(0,er.jsx)(eB,{onBackClick:a,label:r,children:(0,er.jsxs)(eP.K,{spacing:2,children:[(0,er.jsxs)(eS.NI,{"data-testid":"custom-theme-accent-color-picker",children:[(0,er.jsx)(e_.l,{children:"Primary accent color"}),(0,er.jsx)(eS.Q6,{mb:4,children:"You can set an accent color or gradient that will be applied to elements like links, buttons, and blockquotes."}),(0,er.jsx)(eI.U,{color:c.accentColor,defaultColor:I.uP,updateColor:l,gradient:c.config.accentGradient,updateGradient:function(e){return i({type:"THEME_UPDATE_THEME_CONFIG",data:{themeConfig:{accentGradient:e}}})}})]}),(0,er.jsxs)(eS.NI,{children:[(0,er.jsx)(e_.l,{children:"Secondary accent colors"}),(0,er.jsx)(eS.Q6,{mb:2,children:"Additional accent colors will be applied to decorative elements in your theme such as table dividers and timelines. If you don’t add any secondary accent colors, the primary accent color or gradient will be applied."}),(0,er.jsx)(eF.Y,{value:(null===(e=c.config)||void 0===e?void 0:e.secondaryAccentColors)||[],updateValue:function(e){return i({type:"THEME_UPDATE_THEME_CONFIG",data:{themeConfig:{secondaryAccentColors:e}}})},maxColors:4})]}),(0,er.jsxs)(eS.NI,{children:[(0,er.jsx)(e_.l,{mt:4,children:"Readability"}),(0,er.jsx)(eD.X,{isChecked:!(null!==(t=c.config)&&void 0!==t&&t.disableReadabilityAdjustment),onChange:function(){var e;return i({type:"THEME_UPDATE_THEME_CONFIG",data:{themeConfig:{disableReadabilityAdjustment:!(null!==(e=c.config)&&void 0!==e&&e.disableReadabilityAdjustment)}}})},children:"Adjust colors to be readable"}),(0,er.jsx)(eS.Q6,{mb:2,children:"By default, Gamma adjusts your colors to comply with web accessibility guidelines. You can turn this off to use your colors exactly as they are."})]})]})})}},{label:"Accent images",icon:eO.l9,Component:function(){var e=eb(),t=e.pop,n=e.state,r=e.dispatch,o=e.label,i=n.theme;return(0,er.jsx)(eB,{onBackClick:t,label:o,children:(0,er.jsx)(e7,{theme:i,updateTheme:function(e){return r({type:"THEME_UPDATE_THEME_CONFIG",data:{themeConfig:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tt(Object(n),!0).forEach(function(t){(0,a.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tt(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e)}})}})})}},{label:"Fonts",icon:ey.yG,Component:function(){var e,t=(0,eT.ye)("customFonts"),n=eb(),r=n.label,o=n.dispatch,i=n.state,a=n.pop,c=i.theme,l=i.fontState,s=l.fonts,u=l.fontsMap,d=(0,w.useCallback)(function(e){var t=u[e],n=(0,tk.W9)(t),r=(0,tE.QP)(n,c.headingFontWeight||I.ZT.heading)||I.ZT.heading,i=(0,tk.s8)({fontsMap:u,headingFontId:e,bodyFontId:c.bodyFont});o({type:"THEME_UPDATE_THEME_PROPS",data:{themeProps:{headingFont:e,headingFontWeight:r,fonts:i}}})},[o,u,c.bodyFont,c.headingFontWeight]),h=(0,w.useCallback)(function(e){var t=u[e],n=(0,tk.W9)(t),r=(0,tE.QP)(n,c.bodyFontWeight||I.ZT.body)||I.ZT.body,i=(0,tk.s8)({fontsMap:u,bodyFontId:e,headingFontId:c.headingFont});o({type:"THEME_UPDATE_THEME_PROPS",data:{themeProps:{bodyFont:e,bodyFontWeight:r,fonts:i}}})},[o,u,c.headingFont,c.bodyFontWeight]),f=(0,w.useCallback)(function(e){return o({type:"THEME_UPDATE_THEME_PROPS",data:{themeProps:{headingFontWeight:e}}})},[o]),m=(0,w.useCallback)(function(e){return o({type:"THEME_UPDATE_THEME_PROPS",data:{themeProps:{bodyFontWeight:e}}})},[o]),g=(0,w.useCallback)(function(e){return o({type:"THEME_UPDATE_THEME_CONFIG",data:{themeConfig:{headingColor:null!=e?e:void 0}}})},[o]),b=(0,w.useCallback)(function(e){return o({type:"THEME_UPDATE_THEME_CONFIG",data:{themeConfig:{headingGradient:null!=e?e:void 0}}})},[o]),j=(0,w.useCallback)(function(e){return o({type:"THEME_UPDATE_THEME_CONFIG",data:{themeConfig:{bodyColor:null!=e?e:void 0}}})},[o]),x=(0,w.useCallback)(function(){var e=(0,tw.p6)();window.open(e,"_blank")},[]),v=u[c.headingFont||I.ke.headingFont]||u[I.ke.headingFont],y=u[c.bodyFont||I.ke.bodyFont]||u[I.ke.bodyFont],O=c.headingFontWeight||I.ZT.heading,E=c.bodyFontWeight||I.ZT.body,k=(0,$.wj)(c);return(0,er.jsx)(eB,{onBackClick:a,label:r,children:(0,er.jsxs)(eP.K,{children:[(0,er.jsxs)(eS.NI,{mb:"2",children:[(0,er.jsx)(e_.l,{children:(0,er.jsx)(p.x,{children:"Heading font"})}),(0,er.jsx)(tA,{fonts:s,value:c.headingFont,customFontsEnabled:t,updateValue:d,onFontUploadClick:x,weight:"bold",defaultFont:I.ke.headingFont,"data-testid":"custom-theme-heading-font-picker"}),t&&(0,er.jsx)(tG,{font:v,value:O,defaultWeight:700,updateValue:f})]}),(0,er.jsxs)(eS.NI,{mb:"2","data-testid":"custom-theme-heading-color-picker",children:[(0,er.jsx)(e_.l,{children:(0,er.jsx)(p.x,{children:"Heading color"})}),(0,er.jsx)(eI.U,{color:c.config.headingColor,updateColor:g,defaultColor:k?I.Qw:I.l0,gradient:c.config.headingGradient,updateGradient:b})]}),(0,er.jsxs)(eS.NI,{children:[(0,er.jsx)(e_.l,{children:(0,er.jsx)(p.x,{children:"Body font"})}),(0,er.jsx)(tA,{fonts:s,value:c.bodyFont,customFontsEnabled:t,updateValue:h,onFontUploadClick:x,weight:"normal",defaultFont:I.ke.bodyFont,"data-testid":"custom-theme-body-font-picker"}),t&&(0,er.jsx)(tG,{font:y,value:E,defaultWeight:400,updateValue:m})]}),(0,er.jsx)(tZ,{label:"Body color",value:(null===(e=c.config)||void 0===e?void 0:e.bodyColor)||null,defaultValue:k?I.Z_:I.zL,updateValue:j}),(0,er.jsxs)(eZ.b,{fontSize:"xs",mt:"6",children:[(0,er.jsx)(eV.z,{}),(0,er.jsx)(p.x,{children:"Note: these colors may be lightened or darkened for contrast and accessibility."})]})]})})}},{label:"Logo",icon:function(e){return e.logoUrl?ev.Hh:ex.th},Component:function(){var e=eb(),t=e.pop,n=e.state,r=e.dispatch,o=e.label,i=n.theme;return(0,er.jsx)(eB,{onBackClick:t,label:o,children:(0,er.jsx)(eS.NI,{children:(0,er.jsx)(tY,{value:i.logoUrl||null,onLogoUploadStart:function(){r({type:"THEME_LOGO_UPLOAD_STARTED"})},updateValue:function(e){return r({type:"THEME_LOGO_UPLOAD_SUCCESS",data:{logoUrl:null!=e?e:void 0}})},onLogoUploadFail:function(){r({type:"THEME_LOGO_UPLOAD_FAIL"})}})})})}},{label:"Advanced",icon:ej.gr,Component:function(){var e,t,n,r=eb(),o=r.pop,i=r.state,a=r.dispatch,c=r.label,l=i.theme;return(0,er.jsx)(eB,{onBackClick:o,label:c,children:(0,er.jsxs)(eP.K,{children:[(0,er.jsxs)(eS.NI,{children:[(0,er.jsx)(e_.l,{children:"Font size"}),(0,er.jsx)(tn.Y2,{defaultValue:null===(e=l.config)||void 0===e?void 0:e.fontSize,onChange:function(e,t){a({type:"THEME_UPDATE_THEME_CONFIG",data:{themeConfig:{fontSize:Number.isNaN(t)?void 0:t}}})},children:(0,er.jsx)(tn.zu,{})})]}),(0,er.jsx)(tu,{label:"Content CSS",initialValue:null===(t=l.config)||void 0===t?void 0:t.contentStyles,updateValue:function(e){return a({type:"THEME_UPDATE_THEME_CONFIG",data:{themeConfig:{contentStyles:e}}})}}),(0,er.jsx)(tu,{label:"Card effects",initialValue:null===(n=l.config)||void 0===n?void 0:n.containerStyles,updateValue:function(e){return a({type:"THEME_UPDATE_THEME_CONFIG",data:{themeConfig:{containerStyles:e}}})},helperText:"Applies to expanded cards."})]})})},isForGammaOnly:!0}],tX={outline:"3px dashed var(--chakra-colors-sunglow-500)",outlineOffset:"0"},t0=function(){var e=eb(),t=e.push,n=e.state,r=e.setLabel,o=n.theme,i=(0,_.SE)().isGammaOrgUser,c=(0,w.useMemo)(function(){return tJ.filter(function(e){return(!e.featureFlag||!!eT.VH.get(e.featureFlag))&&(!e.isForGammaOnly||!!i)})},[i]);return(0,er.jsx)(eC.GS,{listStyleType:"none",marginStart:0,children:c.map(function(e,n){var c=e.label,l=e.icon,s=e.Component,u="".concat(n+1,". ").concat(c);return(0,er.jsx)(eC.HC,{children:(0,er.jsx)(eR,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?t$(Object(n),!0).forEach(function(t){(0,a.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):t$(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({icon:"function"==typeof l?l(o):l,label:u,onClick:function(){r(u),t(s)}},e.isForGammaOnly&&i&&tX))},c)})})},t1=function(e){var t=e.theme,n=e.dispatch,r=e.fonts,o=e.fontsMap,i=(0,w.useState)(""),a=i[0],c=i[1];return(0,er.jsx)(eg.Provider,{value:{state:{theme:t,fontState:{fonts:r,fontsMap:o}},dispatch:n,label:a,setLabel:c},children:(0,er.jsx)(ef,{InitialComponent:t0})})},t2=n(18781),t3=n(2321),t4=n(41037),t6=n(67755),t5=n(67925),t8=n(27777),t9=n(73716),t7=n(28238),ne=n(67887);function nt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function nn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nt(Object(n),!0).forEach(function(t){(0,a.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nt(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var nr=function(e){var t=e.value,n=e.onSave,r=e.themeValidationError;return(0,er.jsxs)(eS.NI,{isInvalid:Boolean(r),children:[(0,er.jsx)(t6.C,{defaultValue:t,placeholder:I.$d,onSubmit:n,submitOnBlur:!0,isPreviewFocusable:!0,fontSize:"3xl",children:(0,er.jsxs)(H.U,{minHeight:14,children:[(0,er.jsx)(t5.w,{"data-testid":"custom-theme-name-preview"}),(0,er.jsx)(t8.I,{as:t9.V,w:{sm:"50%",lg:"40%",xl:"30%","2xl":"20%"},"data-testid":"custom-theme-name-input"}),(0,er.jsx)(no,{})]})}),r&&(0,er.jsx)(ta.J1,{fontWeight:"500",pb:2,children:r})]})},no=function(){var e=(0,t7.Z)(),t=e.isEditing,n=e.getSubmitButtonProps,r=e.getCancelButtonProps,o=e.getEditButtonProps;return t?(0,er.jsxs)(g.h,{justifyContent:"center",size:"sm",spacing:0,children:[(0,er.jsx)(O.kH,{label:"Cancel",children:(0,er.jsx)(ne.h,nn({variant:"ghost","aria-label":"Cancel",icon:(0,er.jsx)(L.G,{icon:t4.YI})},r()))}),(0,er.jsx)(O.kH,{label:"Save theme name",children:(0,er.jsx)(ne.h,nn(nn({variant:"ghost","aria-label":"Save theme name",icon:(0,er.jsx)(L.G,{icon:t3.LE})},n()),{},{"data-testid":"save-theme-name-button"}))})]}):(0,er.jsx)(f.k,{justifyContent:"center",children:(0,er.jsx)(O.kH,{label:"Edit theme name",children:(0,er.jsx)(m.xu,{children:(0,er.jsx)(ne.h,nn(nn({variant:"ghost","aria-label":"Edit theme name",size:"sm",icon:(0,er.jsx)(L.G,{icon:t2.faPenToSquare})},o()),{},{ref:null}))})})})},ni="theme-editor-root",na=function(e){var t,n=e.state,r=e.dispatch,o=e.docContent,i=e.doc,a=e.workspaceId,c=n.theme,l=n.customizationStep,s=(0,w.useState)(),u=s[0],d=s[1],h=(0,w.useState)(null),m=h[0],g=h[1],b=(0,D.Kt)(d,300);(0,w.useEffect)(function(){b(c)},[c,b]);var j=(0,Y.TY)(a),x=j.globalFonts,y=j.workspaceFonts,E=j.fontsMap,k=j.allThemeFonts;null!=o&&o.content&&null!==(t=o.content[0].attrs)&&void 0!==t&&t.background&&(o.content[0].attrs.background=q.jg);var C=(0,W.CG)(B.mT),T=(0,K.i)({base:"var(--chakra-sizes-xs)",lg:"var(--chakra-sizes-md)","2xl":"var(--chakra-sizes-xl)"})||"var(--chakra-sizes-md)";(0,w.useEffect)(function(){var e=null==u?void 0:u.config.accentBackgrounds;if(e){if(m&&0===e.length){m.commands.setContent(Q.y);return}null==m||m.commands.updateThemeAccentImages(e,!0)}},[m,null==u?void 0:u.config.accentBackgrounds]);var P=(0,w.useCallback)(function(e){r({type:"SET_NEW_THEME_FOR_SELECTING",data:{theme:(0,$.mg)(e)}})},[r]),S=(0,w.useCallback)(function(){r({type:"SET_NEW_THEME_FOR_CUSTOMIZING",data:{theme:(0,$.mg)(c,!0)}})},[r,c]);return(0,er.jsxs)(f.k,{direction:"row-reverse",h:"100%",children:[(0,er.jsx)(f.k,{direction:"column",overflowY:"auto",w:T,borderLeft:"1px solid",borderColor:"gray.200",children:(0,er.jsx)(f.k,{flex:"1",direction:"column",position:"relative",children:"selection"===l?(0,er.jsx)(eo,{theme:c,onThemeClick:P,onSelectClick:S}):(0,er.jsx)(t1,{theme:c,dispatch:r,fonts:{globalFonts:x,workspaceFonts:y},fontsMap:E})})}),(0,er.jsx)(f.k,{flex:1,bg:"gray.100",position:"relative",maxW:"calc(100vw - ".concat(T,")"),children:(0,er.jsxs)(f.k,{className:ni,overflowY:"scroll",width:"100%",height:"100%",direction:"column",position:"relative",css:{"--editor-width":"100%"},children:[(0,er.jsx)(V.Y,{}),(0,er.jsx)(ei.J,{fonts:k}),(0,er.jsxs)(M.m,{variant:"soft-rounded",size:"sm","data-testid":"custom-theme-tabs",children:[o&&(0,er.jsx)(v.M,{position:"sticky",top:0,zIndex:2,background:"white",children:(0,er.jsxs)(z.t,{p:2,position:"absolute",top:"1rem",background:"white",borderRadius:"full",shadow:"md",children:[(0,er.jsx)(U.O,{"data-testid":"custom-theme-tester-deck-tab",children:(0,er.jsxs)(H.U,{children:[(0,er.jsx)(L.G,{icon:F.Md}),(0,er.jsxs)(p.x,{children:["Tester ",O._u]})]})}),(0,er.jsx)(U.O,{"data-testid":"custom-theme-current-deck-tab",children:(0,er.jsxs)(H.U,{children:[(0,er.jsx)(L.G,{icon:A.s2}),(0,er.jsxs)(p.x,{children:["Current ",O._u]})]})})]})}),(0,er.jsxs)(N.n,{"data-testid":"custom-theme-tab-panels",children:[(0,er.jsx)(R.x,{p:0,"data-testid":"custom-theme-preview-editor",children:(0,er.jsx)(Z.fb,{onCreate:function(e){return g(e.editor)},initialContent:Q.y,theme:u,scrollingParentSelector:".".concat(ni),isInsideDrawer:!0})}),o&&(0,er.jsx)(R.x,{p:0,"data-testid":"custom-theme-preview-editor",children:(0,er.jsx)(Z.fb,{reduxData:{cards:C},initialContent:o,theme:u,scrollingParentSelector:".".concat(ni),doc:i,isInsideDrawer:!0})})]})]})]})})]})},nc=function(e){var t,n=e.name,r=e.doc,o=e.theme,i=e.themeValidationError,a=e.dispatch,c=(0,w.useState)(),l=c[0],s=c[1],u=(0,T.rxn)({variables:{id:null==o?void 0:o.id},skip:!o||"new"===o.id}),d=u.data,h=u.loading,f=(0,O.$L)(null==r?void 0:r.title);(0,w.useEffect)(function(){!h&&d&&d.theme&&s(d.theme)},[h,d,s]);var m=(0,w.useCallback)(function(e){a({type:"THEME_UPDATE_THEME_NAME",data:{name:e||I.$d}})},[a]);return(0,er.jsxs)(er.Fragment,{children:[(0,er.jsx)(nr,{value:n||I.$d,onSave:m,themeValidationError:i}),h?(0,er.jsx)(G.N,{noOfLines:1,fontSize:"sm",maxW:"300px"}):(0,er.jsxs)(p.x,{color:"gray.700",fontSize:"sm",fontWeight:"normal",letterSpacing:"normal",children:[(null==l?void 0:l.createdBy)&&(0,er.jsxs)(er.Fragment,{children:["Created by ",l.createdBy.displayName,". "]}),null!=l&&l.docCount&&(null==l?void 0:l.docCount)===1&&(null==l?void 0:l.id)===(null==r?void 0:null===(t=r.theme)||void 0===t?void 0:t.id)?(0,er.jsxs)(er.Fragment,{children:[(0,er.jsx)("strong",{children:f})," is the only ",O._u," using this theme."]}):(0,er.jsxs)(er.Fragment,{children:[(0,er.jsxs)("strong",{children:[(null==l?void 0:l.docCount)||0," ",(null==l?void 0:l.docCount)===1?O._u:O.Cq]})," ",(null==l?void 0:l.docCount)===1?"is":"are"," using this theme."]})]})]})},nl=["id","archived","fonts"],ns=["__typename","archived","createdTime","updatedTime","createdBy","fonts"];function nu(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function nd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function nh(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nd(Object(n),!0).forEach(function(t){(0,a.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nd(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var nf=["headingFont","bodyFont","accentColor","logoUrl"],np=(0,w.memo)(function(e){var t,n=e.isOpen,r=e.onClose,o=e.state,a=e.dispatch,v=e.docContent,y=e.onThemeCreated,E=e.disableDrawerTransition,F=void 0!==E&&E,A=(0,P.z$)(),M=(0,l.p)(),z=(0,C.v9)(S.yx),U=(0,D.NE)(n,500),H=(0,_.SE)(),N=H.user,R=H.currentWorkspace,G=(0,w.useRef)(null),L=(0,T.Wu6)(),B=(0,c.Z)(L,2),W=B[0],Z=B[1].loading,V=(0,T.suk)(),q=(0,c.Z)(V,2),K=q[0],Q=q[1].loading,Y="loading"===o.themeBackgroundImgStatus||"loading"===o.themeLogoImgStatus,$=(0,w.useCallback)(function(){a({type:"THEME_RESET"}),r()},[a,r]),J=(0,w.useCallback)(function(){if(N&&R&&o.theme){if(!o.theme.name){a({type:"THEME_VALIDATION_ERROR",data:{errorMessage:"Theme name is required."}});return}if("new"===o.theme.id){var e=nh(nh({},o.theme),{},{workspaceId:R.id});e.id,e.archived,e.fonts,W({variables:{input:(0,i.Z)(e,nl)},update:function(t,n){var r=n.data;null!=r&&r.createTheme&&t.writeQuery({query:T.$LR,variables:{workspaceId:e.workspaceId,archived:!1},data:{themes:[r.createTheme]}})},optimisticResponse:{createTheme:nh(nh({__typename:"Theme"},e),{},{createdTime:new Date().toISOString(),updatedTime:new Date().toISOString()})}}).then(function(t){var n,r=t.data;null!=r&&r.createTheme&&(null==A||A.track(P.AA.THEME_CREATED,{theme_id:null==r?void 0:null===(n=r.createTheme)||void 0===n?void 0:n.id,type:"new"}),null==y||y(r.createTheme)),M({title:'Theme "'.concat(e.name,'" has been saved'),status:"success",duration:3e3,position:"top",isClosable:!0}),$()}).catch(function(t){t.graphQLErrors&&t.graphQLErrors.length>0&&"duplicate_theme_name"===t.graphQLErrors[0].code?a({type:"THEME_VALIDATION_ERROR",data:{errorMessage:t.message}}):(console.error("Couldn't create theme ".concat(e.name," error: ").concat(t)),M({title:"Couldn't create theme. ".concat(t),status:"error",duration:3e3,position:"top",isClosable:!1}))})}else{var t,n=o.theme,r=(n.__typename,n.archived,n.createdTime,n.updatedTime,n.createdBy,n.fonts,(0,i.Z)(n,ns)),c=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return nu(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nu(e,t)}}(e))){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){c=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw i}}}}(nf);try{for(c.s();!(t=c.n()).done;){var l=t.value;l in r&&void 0===r[l]&&(r[l]=null)}}catch(s){c.e(s)}finally{c.f()}K({variables:{input:r},update:function(e,t){var n=t.data;null!=n&&n.updateTheme&&e.writeQuery({query:T.$LR,variables:{workspaceId:o.theme.workspaceId,archived:!1},data:{themes:[n.updateTheme]}})},optimisticResponse:{updateTheme:nh(nh({__typename:"Theme"},o.theme),{},{createdTime:new Date().toISOString(),updatedTime:new Date().toISOString()})}}).then(function(){null==A||A.track(P.AA.THEME_UPDATED,{theme_id:o.theme.id}),M({title:"Theme ".concat(o.theme.name," has been updated"),status:"success",duration:3e3,position:"top",isClosable:!0}),$()}).catch(function(e){e.graphQLErrors&&"duplicate_theme_name"===e.graphQLErrors[0].code?a({type:"THEME_VALIDATION_ERROR",data:{errorMessage:e.message}}):(console.error("Couldn't update theme ".concat(o.theme.name," error: ").concat(e)),M({title:"Couldn't update theme. ".concat(e),status:"error",duration:3e3,position:"top",isClosable:!1}))})}}},[N,R,a,null==o?void 0:o.theme,W,M,$,A,y,K]),X="new"===o.theme.id||!k()(o.theme,o.originalTheme);return(0,er.jsx)(O.Wk,{isDark:!1,children:(0,er.jsxs)(s.d,{placement:"bottom",onClose:$,isOpen:n,isFullHeight:!0,initialFocusRef:G,children:[(0,er.jsx)(u.Z,{}),(0,er.jsxs)(d.s,{borderTopRadius:"xl",h:"calc(var(--100vh) - 24px)",transform:F?"none !important":void 0,children:[(0,er.jsx)(h.x,{borderBottom:"1px solid #000",borderColor:"gray.200",children:"selection"===o.customizationStep?(0,er.jsxs)(er.Fragment,{children:[(0,er.jsx)(f.k,{"align-items":"center",letterSpacing:"normal",fontSize:"3xl",minH:14,py:1,children:(0,er.jsx)(p.x,{children:"How do you want to get started?"})}),(0,er.jsx)(p.x,{color:"gray.700",fontSize:"sm",fontWeight:"normal",letterSpacing:"normal",children:"Choose which theme you'd like to use as a base."})]}):(0,er.jsxs)(f.k,{"justify-content":"space-between",alignItems:"flex-end",children:[(0,er.jsx)(m.xu,{flex:1,children:(0,er.jsx)(nc,{name:(null===(t=o.theme)||void 0===t?void 0:t.name)||I.$d,doc:z,theme:o.theme,dispatch:a,themeValidationError:o.themeValidationError})}),(0,er.jsxs)(g.h,{children:[(0,er.jsx)(b.z,{variant:"ghost",onClick:$,children:"Cancel"}),(0,er.jsx)(O.kH,{isDisabled:!Y,label:"Images are still uploading",children:(0,er.jsx)(m.xu,{display:"inline-flex",children:(0,er.jsx)(b.z,{variant:"solid",isLoading:Z||Q||Y,isDisabled:!X,onClick:J,"data-testid":"custom-theme-save",children:"Save theme"})})})]})]})}),(0,er.jsx)(j.f,{p:0,h:"100%",children:(F?n:U)?(0,er.jsx)(na,{state:o,workspaceId:null==R?void 0:R.id,dispatch:a,docContent:v,doc:z}):(0,er.jsx)(nm,{})}),(0,er.jsx)(x.o,{ref:G})]})]})})});np.displayName="ThemeEditorDrawer";var nm=function(){return(0,er.jsx)(m.xu,{flexDirection:"column",flex:"1",w:"100%",h:"100%",bg:"gray.100",inset:0,children:(0,er.jsx)(v.M,{h:"100%",children:(0,er.jsx)(y.$,{})})})}},70685:function(e,t,n){"use strict";n.d(t,{o:function(){return en}});var r=n(95235),o=n(82269),i=n(81333),a=n(56581),c=n(8283),l=n(91012),s=n(55479),u=n(75944),d=n(53738),h=n(11919),f=n(93319),p=n(42751),m=n(2784),g=n(24553),b=n(29999),j=n(68358),x=n(99121),v=n(33660),y=n(59212),O=n(55580),E=n(9088),k=n(30893),w=n(67887),C=n(94301),T=n(40771),P=n(82904),S=n(49747),_=n(49929),D=n(52322),I=(0,m.memo)(function(e){var t=e.onCustomizeThemeClick;return(0,D.jsxs)(E.v,{isLazy:!0,children:[(0,D.jsx)(k.j,{as:w.h,isRound:!0,size:"xs",variant:"ghost",colorScheme:"blackAlpha",icon:(0,D.jsx)(_.G,{icon:O.faEllipsis}),onClick:function(e){return e.stopPropagation()},children:"Actions"}),(0,D.jsx)(C.h,{children:(0,D.jsxs)(T.q,{zIndex:"modal",onClick:function(e){return e.stopPropagation()},children:[(0,D.jsx)(P.s,{icon:(0,D.jsx)(_.G,{icon:y.Mw,fixedWidth:!0}),onClick:t,children:"Customize this theme"}),(0,D.jsx)(S.R,{}),(0,D.jsx)(d.xu,{px:4,py:0,maxW:56,children:(0,D.jsx)(l.x,{fontSize:"sm",color:"gray.600",children:"Duplicate this theme and edit a custom version for your workspace"})})]})})]})}),F=n(36471),A=n(46510),M=n(18504),z=n(89397),U=n(31807),H=n(20010),N=n(56915),R=n(48273),G=n(92619),L=n(2167),B=n(81927),W=n(80353),Z=n(76648),V=n(45650),q=n(64827);function K(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?K(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Y=function(e){var t=e.theme,n=e.isOpen,r=e.onClose,o=(0,m.useState)(),a=o[0],c=o[1],u=(0,g.I3Y)(),d=(0,i.Z)(u,1)[0],h=(0,s.p)(),f=(0,g.rxn)({variables:{id:null==t?void 0:t.id},skip:!t||"new"===t.id}),b=f.data,j=f.loading;(0,m.useEffect)(function(){var e;!j&&b&&null!==(e=b.theme)&&void 0!==e&&e.docCount&&c(b.theme.docCount)},[j,b,c]);var x=(0,m.useCallback)(function(){t&&t.id&&d({variables:{id:t.id},update:function(e,n){var r=n.data;null!=r&&r.archiveTheme&&e.writeQuery({query:g.$LR,variables:{workspaceId:t.workspaceId,archived:!1},data:{themes:[r.archiveTheme]}})},optimisticResponse:{archiveTheme:Q(Q({__typename:"Theme"},t),{},{archived:!0,updatedTime:new Date().toISOString()})}}).then(function(){h({title:"Theme ".concat(t.name," has been deleted"),status:"success",duration:3e3,position:"top",isClosable:!0})}).catch(function(e){console.error("Couldn't create theme ".concat(t.name," error: ").concat(e))})},[d,t,h]);return(0,D.jsxs)(H.u_,{closeOnOverlayClick:!1,isOpen:n,onClose:r,size:"lg",children:[(0,D.jsx)(N.Z,{}),(0,D.jsxs)(R.h,{children:[(0,D.jsxs)(G.x,{children:["Delete ",t.name,"?"]}),(0,D.jsxs)(L.f,{children:[a&&a>0?(0,D.jsxs)(l.x,{mb:2,children:["It's currently in use by ",(0,D.jsx)("strong",{children:a})," ",a>1?p.Cq:p._u,". Existing ",p.Cq," will not be changed, but new"," ",p.Cq," will no longer be able to select it."]}):j?(0,D.jsx)(B.O,{h:"1em",mb:2}):(0,D.jsxs)(l.x,{mb:2,children:["It's not used by any ",p.Cq," right now."]}),(0,D.jsx)(l.x,{color:"red.500",children:"This action cannot be undone."})]}),(0,D.jsx)(W.m,{children:(0,D.jsxs)(Z.h,{children:[(0,D.jsx)(V.z,{variant:"ghost",onClick:r,children:"Cancel"}),(0,D.jsx)(V.z,{variant:"ghost",colorScheme:"red",onClick:function(){x(),r()},children:"Delete Theme"})]})}),(0,D.jsx)(q.o,{})]})]})},$=(0,m.memo)(function(e){var t=e.theme,n=e.openThemeEditorWithThisTheme,r=e.onDuplicate,o=e.onDeleteThemeModalOpen,i=e.isDeleteThemeModalOpen,a=e.onDeleteThemeModalClose;return(0,D.jsxs)(E.v,{isLazy:!0,children:[(0,D.jsx)(k.j,{as:w.h,isRound:!0,size:"xs",variant:"ghost",colorScheme:"blackAlpha",icon:(0,D.jsx)(_.G,{icon:O.faEllipsis}),onClick:function(e){return e.stopPropagation()},children:"Actions"}),(0,D.jsx)(C.h,{children:(0,D.jsxs)(T.q,{zIndex:"modal",onClick:function(e){return e.stopPropagation()},children:[(0,D.jsxs)(d.xu,{px:4,py:0,maxWidth:"300px",children:[(0,D.jsx)(l.x,{noOfLines:3,children:t.name}),t.createdTime&&(0,D.jsxs)(l.x,{fontSize:"sm",color:"gray.500",noOfLines:1,children:["Created ",(0,z.Z)((0,U.Z)(t.createdTime),"PPP")]}),t.createdBy&&(0,D.jsx)(p.kH,{label:t.createdBy.email,children:(0,D.jsxs)(l.x,{display:"inline-block",fontSize:"sm",color:"gray.500",noOfLines:1,children:["by ",t.createdBy.displayName]})})]}),(0,D.jsx)(S.R,{}),(0,D.jsx)(P.s,{icon:(0,D.jsx)(_.G,{icon:M.q2,fixedWidth:!0}),onClick:n,children:"Edit"}),(0,D.jsx)(P.s,{icon:(0,D.jsx)(_.G,{icon:A.WM,fixedWidth:!0}),onClick:r,children:"Duplicate"}),(0,D.jsx)(S.R,{}),(0,D.jsx)(P.s,{color:"red.500",icon:(0,D.jsx)(_.G,{icon:F.$,fixedWidth:!0}),onClick:o,children:"Delete"})]})}),i&&(0,D.jsx)(C.h,{children:(0,D.jsx)(Y,{theme:t,isOpen:!0,onClose:a})})]})}),J=["id"];function X(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?X(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var et=function(e){var t=e.isChecked,n=e.name;return(0,D.jsxs)(c.U,{spacing:1,alignItems:"flex-start",children:[t&&(0,D.jsx)(a.n,{w:3,h:"auto",mr:1,mt:1,color:"trueblue.700"}),(0,D.jsx)(l.x,{fontSize:"sm",noOfLines:1,"data-testid":"theme-name",color:t?"trueblue.700":void 0,children:n})]})},en=(0,m.memo)(function(e){var t,n,r,a,l=e.theme,y=e.onThemeClicked,O=e.isChecked,E=void 0!==O&&O,k=e.type,w=e.onEditClick,C=e.variant,T=(0,b.z$)(),P=(0,s.p)(),S="ghost"===(void 0===C?"outline":C),_=(0,m.useCallback)(function(e){return function(){w&&(e?w((0,j.mg)(l,!0)):w(l))}},[w,l]),F=(0,u.q)({id:"deleteThemeModalDisclosure"}),A=F.isOpen,M=F.onOpen,z=F.onClose,U=(0,v.SE)(),H=U.user,N=U.currentWorkspace,R=(0,g.gFs)(),G=(0,i.Z)(R,1)[0],L=(0,m.useCallback)(function(){if(H&&N){var e=l.id;G({variables:{id:e},update:function(e,t){var n=t.data;null!=n&&n.duplicateTheme&&e.writeQuery({query:g.$LR,variables:{workspaceId:l.workspaceId,archived:!1},data:{themes:[n.duplicateTheme]}})},optimisticResponse:{duplicateTheme:ee(ee({id:"temp",__typename:"Theme"},(0,o.Z)(l,J)),{},{name:"".concat(l.name," (copy)"),archived:!1,createdTime:new Date().toISOString(),updatedTime:new Date().toISOString()})}}).then(function(t){var n=t.data;n&&(null==T||T.track(b.AA.THEME_DUPLICATED,{theme_id:n.duplicateTheme.id,source_theme_id:e,name:l.name}),null==T||T.track(b.AA.THEME_CREATED,{theme_id:n.duplicateTheme.id,name:n.duplicateTheme.name,type:"duplicate"}),P({title:"Theme ".concat(n.duplicateTheme.name," has been saved"),status:"success",duration:3e3,position:"top",isClosable:!0}))}).catch(function(e){console.error("Couldn't duplicate theme ".concat(l.name," error: ").concat(e)),P({title:"Couldn't duplicate theme. ".concat(e),status:"error",duration:3e3,position:"top",isClosable:!1})})}},[H,N,l,G,T,P]),B="custom"===(void 0===k?"custom":k)&&!!(null!==(t=l.createdBy)&&void 0!==t&&t.displayName),W=Boolean(y);return(0,D.jsxs)(d.xu,{bgColor:E?"trueblue.100":S?void 0:"linen.50",textAlign:"left",tabIndex:W?0:void 0,borderRadius:"md",transitionProperty:S?"common":"none",transitionDuration:"normal",outline:"none",onClick:function(){return null==y?void 0:y(l)},onKeyPress:function(e){W&&"Enter"===e.key&&(null==y||y(l))},_hover:W?{shadow:S||E?void 0:"lg",bgColor:E?"trueblue.100":S?"trueblue.50":"gray.100"}:void 0,_focus:{boxShadow:E||!W?void 0:"outline"},shadow:S?void 0:"md",p:S?2:0,"data-theme-id":l.id,"data-testid":E?"current-theme-preview":void 0,cursor:W?"pointer":void 0,children:[(0,D.jsx)(x.n,{theme:l}),(0,D.jsxs)(h.k,{align:"baseline",mt:1,direction:"column",p:S?0:2,children:[B&&(0,D.jsx)(h.k,{my:2,children:(0,D.jsx)(et,{name:l.name,isChecked:E})}),(0,D.jsxs)(c.U,{alignItems:"flex-start",w:"100%",children:[B?(0,D.jsx)(p.lB,{createdByYou:(null===(n=l.createdBy)||void 0===n?void 0:n.id)===(null==H?void 0:H.id),createdByName:null===(r=l.createdBy)||void 0===r?void 0:r.displayName,createdByProfileImageUrl:null===(a=l.createdBy)||void 0===a?void 0:a.profileImageUrl,timestamp:l.updatedTime,timestampDescriptor:"Updated"}):(0,D.jsx)(et,{name:l.name,isChecked:E}),(0,D.jsx)(f.L,{}),w?l.workspaceId?(0,D.jsx)($,{theme:l,openThemeEditorWithThisTheme:_(!1),onDuplicate:L,onDeleteThemeModalOpen:M,isDeleteThemeModalOpen:A,onDeleteThemeModalClose:z}):(0,D.jsx)(I,{onCustomizeThemeClick:_(!0)}):null]})]})]})});en.displayName="ThemePreview"},20949:function(e,t,n){"use strict";n.d(t,{g:function(){return d}});var r=n(95235),o=n(9850),i=n.n(o),a=n(2784);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var s={theme:n(51183).mU,themeValidationError:null,status:"new",themeBackgroundImgStatus:"idle",themeLogoImgStatus:"idle",customizationStep:null,originalTheme:null};function u(e,t){switch(t.type){case"NEW_BLANK_THEME":return l(l({},i()(s)),{},{customizationStep:"customization"});case"THEME_RESET":return i()(s);case"SET_THEME_EDITING":var n=t.data.theme,r=i()(n);return l(l({},e),{},{status:"editing",theme:n,originalTheme:r,customizationStep:"customization"});case"SET_NEW_THEME_FOR_SELECTING":var o=t.data.theme;return l(l({},e),{},{status:"new",theme:o,customizationStep:"selection"});case"SET_NEW_THEME_FOR_CUSTOMIZING":var a=t.data.theme,c=i()(a);return l(l({},e),{},{theme:a,originalTheme:c,customizationStep:"customization"});case"THEME_UPDATE_THEME_PROPS":var u=e.theme,d=t.data.themeProps;return l(l({},e),{},{theme:l(l({},u),d)});case"THEME_UPDATE_THEME_CONFIG":var h=e.theme,f=t.data.themeConfig;return l(l({},e),{},{theme:l(l({},h),{},{config:l(l({},h.config),f)})});case"THEME_BACKGROUND_IMAGE_UPLOAD_STARTED":var p=e.theme,m=t.data.background;return l(l({},e),{},{themeBackgroundImgStatus:"loading",theme:l(l({},p),{},{config:l(l({},p.config),{},{background:m})})});case"THEME_BACKGROUND_UPDATE_SUCCESS":var g=e.theme,b=t.data.background;return l(l({},e),{},{themeBackgroundImgStatus:"idle",theme:l(l({},g),{},{config:l(l({},g.config),{},{background:b})})});case"THEME_BACKGROUND_IMAGE_UPLOAD_FAIL":return l(l({},e),{},{themeBackgroundImgStatus:"idle"});case"THEME_LOGO_UPLOAD_STARTED":return l(l({},e),{},{themeLogoImgStatus:"loading"});case"THEME_LOGO_UPLOAD_SUCCESS":var j=e.theme,x=t.data.logoUrl;return l(l({},e),{},{themeLogoImgStatus:"idle",theme:l(l({},j),{},{logoUrl:x})});case"THEME_LOGO_UPLOAD_FAIL":return l(l({},e),{},{themeLogoImgStatus:"idle"});case"THEME_UPDATE_THEME_NAME":var v=e.theme,y=t.data.name;return l(l({},e),{},{theme:l(l({},v),{},{name:y}),themeValidationError:null});case"THEME_VALIDATION_ERROR":var O=t.data.errorMessage;return l(l({},e),{},{themeValidationError:O});case"THEME_VALIDATION_ERROR_RESET":return l(l({},e),{},{themeValidationError:null})}}function d(){return a.useReducer(u,s)}},36880:function(e,t,n){"use strict";n.d(t,{G:function(){return Y},t:function(){return Q}});var r=n(48798),o=n(62431),i=n(11919),a=n(5766),c=n(81927),l=n(72360),s=n(48322),u=n(78116),d=n(56915),h=n(16796),f=n(64827),p=n(92619),m=n(2167),g=n(89190),b=n(73848),j=n(24798),x=n(53738),v=n(84520),y=n(95085),O=n(80353),E=n(45650),k=n(49929),w=n(42751),C=n(2784),T=n(22087),P=n(68358),S=n(64782),_=n(66564),D=n(61411),I=n(38239),F=n(49626),A=n(66724),M=n(18751),z=n(8283),U=n(91012),H=n(93319),N=n(24553),R=n(33660),G=n(16686),L=n(71354),B=n(52322),W=function(e){var t=e.openThemeEditor;return(0,B.jsxs)(L.K,{bg:"gray.100",p:4,textAlign:"left",spacing:4,borderRadius:"md",my:2,children:[(0,B.jsx)(U.x,{textAlign:"center",fontWeight:"700",children:"Make it yours, in seconds"}),(0,B.jsx)(U.x,{fontSize:"sm",color:"gray.700",children:"Creating a custom theme is simple — just add your colors, fonts, and logo."}),(0,B.jsx)(E.z,{onClick:t,variant:"solid",leftIcon:(0,B.jsx)(k.G,{icon:G.Jy}),"data-testid":"new-theme-button",children:"Customize your theme"})]})},Z=n(12741),V=n(70685),q=function(e){var t=e.themes,n=e.type,r=e.currentTheme,o=e.setDocTheme,i=e.openThemeEditor;return(0,B.jsx)(a.M,{columns:2,spacing:1,my:2,mx:-2,children:(0,Z.Z)(t).sort(P.qb).map(function(e){return(0,B.jsx)(V.o,{type:n,theme:e,isChecked:e.id===r.id,onEditClick:i,onThemeClicked:o,variant:"ghost"},e.id)})})},K=function(e){var t=e.currentTheme,n=e.setDocTheme,r=e.openThemeEditor,o=(0,R.SE)().currentWorkspace,i=(0,N.BCl)({variables:{workspaceId:null==o?void 0:o.id,archived:!1},skip:!o,fetchPolicy:"cache-first",nextFetchPolicy:"cache-only"}),a=i.data,c=i.loading,u=(0,N.BCl)({variables:{workspaceId:null,archived:!1},fetchPolicy:"cache-first",nextFetchPolicy:"cache-only"}),d=u.data,h=u.loading,f=(null==a?void 0:a.themes)||[],p=(null==d?void 0:d.themes)||[],m=(0,C.useCallback)(function(){r((0,P.QB)(null==d?void 0:d.themes),!0)},[d,r]),g=(null==f?void 0:f.length)>0;return(0,B.jsxs)(B.Fragment,{children:[t.archived?(0,B.jsxs)(l.b,{status:"warning",mb:4,children:[(0,B.jsx)(s.z,{}),(0,B.jsxs)(x.xu,{children:[(0,B.jsxs)(A.C,{children:["This ",w._u," is using a deleted theme."]}),(0,B.jsx)(M.X,{children:"You can pick a new one, but you won't be able to go back once you do."})]})]}):null,(0,B.jsxs)(B.Fragment,{children:[(0,B.jsxs)(z.U,{children:[(0,B.jsx)(U.x,{color:"gray.500",fontWeight:"600",fontSize:"sm",children:"Custom themes"}),(0,B.jsx)(H.L,{}),g&&o&&(0,B.jsx)(E.z,{size:"xs",leftIcon:(0,B.jsx)(k.G,{icon:F.r8}),onClick:m,"data-testid":"new-theme-button",children:"New theme"})]}),c?(0,B.jsx)(Q,{size:2}):g?(0,B.jsx)(q,{themes:f,type:"custom",currentTheme:t,setDocTheme:n,openThemeEditor:r}):o?(0,B.jsx)(W,{openThemeEditor:m}):null,(0,B.jsxs)(z.U,{pt:2,children:[(0,B.jsx)(U.x,{color:"gray.500",fontWeight:"600",fontSize:"sm",children:"Standard themes"}),(0,B.jsx)(H.L,{})]})]}),h?(0,B.jsx)(Q,{size:4}):(0,B.jsx)(q,{themes:p,type:"standard",currentTheme:t,setDocTheme:n,openThemeEditor:r})]})},Q=function(e){var t=e.size;return(0,B.jsx)(i.k,{h:"100%",children:(0,B.jsx)(a.M,{w:"100%",columns:2,spacing:5,mt:2,children:Array(t).fill(!0).map(function(e,t){return(0,B.jsx)(c.O,{minH:"9em",borderRadius:"base"},t)})})})},Y=(0,C.memo)(function(e){var t=e.isOpen,n=e.onClose,i=e.getEditor,a=e.openThemeEditor,c=e.setDocTheme,F=e.updateAttributesAndTrack,A=i(),M=(0,T.CG)(_.Pu),z=(0,T.CG)(_.XV),U=(0,S.A)(A),H=(0,C.useMemo)(function(){return(0,B.jsxs)(l.b,{children:[(0,B.jsx)(s.z,{}),"The theme you choose in the Theme tab will control the background. You can override it by choosing an option above, or changing to a different theme."]})},[]);return(0,B.jsx)(w.Wk,{isDark:!1,children:(0,B.jsxs)(u.d,{returnFocusOnClose:!1,isOpen:t,placement:"right",onClose:n,size:"sm",children:[(0,B.jsx)(d.Z,{background:"none"}),(0,B.jsxs)(h.s,{onKeyDown:U,"data-testid":"doc-theme-drawer","data-doc-theme-drawer":!0,motionProps:{variants:{enter:{x:"0%",transition:{duration:.2}},exit:{x:"100%",transition:{duration:.1}}}},children:[(0,B.jsx)(f.o,{}),(0,B.jsx)(p.x,{children:"Theme"}),(0,B.jsx)(m.f,{overflowX:"hidden",children:(0,B.jsxs)(g.m,{variant:"soft-rounded",size:"sm",isFitted:!0,isLazy:!0,children:[(0,B.jsxs)(b.t,{children:[(0,B.jsxs)(j.O,{children:[(0,B.jsx)(x.xu,{mr:2,children:(0,B.jsx)(k.G,{icon:o.AV})}),"Theme"]}),(0,B.jsxs)(j.O,{children:[(0,B.jsx)(x.xu,{mr:2,children:(0,B.jsx)(k.G,{icon:r.re})}),"Background"]})]}),(0,B.jsxs)(v.n,{children:[(0,B.jsx)(y.x,{p:0,pb:1,mt:4,children:(0,B.jsx)(K,{currentTheme:M,setDocTheme:c,openThemeEditor:a})}),(0,B.jsx)(y.x,{p:0,pb:1,mt:4,children:(0,B.jsx)(I.o,{editor:A,background:z,updateNestedAttributes:F,defaultMessage:H,isDark:(0,P.wj)(M),isValidSource:D.Rr})})]})]})}),(0,B.jsx)(O.m,{children:(0,B.jsx)(E.z,{w:"100%",variant:"solid",onClick:n,children:"Done"})})]})]})})});Y.displayName="DocThemeDrawer"},2517:function(){}}]);
//# sourceMappingURL=1806-31f990660357a457.js.map