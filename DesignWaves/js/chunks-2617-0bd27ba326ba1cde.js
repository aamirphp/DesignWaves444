"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2617],{96420:function(n,e,t){t.d(e,{U:function(){return r}});var r=function(n){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e?n||"Untitled":n?"".concat(n," | Gamma"):"Gamma"}},91036:function(n,e,t){t.d(e,{_i:function(){return T._},eT:function(){return nn}});var r,o,i,c,a,d=t(95235),u=t(81333),s=t(55479),l=t(5632),f=t(2784),p=t(39594),v=t(24553),h=t(55941),m=t(30959),b=t(69262),g=t(22087),y=t(33660),C=t(86508),j=t(25850),I=function(n){var e=(0,g.TL)(),t=(0,y.SE)().currentWorkspace;(0,f.useEffect)(function(){if(n)return C.VH.updateWorkspaceInLdContext(n).then(function(){e((0,j.vH)({isDocWorkspaceSet:!0}))}),function(){C.VH.updateWorkspaceInLdContext(t).then(function(){e((0,j.vH)({isDocWorkspaceSet:!1}))})}},[t,e,n])},O=t(97374),x=t(7328),w=t(57981),P=(0,w.Ps)(r||(r=(0,x.Z)(["\n  fragment DefaultCardFields on Card {\n    id\n    archived\n    docId\n    title\n    text\n    previewUrl\n    createdTime\n    updatedTime\n  }\n"])));(0,w.Ps)(o||(o=(0,x.Z)(["\n  mutation CreateCard($id: ID!, $docId: ID!) {\n    createCard(id: $id, docId: $docId) {\n      id\n    }\n  }\n"]))),(0,w.Ps)(i||(i=(0,x.Z)(["\n  ","\n  query GetCard($id: ID!, $docId: ID!) {\n    card(id: $id, docId: $docId) {\n      ...DefaultCardFields\n    }\n  }\n"])),P),(0,w.Ps)(c||(c=(0,x.Z)(["\n  ","\n  query GetCards($docId: ID!) {\n    docCards(docId: $docId) {\n      ...DefaultCardFields\n    }\n  }\n"])),P);var D=(0,w.Ps)(a||(a=(0,x.Z)(["\n  ","\n  subscription SubscribeToCards($docId: ID!) {\n    docCards(docId: $docId) {\n      ...DefaultCardFields\n    }\n  }\n"])),P),k=t(98147),E=t(25180),_=t(63492),$=t(56590),S=t(46855),T=t(1533),U=t(75944),Z=t(57679),F=t(20010),G=t(56915),z=t(48273),M=t(92619),W=t(64827),L=t(2167),A=t(71354),N=t(91012),H=t(80353),R=t(76648),B=t(45650),K=t(52322),V=t(58952),q=function(n){var e,t=(null===(e=(0,g.CG)((0,Z.oH)(n||"")))||void 0===e?void 0:e.status)==="running",r=(0,f.useRef)(t);r.current=t;var o=(0,f.useState)(function(){return new V.B}),i=o[0],c=o[1],a=(0,f.useCallback)(function(){i.resolve()},[i]),d=(0,U.q)(),u=d.isOpen,s=d.onOpen,l=d.onClose;return{confirmNavigationFn:(0,f.useCallback)(function(){if(!r.current)return Promise.resolve();var n=new V.B;return c(n),s(),n.promise},[s]),confirmNavigationModalProps:{isOpen:u,onClose:l,onConfirm:a}}},Q=function(n){var e=n.isOpen,t=n.onClose,r=n.onConfirm;return(0,K.jsxs)(F.u_,{onClose:t,isOpen:e,isCentered:!0,children:[(0,K.jsx)(G.Z,{}),(0,K.jsxs)(z.h,{children:[(0,K.jsx)(M.x,{children:"Stop generating?"}),(0,K.jsx)(W.o,{}),(0,K.jsx)(L.f,{children:(0,K.jsxs)(A.K,{spacing:4,children:[(0,K.jsx)(N.x,{fontWeight:"bold",children:"If you navigate away, the AI will stop writing and you won't be able to continue from where you left off."}),(0,K.jsx)(N.x,{children:"The content already generated will be saved."})]})}),(0,K.jsx)(H.m,{children:(0,K.jsxs)(R.h,{children:[(0,K.jsx)(B.z,{variant:"ghost",onClick:t,children:"Cancel"}),(0,K.jsx)(B.z,{variant:"ghost",color:"red.600",onClick:r,children:"Stop generating"})]})})]})]})};function Y(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})),t.push.apply(t,r)}return t}function X(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?Y(Object(t),!0).forEach(function(e){(0,d.Z)(n,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Y(Object(t)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))})}return n}var J=function(n){var e=n.children,t=(0,b.ye)("docEditorForcePublicStatic"),r=(0,s.p)(),o=(0,y.we)(),i=(0,g.CG)(S.XV),c=(0,y.SE)(),a=c.user,d=c.userStatus,C=(0,f.useRef)(null),j=(0,g.TL)(),x=(0,l.useRouter)(),w=x.push,P=x.replace,U=(0,g.CG)(S.yx),Z=(0,E.Pi)(),F=(0,u.Z)(Z,2),G=F[0],z=F[1],M=z&&z.match(E.sg),W=M?M[0]:null,L=q(W),A=L.confirmNavigationFn,N=L.confirmNavigationModalProps,H=(0,f.useState)({isUnauthorized:void 0,setCollaborativeEditorInstance:function(n){C.current=n,B(function(e){return X(X({},e),{},{editor:n})})},getCollaborativeEditorInstance:function(){return C.current},confirmNavigation:A,editor:void 0}),R=H[0],B=H[1];(0,h.ts)(U),I(null==U?void 0:U.organization);var V=(0,v.WMx)({variables:{id:W},returnPartialData:!0,nextFetchPolicy:"cache-only"}),Y=(0,u.Z)(V,2),J=Y[0],nn=Y[1],ne=nn.data,nt=nn.loading,nr=nn.called,no=nn.subscribeToMore,ni=(0,y.py)("view",null==ne?void 0:ne.doc);(0,y.$K)(J),(0,f.useEffect)(function(){if(no&&R.docId&&nr)return no({document:$.dU,variables:{id:R.docId},updateQuery:function(n,e){var t=e.subscriptionData;return t.data&&t.data.doc&&n.doc?{doc:X(X(X({},n.doc),t.data.doc),{},{__typename:"Doc"})}:n}})},[R.docId,no,nr]);var nc=(0,v.WBF)({variables:{docId:W},returnPartialData:!0,nextFetchPolicy:"cache-only"}),na=(0,u.Z)(nc,2),nd=na[0],nu=na[1],ns=nu.data,nl=nu.called,nf=nu.subscribeToMore;return((0,m.p)(null==ns?void 0:ns.docCards,R.editor),(0,f.useEffect)(function(){if(nf&&R.docId&&nl)return nf({document:D,variables:{docId:R.docId},updateQuery:function(n,e){var t=e.subscriptionData;return t.data&&t.data.docCards?t.data:n}})},[R.docId,nf,nl]),(0,f.useEffect)(function(){if(!R.docId&&z){if(!W){r({id:"invalid_doc_id_error",title:"Oops! That doesn't look like a valid document url.",description:"",status:"error",position:"top",isClosable:!1,duration:null});return}J(),nd(),B(function(n){return n.docId==W?n:X(X({},n),{},{docId:W})})}},[R.docId,z,W,J,nd,j,r]),(0,f.useEffect)(function(){if("loading"!==d&&nr&&!nt&&z){if(!ne||!ne.doc||!1===ni){"loggedOut"===d&&w("/signin?redirect_to=".concat(encodeURIComponent(window.location.href))),B(function(n){return X(X({},n),{},{isUnauthorized:!0})});return}var n,e,r=o.can(v.y3$.View,ne.doc)&&o.cannot(v.y3$.Comment,ne.doc)&&o.cannot(v.y3$.Edit,ne.doc)&&o.cannot(v.y3$.Manage,ne.doc),c=null===(n=ne.doc.accessLinks)||void 0===n?void 0:null===(e=n.find(function(n){return n.token===p.v.SHARE_TOKEN}))||void 0===e?void 0:e.permission,a=c&&[v.y3$.Edit,v.y3$.Comment].includes(c),u=new URLSearchParams(window.location.search),s=u.get("following_id")&&u.get("follow_on_start");if(i&&r&&!s&&!a||i&&t){j((0,S.R8)({docEditorType:_.Z.PUBLIC_STATIC}));return}if(!i&&ne.doc.archived){P("/");return}B(function(n){return!1===n.isUnauthorized?n:X(X({},n),{},{isUnauthorized:!1})}),j((0,S.pl)({doc:ne.doc}))}},[o,ni,ne,nt,z,nr,i,t,d,w,j,P,a]),(0,f.useEffect)(function(){return function(){j((0,S.mc)())}},[j]),(0,f.useEffect)(function(){if(U&&W){var n="".concat(U.title?"".concat((0,k.l)(U.title),"-"):"").concat(W);z!==n&&(0,O.lO)({pathname:"/".concat(G,"/").concat(n),emitChange:!1})}},[U,W,z,G]),R.docId)?(0,K.jsxs)(T.r.Provider,{value:R,children:[e,(0,K.jsx)(Q,X({},N))]}):(0,K.jsx)(K.Fragment,{})};function nn(n){return(0,f.memo)(function(e){return(0,K.jsx)(J,{children:(0,K.jsx)(n,X({},e))})})}},83062:function(n,e,t){t.d(e,{m:function(){return c}});var r=t(11919);t(2784);var o=t(69930),i=t(52322),c=function(n){var e=n.children;return(0,i.jsxs)(r.k,{alignSelf:"stretch",position:"relative",height:"var(--100vh)",direction:"column",children:[(0,i.jsx)(o.Y,{}),e]})}},60912:function(n,e,t){t.d(e,{m:function(){return y}});var r=t(95235),o=t(11919),i=t(45650),c=t(84103),a=t(36895),d=t(42751),u=t(2784),s=t(44907),l=t(29999),f=t(93230),p={src:"/_next/static/media/GammaLogoGradient.43edb67f.svg",height:197,width:170},v=t(91036),h=t(60284),m=t(52322);function b(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})),t.push.apply(t,r)}return t}function g(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?b(Object(t),!0).forEach(function(e){(0,r.Z)(n,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):b(Object(t)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))})}return n}var y=function(n){var e=(0,v._i)().docId,t=(0,f.Yy)(),r=(0,l.z$)(),b=(0,u.useCallback)(function(){null==r||r.track(l.AA.MADE_WITH_GAMMA_CLICKED,{doc_id:e})},[r,e]),y=(0,s.dU)();return void 0===y||y?null:(0,m.jsx)(o.k,g(g(g({},(0,h.s2)()?{display:"flex",justifyContent:"center",m:6,position:"relative"}:{position:"fixed",right:[1,6],bottom:[1,4]}),n),{},{children:(0,m.jsx)(d.Wk,{isDark:t,children:(0,m.jsx)(i.z,{as:c.r,onClick:b,variant:"plain",target:"_blank",href:"https://gamma.app",textDecoration:"none !important",leftIcon:(0,m.jsx)(a.E,{src:p.src,h:"1em"}),size:"sm",children:"Made with Gamma"})})}))}}}]);
//# sourceMappingURL=2617-0bd27ba326ba1cde.js.map