"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4439],{78558:function(e,n,t){t.d(n,{F3:function(){return x},c8:function(){return b}});var i=t(30547);t(18759),t(10227);var r=t(478),o=t(95235),s=t(58678),a=t(2784),c=t(69262),l=function(e,n){var t=(0,s.rN)(),r=t.setIsOpen,o=t.setSteps,c=t.setMeta,l=t.setCurrentStep;return{startTour:(0,a.useCallback)(function(e){void 0!==e&&l(e),r(!0),c&&c(i.X.DOC_EDITOR),o&&o(n)},[l,r,c,o,n])}},d=t(97374),u=t(29999),p=t(2487),h=t(25180);function f(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,i)}return t}function m(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?f(Object(t),!0).forEach(function(n){(0,o.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):f(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var x=function(){var e=(0,c.ye)("aiChat"),n=(0,a.useMemo)(function(){return(0,r.aq)({aiChat:Boolean(e)})},[e]),t=(0,u.z$)(),f=l(i.X.DOC_EDITOR,n).startTour,x=(0,s.rN)().setIsOpen;(0,a.useEffect)(function(){"true"===(0,h.SJ)()[i.n]&&(0,p.u0)(n[1].selector).then(function(){f(),null==t||t.track(u.AA.DOC_EDITOR_TOUR_STARTED,{source:"queryParam"}),(0,d.lO)({query:m(m({},(0,h.SJ)()),{},(0,o.Z)({},i.n,void 0)),emitChange:!1})})},[t,f,n]),(0,a.useEffect)(function(){return function(){x(!1)}},[x])},b=function(){var e=(0,c.ye)("aiChat"),n=(0,a.useMemo)(function(){return(0,r.aq)({aiChat:Boolean(e)})},[e]);return{startTour:l(i.X.DOC_EDITOR,n).startTour}}},62636:function(e,n,t){t.d(n,{C:function(){return U}});var i=t(81333),r=t(27037),o=t(64256),s=t(68921),a=t(48079),c=t(58975),l=t(16686),d=t(29106),u=t(36178),p=t(75944),h=t(9088),f=t(30893),m=t(67887),x=t(53738),b=t(40771),j=t(91930),g=t(82904),v=t(84103),y=t(49747),w=t(49929),C=t(42751),k=t(2784),O=t(43997),I=t(24553),S=t(69262),D=t(78558),E=t(65441),P=t(28839),_=t(37581),A=t(29999),T=t(93230),z=t(39586),G=t(954),R=t(31218),N=t(52322),U=(0,k.memo)(function(e){var n=e.showShortcuts,t=e.showTourReplay,U=(0,D.c8)().startTour,L=(0,O.I0)(),M=(0,I.$gs)().isConnected,Z=(0,S.ye)("intercom"),W=(0,p.q)(),F=W.isOpen,V=W.onOpen,H=W.onClose,B=(0,z._)("hasUnreadIntercom",!1),$=(0,i.Z)(B,2),K=$[0],q=$[1],J=(0,A.z$)(),X=window.Intercom,Y=(0,k.useCallback)(function(){(0,P.pU)(),q(!1),L((0,_.YZ)({isOpen:!0}))},[L,q]),Q=(0,T.Yy)();return(0,k.useEffect)(function(){if(X){X("onHide",function(){L((0,_.YZ)({isOpen:!1}))});var e=setInterval(function(){document.querySelector("iframe.intercom-borderless-frame")&&q(!0)},1e3);return function(){X("hide"),clearInterval(e)}}},[L,X,q]),(0,N.jsx)(G.H,{children:(0,N.jsx)(C.Wk,{isDark:Q,children:(0,N.jsxs)(h.v,{children:[(0,N.jsx)(f.j,{"data-guider-highlight":"default-help-widget-activator",as:m.h,isRound:!0,position:"relative",size:"md","aria-label":"Help",icon:K?(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(x.Cd,{position:"absolute",size:2.5,bg:"red.400",top:0,right:0}),(0,N.jsx)(w.G,{icon:s.qm,className:"fa-beat-fade"})]}):(0,N.jsx)(w.G,{icon:u.Ps})}),(0,N.jsxs)(b.q,{children:[(0,N.jsxs)(j.k,{children:[(void 0===n||n)&&(0,N.jsx)(g.s,{onClick:V,icon:(0,N.jsx)(w.G,{fixedWidth:!0,icon:d.UF}),children:"Shortcuts"}),(0,N.jsx)(g.s,{as:v.r,_hover:{textDecoration:"none",shadow:"none"},href:"https://gamma.app/public/Change-Log-awopg3inl2eo3b3?mode=doc#card-7l4mxahmsc10wrp",target:"_blank",icon:(0,N.jsx)(w.G,{fixedWidth:!0,icon:l.Jy}),children:"What's new"}),(0,N.jsx)(g.s,{as:v.r,_hover:{textDecoration:"none",shadow:"none"},href:"https://help.gamma.app",target:"_blank",icon:(0,N.jsx)(w.G,{fixedWidth:!0,icon:c.MY}),children:"FAQ"}),void 0!==t&&t&&(0,N.jsx)(g.s,{as:v.r,_hover:{textDecoration:"none",shadow:"none"},onClick:function(){null==J||J.track(A.AA.DOC_EDITOR_TOUR_STARTED,{source:"help-widget"}),U(0)},icon:(0,N.jsx)(w.G,{fixedWidth:!0,icon:a.Wx}),"data-guider-highlight":"replay-intro-tour",children:"Take the editor tour"})]}),(0,N.jsx)(y.R,{}),(0,N.jsx)(j.k,{children:Z&&M?(0,N.jsx)(g.s,{icon:K?(0,N.jsxs)(x.xu,{position:"relative",children:[(0,N.jsx)(x.Cd,{position:"absolute",size:1.5,bg:"red.400",top:0,right:-1}),(0,N.jsx)(w.G,{fixedWidth:!0,icon:s.qm,className:"fa-beat-fade"})]}):(0,N.jsx)(w.G,{fixedWidth:!0,icon:o.RR}),onClick:Y,children:"Contact us"}):(0,N.jsx)(g.s,{icon:(0,N.jsx)(w.G,{fixedWidth:!0,icon:r.FU}),as:v.r,_hover:{textDecoration:"none",shadow:"none"},href:"mailto:".concat(E.p),children:"Email us"})})]}),(0,N.jsx)(R.J,{isOpen:F,onClose:H})]})})})});U.displayName="DefaultHelpWidget"},954:function(e,n,t){t.d(n,{H:function(){return h}});var i=t(95235),r=t(82269),o=t(53738),s=t(2784),a=t(60284),c=t(58835),l=t(52322),d=["children"];function u(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,i)}return t}function p(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?u(Object(t),!0).forEach(function(n){(0,i.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):u(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var h=(0,s.memo)(function(e){var n=e.children,t=(0,r.Z)(e,d);return(0,a.s2)()?null:(0,l.jsx)(o.xu,p(p({position:"fixed",bottom:c.ux,right:c.PU,zIndex:"overlay","data-print-hidden":!0},t),{},{children:n}))});h.displayName="HelpWidgetWrapper"},31218:function(e,n,t){t.d(n,{J:function(){return L},A:function(){return U}});var i=t(95235),r=t(13045),o=t(60239),s=t(29106),a=t(77525),c=t(74642),l=t(35319),d=t(36258),u=t(27912),p=t(96530),h=t(54728),f=t(46367),m=t(53738),x=t(91333),b=t(23742),j=t(8283),g=t(50390),v=t(70091),y=t(83897),w=t(89190),C=t(73848),k=t(24798),O=t(84520),I=t(95085),S=t(49929),D=t(42751),E=t(91012);t(2784);var P=t(52322),_=function(e){var n=e.prefix,t=e.support,i=e.suffix;return(0,P.jsxs)(E.x,{children:[void 0===n?"":n,(0,P.jsx)(E.x,{color:"gray.400",as:"span",children:void 0===t?"":t}),void 0===i?"":i]})},A=[{description:"Open slash menu",shortcut:"/"},{description:"Open/close cards",shortcut:"Mod+Shift+O"},{description:"Split card",shortcut:"***"},{description:"Print/export PDF",shortcut:"Mod+P"},{description:"Enter present mode",shortcut:"Mod+Enter"},{description:"Jump to",shortcut:"Mod+K"},{description:"Mention a person",shortcut:(0,P.jsx)(_,{prefix:"@",support:"name"})},{description:"Link to a card",shortcut:(0,P.jsx)(_,{prefix:"@",support:"cardTitle"})}],T=[{description:"Title",shortcut:"/title"},{description:"Heading 1",shortcut:["#","Mod+Alt+1"]},{description:"Heading 2",shortcut:["##","Mod+Alt+2"]},{description:"Heading 3",shortcut:["###","Mod+Alt+3"]},{description:"Heading 4",shortcut:["####","Mod+Alt+4"]},{description:"Link",shortcut:"Mod+K"},{description:"Emoji \uD83D\uDE0D",shortcut:(0,P.jsx)(_,{prefix:":",support:"heart_eyes",suffix:":"})},{description:"Bold",shortcut:[(0,P.jsx)(_,{prefix:"*",support:"bold",suffix:"*"},"0"),"Mod+B"]},{description:"Italic",shortcut:[(0,P.jsx)(_,{prefix:"_",support:"italic",suffix:"_"},"0"),"Mod+I"]},{description:"Underline",shortcut:"Mod+U"},{description:"Strikethrough",shortcut:"Mod+Shift+X"},{description:"Left align",shortcut:"Mod+Shift+L"},{description:"Center align",shortcut:"Mod+Shift+E"},{description:"Right align",shortcut:"Mod+Shift+R"},{description:"Code snippet",shortcut:[(0,P.jsx)(_,{prefix:"`",support:"code",suffix:"`"},"0"),"Mod+E"]},{description:"Math equation",shortcut:[(0,P.jsx)(_,{prefix:"$",support:"x^2",suffix:"$ "},"0"),"$$ "]},{description:"Highlight text",shortcut:"Mod+Shift+H"},{description:"Numbered list",shortcut:["1. ","Mod+/","Mod+Shift+7"]},{description:"Bulleted list",shortcut:["- ","Mod+.","Mod+Shift+8"]},{description:"Todo list",shortcut:["[] ","Mod+,","Mod+Shift+9"]},{description:"Footnote",shortcut:[(0,P.jsx)(_,{prefix:"^",support:"note",suffix:"^"},"0"),"Mod+Alt+F"]}],z=[{description:"Previous/next card",shortcut:["←","→"]},{description:"Scroll up/down card",shortcut:["↑","↓"]},{description:"Open/close card",shortcut:"Enter"},{description:"Exit present mode",shortcut:"Esc"},{description:"Open/close all cards",shortcut:"Mod+Shift+O"},{description:"Spotlight on/off",shortcut:"S"},{description:"Restart presentation",shortcut:"R"},{description:"Double click to edit",shortcut:(0,P.jsx)(m.xu,{p:0,children:(0,P.jsxs)("svg",{className:"coachbarCursor",height:"1em",viewBox:"0 0 298 380",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,P.jsx)("path",{className:"cursorBlinkEffect",d:"M151.8 0.60199C145.612 0.60199 140.601 5.61759 140.601 11.801V79C140.601 85.1875 145.617 90.199 151.8 90.199C157.987 90.199 162.999 85.1834 162.999 79V11.801C162.999 5.61349 157.983 0.60199 151.8 0.60199ZM52.749 41.551C49.8818 41.551 47.0615 42.6877 44.874 44.8752C40.5029 49.2502 40.5029 56.4262 44.874 60.8012L84.425 100.352C88.8 104.727 95.976 104.723 100.351 100.352C104.726 95.9772 104.722 88.8012 100.351 84.4262L60.8 44.8752C58.6125 42.6877 55.6162 41.551 52.749 41.551ZM250.849 41.551C247.982 41.551 244.986 42.6877 242.798 44.8752L203.247 84.4262C198.876 88.8012 198.872 95.9772 203.247 100.352C207.622 104.723 214.798 104.727 219.173 100.352L258.724 60.8012C263.095 56.4262 263.095 49.2502 258.724 44.8752C256.537 42.6877 253.716 41.551 250.849 41.551ZM11.789 140.602C5.6015 140.602 0.589996 145.618 0.589996 151.801C0.589996 157.988 5.6056 163 11.789 163H78.988C85.1755 163 90.187 157.984 90.187 151.801C90.187 145.613 85.1714 140.602 78.988 140.602H11.789ZM92.465 199.926C89.5978 199.926 86.6017 201.063 84.4142 203.25L44.8632 242.801C40.4921 247.176 40.4921 254.352 44.8632 258.727C49.2382 263.102 56.4142 263.102 60.7892 258.727L100.34 219.176C104.711 214.801 104.715 207.625 100.34 203.25C98.1527 201.063 95.3322 199.926 92.465 199.926Z",fill:"black"}),(0,P.jsx)("path",{d:"M289.317 291.063H237.601L264.819 357.2C266.715 361.785 264.548 366.926 260.215 368.872L236.247 379.292C231.779 381.237 226.768 379.014 224.873 374.568L199.009 311.766L156.761 355.116C151.13 360.892 142 356.439 142 348.864V139.899C142 131.923 151.711 128.035 156.76 133.647L295.411 275.918C301.003 281.355 296.877 291.063 289.317 291.063V291.063Z",fill:"black"})]})},"cursor")}];function G(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,i)}return t}function R(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?G(Object(t),!0).forEach(function(n){(0,i.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):G(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var N={borderColor:"gray.100",py:2,px:2},U=function(e){var n=e.list;return(0,P.jsx)(a.x,{w:"100%",children:(0,P.jsx)(c.i,{variant:"simple",children:(0,P.jsx)(l.p,{children:n.map(function(e,n){var t=e.shortcut,i=e.description;return(0,P.jsxs)(d.Tr,{children:[(0,P.jsx)(u.Td,R(R({w:"60%"},N),{},{children:i})),(0,P.jsx)(u.Td,R(R({w:"40%"},N),{},{children:Array.isArray(t)?t.map(function(e,n){return(0,P.jsx)(p.T,{display:"inline-block",px:2,py:1,mr:1,children:"string"==typeof e?(0,D.cE)(e):e},n)}):"string"==typeof t?(0,P.jsx)(p.T,{display:"inline-block",px:2,py:1,children:(0,D.cE)(t)}):(0,P.jsx)(p.T,{display:"inline-block",px:2,py:1,children:t})}))]},n)})})})})},L=function(e){var n=e.isOpen,t=e.onClose;return(0,P.jsxs)(h.J,{returnFocusOnClose:!1,closeOnBlur:!1,placement:"top",isOpen:n,onClose:t,children:[(0,P.jsx)(f.t,{children:(0,P.jsx)(m.xu,{position:"fixed",bottom:0,right:0})}),(0,P.jsxs)(x.y,{zIndex:"menu",h:"80vh",w:"400px",flex:1,position:"relative",children:[(0,P.jsxs)(b.Y,{border:"0 none",mb:2,position:"sticky",bgColor:"white",children:[(0,P.jsxs)(j.U,{spacing:2,children:[(0,P.jsx)(S.G,{icon:s.UF}),(0,P.jsx)(g.X,{size:"md",children:"Shortcuts"})]}),(0,P.jsx)(v.u,{})]}),(0,P.jsx)(y.b,{overflowY:"auto",children:(0,P.jsxs)(w.m,{variant:"soft-rounded",size:"sm",isFitted:!0,children:[(0,P.jsxs)(C.t,{mb:6,children:[(0,P.jsxs)(k.O,{children:[(0,P.jsx)(m.xu,{mr:2,children:(0,P.jsx)(S.G,{icon:o.Tz})}),"Doc mode"]}),(0,P.jsxs)(k.O,{children:[(0,P.jsx)(m.xu,{mr:2,children:(0,P.jsx)(S.G,{icon:r.r0})}),"Present mode"]})]}),(0,P.jsxs)(O.n,{children:[(0,P.jsxs)(I.x,{p:0,pb:1,mt:4,children:[(0,P.jsx)(U,{list:A}),(0,P.jsx)(D.NZ,{pt:4,pb:4,children:"Text & formatting"}),(0,P.jsx)(U,{list:T})]}),(0,P.jsx)(I.x,{p:0,pb:1,mt:4,children:(0,P.jsx)(U,{list:z})})]})]})})]})]})}},58835:function(e,n,t){t.d(n,{PU:function(){return i},Ro:function(){return o},ux:function(){return r}});var i=4,r=4,o={mr:4,width:"auto",outline:"0",shadow:"lg",_focus:{outline:"none"}}},55090:function(e,n,t){t.d(n,{C:function(){return f}});var i=t(20010),r=t(56915),o=t(48273),s=t(92619),a=t(64827),c=t(2167),l=t(91012),d=t(80353),u=t(71354),p=t(45650),h=t(52322),f=function(e){var n=e.invitationCount,t=e.isOpen,f=e.onClose,m=e.onSendInvitationsClick,x=e.onDiscardClick,b=1===n?"invitation":"invitations";return t?(0,h.jsxs)(i.u_,{returnFocusOnClose:!1,onClose:f,closeOnOverlayClick:!0,isOpen:!0,isCentered:!0,children:[(0,h.jsx)(r.Z,{}),(0,h.jsxs)(o.h,{children:[(0,h.jsxs)(s.x,{children:["Unsent ",b]}),(0,h.jsx)(a.o,{}),(0,h.jsx)(c.f,{children:(0,h.jsxs)(l.x,{children:["You have ",n," unsent"," ",b,". Do you want to discard or send ",1===n?"it":"them","?"]})}),(0,h.jsx)(d.m,{children:(0,h.jsxs)(u.K,{spacing:2,direction:"row",align:"center",children:[(0,h.jsx)(p.z,{onClick:x,children:"Discard"}),(0,h.jsxs)(p.z,{variant:"solid",onClick:m,children:["Send ",b]})]})})]})]}):null}},2760:function(e,n,t){t.d(n,{L:function(){return j}});var i=t(95235),r=t(89177),o=t(27037),s=t(11919),a=t(13061),c=t(8283),l=t(12221),d=t(91012),u=t(53738),p=t(49929),h=t(42751),f=t(7985);t(20435);var m=t(52322);function x(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,i)}return t}function b(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?x(Object(t),!0).forEach(function(n){(0,i.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):x(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var j=function(e){var n=e.selectedCollaborator,t=e.idx,i=e.handleRemoveClick,x=n&&(0,f.G)((null==n?void 0:n.email)||""),j=0===t?170:300;return(0,m.jsx)(s.k,{width:0===t?"calc(100% - 100px)":"",className:"searchbartag","data-testid":"searchbartag-collaborator-".concat(n.email),children:(0,m.jsxs)(a.Vp,b(b({size:"md",minW:110},x?{}:{colorScheme:"red",bg:"red",color:"white"}),{},{children:["id"in n?(0,m.jsx)(h.kH,{label:n.email,"aria-label":n.email,children:(0,m.jsxs)(c.U,{children:[(0,m.jsx)(l.q,{size:"2xs",m:0,name:n.displayName,src:n.profileImageUrl}),(0,m.jsx)(d.x,{textTransform:"capitalize",wordBreak:"break-word",noOfLines:1,maxW:j,lineHeight:"1.5",children:n.displayName})]})}):(0,m.jsx)(h.kH,{label:x?n.email:"Invalid email address","aria-label":n.email,children:(0,m.jsxs)(c.U,{flex:1,children:[(0,m.jsx)(u.Cd,{bg:x?"trueblue.100":"none",size:6,children:(0,m.jsx)(p.G,{icon:x?o.FU:r.WV})}),(0,m.jsx)(d.x,{wordBreak:"break-all",display:"block",height:"100%",width:"100%",noOfLines:1,maxW:j,lineHeight:"1.5",children:n.email})]})}),(0,m.jsx)(a.SD,{onClick:i})]}))},"id"in n?n.id:n.email)}},99897:function(e,n,t){t.d(n,{y:function(){return o}});var i=t(75944),r=t(2784),o=function(){var e=(0,i.q)({id:"sharePanelDisclosure"}),n=e.isOpen,t=e.onOpen,o=e.onClose,s=(0,r.useState)("invite");return{isSharePanelOpen:n,onSharePanelOpen:t,onSharePanelClose:o,view:s[0],setView:s[1]}}},50897:function(e,n,t){t.d(n,{Nj:function(){return nF},t9:function(){return nV},o$:function(){return nX},aA:function(){return td},WQ:function(){return tj}});var i,r,o,s,a,c=t(92743),l=t(24799),d=t(84558),u=t(54906),p=t(70110),h=t(8649),f=t(20010),m=t(56915),x=t(48273),b=t(92619),j=t(53738),g=t(64827),v=t(40110),y=t(2167),w=t(71354),C=t(81927),k=t(85982),O=t(45650),I=t(80353),S=t(11919),D=t(49929),E=t(42751),P=t(2784),_=t(24553),A=t(69262),T=t(8276),z=t(20406),G=t(81333),R=t(28526),N=t.n(R),U=t(55479),L=t(91012),M=t(70513),Z=t(28645),W=t(4036),F=t(93319),V=t(8283),H=t(21891),B=t(92936),$=t(27777),K=t(12741),q=t(48943),J=t.n(q),X=t(39594),Y="production"===X.v.APPLICATION_ENVIRONMENT?"sites.gamma.app":"sites.staging.gamma.app",Q="production"===X.v.APPLICATION_ENVIRONMENT?["3.136.232.26","3.137.108.170"]:["3.131.191.219"],ee=function(e){return null==e?void 0:e.match(/[a-zA-Z0-9][a-zA-Z0-9-]{0,61}[a-zA-Z0-9](?:\.[a-zA-Z]{2,})+$/)},en=(i=(0,z.Z)(N().mark(function e(n){var t,i,r;return N().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.hostname,r=void 0===(i=n.times)?20:i,e.abrupt("return",new Promise(function(e,n){var i=function(){var o=(0,z.Z)(N().mark(function o(){var s,a,c;return N().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return r--,o.next=3,fetch("https://cloudflare-dns.com/dns-query?name=".concat(t),{headers:{accept:"application/dns-json"}});case 3:return a=o.sent,o.next=6,a.json();case 6:c=o.sent,console.log("[verifyDomain] Verifying DNS for ".concat(t,":"),c),(null==c?void 0:null===(s=c.Answer)||void 0===s?void 0:s.some(function(e){return 1===e.type&&Q.includes(e.data)||5===e.type&&e.data===Y+"."}))?e(!0):r>0?setTimeout(i,1e3):n();case 10:case"end":return o.stop()}},o)}));return function(){return o.apply(this,arguments)}}();i()}));case 3:case"end":return e.stop()}},e)})),function(e){return i.apply(this,arguments)}),et=function(e){var n=e.startsWith("http")?e:"https://".concat(e),t=J()(n),i=t.domain,r=t.sub,o=""===r||"www"===r,s=Q.map(function(e){return{type:"A",host:"@",value:e,ttl:300}}),a=o?[].concat((0,K.Z)(s),[{type:"CNAME",host:"www",value:Y,ttl:300}]):[{type:"CNAME",host:r,value:Y,ttl:300}];return{domain:i,subdomain:r||"www",dnsRecords:a,isRootDomain:o}},ei=t(52322),er=function(e){var n=e.onCreate,t=e.isCreating,i=(0,P.useState)(""),r=i[0],o=i[1];return(0,ei.jsxs)(ei.Fragment,{children:[(0,ei.jsxs)(w.K,{spacing:1,mt:4,children:[(0,ei.jsxs)(L.x,{children:["Site with custom domain ",(0,ei.jsx)(W.C,{colorScheme:"green",children:"BETA"})]}),(0,ei.jsxs)(L.x,{color:"gray.500",fontSize:"xs",children:["Free during beta"," ",(0,ei.jsx)(E.kH,{label:"We'll be transitioning to a paid model in the future. We'll notify you before we do.",placement:"top",children:(0,ei.jsx)(D.G,{icon:Z.sq})}),". Publish to an existing domain you own"," "]})]}),(0,ei.jsx)(F.L,{}),(0,ei.jsxs)(V.U,{children:[(0,ei.jsxs)(H.B,{children:[(0,ei.jsx)(B.Ui,{color:"gray.600",children:"https://"}),(0,ei.jsx)($.I,{value:r,onChange:function(e){return o(e.currentTarget.value)},placeholder:"yourdomain.com",onKeyDown:function(e){ee(r)&&"Enter"===e.key&&n(r)}})]}),(0,ei.jsx)(w.K,{children:(0,ei.jsx)(O.z,{isDisabled:!ee(r),isLoading:void 0!==t&&t,variant:"plain",onClick:function(){return n(r)},children:"Connect"})})]})]})},eo=t(60697),es=t(26673),ea=t(16431),ec=t(31145),el=t(75944),ed=t(76360),eu=t(91391),ep=t(75342),eh=t(84103),ef=t(420),em=t(67887),ex=t(74642),eb=t(73851),ej=t(36258),eg=t(19875),ev=t(35319),ey=t(27912),ew=t(72360),eC=t(48322),ek=t(35837),eO=t(58499),eI=t(49201),eS=(r=(0,z.Z)(N().mark(function e(n){var t,i,r;return N().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/domains/connectToken").then(function(e){return e.json()}).then(function(e){if(!e.auth_token)throw Error("No auth token returned");return e.auth_token});case 2:if(t=e.sent,window.entri){e.next=5;break}throw Error("Entri not found");case 5:return console.log("[launchEntri] Launching Entri with config",r={applicationId:"gamma",token:t,prefilledDomain:(i=et(n)).domain,dnsRecords:i.dnsRecords}),window.entri.showEntri(r),e.abrupt("return",new Promise(function(e,n){var t=function t(i){console.log("onEntriClose: event",i),window.removeEventListener("onEntriClose",t),i.detail.success?e(i.detail):n(i.detail)};window.addEventListener("onEntriClose",t,!1)}));case 10:case"end":return e.stop()}},e)})),function(e){return r.apply(this,arguments)}),eD=function(e){var n=e.domain,t=e.onConfirmSetup,i=e.openOnMount,r=void 0!==i&&i,o=e.path,s=(0,el.q)(),a=s.isOpen,c=s.onOpen,l=(0,P.useState)(!1),d=l[0],u=l[1],p=(0,P.useState)(!1),h=p[0],f=p[1],m=(0,P.useState)(!1),x=m[0],b=m[1],g=(0,P.useState)(!1),y=g[0],C=g[1],k=(0,P.useState)(n.verified),I=k[0],S=k[1],_=(0,U.p)(),A=(0,P.useCallback)((0,z.Z)(N().mark(function e(){var t,i=arguments;return N().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:20,C(!0),e.abrupt("return",en({hostname:n.name,times:t}).then(function(){S(!0)}).catch(function(){console.warn("Failed to verify domain")}).finally(function(){C(!1)}));case 3:case"end":return e.stop()}},e)})),[n]),T=(0,P.useState)("initial"),G=T[0],R=T[1];(0,P.useEffect)(function(){setTimeout(function(){c(),r&&u(!0)}),A(1).then(function(){t()})},[]),(0,eI.Gq)("https://cdn.goentri.com/entri.js",function(){f(!0)});var M="".concat(n.name).concat(o&&"/"!==o?"/"+o:""),Z=et((null==n?void 0:n.name)||""),H=Z.dnsRecords,B=Z.isRootDomain,$=Z.subdomain;return(0,ei.jsx)(ed.Z,{size:"sm",variant:"filled",children:(0,ei.jsx)(eu.U,{in:a,children:(0,ei.jsxs)(ep.e,{cursor:a?void 0:"pointer",onClick:function(){d||u(!0)},children:[(0,ei.jsxs)(V.U,{p:1,children:[(0,ei.jsx)(V.U,{color:"trueblue.500",children:(0,ei.jsx)(eh.r,{flex:1,href:M,target:"_blank",children:(0,ei.jsxs)(j.xu,{children:[M,"\xa0",(0,ei.jsx)(D.G,{icon:ec.faArrowUpRightFromSquare,size:"xs"})]})})}),(0,ei.jsx)(F.L,{}),n.verified||I?(0,ei.jsx)(W.C,{colorScheme:"green",children:"Verified"}):(0,ei.jsx)(E.kH,{label:y?"Waiting for DNS changes to propagate. This is usually quick but can take up to 24 hours.":"Click to verify domain",placement:"top",children:(0,ei.jsxs)(W.C,{display:"flex",justifyContent:"center",colorScheme:"yellow",cursor:"pointer",onClick:function(){return A()},children:[y?"Verifying":"Unverified",y&&(0,ei.jsx)(ef.$,{size:"xs",ml:1,alignSelf:"center"})]})}),(0,ei.jsx)(E.kH,{placement:"top",label:d?"Hide setup":"Show setup",children:d?(0,ei.jsx)(em.h,{"aria-label":"Hide setup",variant:"ghost",onClick:function(){return u(!1)},icon:(0,ei.jsx)(D.G,{icon:ea.mT})}):(0,ei.jsx)(em.h,{"aria-label":"Show setup",variant:"ghost",onClick:function(){return u(!0)},icon:(0,ei.jsx)(D.G,{icon:es.pt})})})]}),(0,ei.jsx)(eu.U,{in:d,children:(0,ei.jsx)(ed.Z,{mt:2,children:(0,ei.jsxs)(ep.e,{fontSize:"sm",children:["initial"===G&&(0,ei.jsxs)(w.K,{spacing:4,maxW:"64",py:4,mx:"auto",children:[(0,ei.jsxs)(w.K,{spacing:2,children:[(0,ei.jsxs)(w.K,{spacing:1,children:[(0,ei.jsx)(L.x,{textAlign:"center",fontSize:"2xl",children:(0,ei.jsx)(D.G,{icon:eo.g4,size:"2x"})}),(0,ei.jsx)(L.x,{fontWeight:"semibold",fontSize:"lg",textAlign:"center",children:"Set up your domain"})]}),(0,ei.jsx)(L.x,{children:"How would you like to connect your custom domain to Gamma?"})]}),(0,ei.jsx)(O.z,{size:"md",variant:"solid",isDisabled:!h,isLoading:x,onClick:function(){n.name&&(b(!0),eS(n.name).then(function(e){console.log("[ENTRI] Successfully setup domain",e),_({title:"Your domain was successfully configured!",description:"It may take up to 24 hours for your website to appear",status:"success",duration:3e3,isClosable:!0,position:"top"}),u(!1),t(),en({hostname:n.name})}).catch(function(e){_({title:"Error setting up domain",description:e.message,status:"error",duration:3e3,isClosable:!0,position:"top"})}).finally(function(){b(!1)}))},children:"Automatic setup"}),(0,ei.jsxs)(V.U,{children:[(0,ei.jsx)(v.i,{}),(0,ei.jsx)(L.x,{color:"gray.600",children:"or"}),(0,ei.jsx)(v.i,{})]}),(0,ei.jsx)(O.z,{size:"md",variant:"plain",onClick:function(){R("manual")},children:"Manual setup"})]}),"manual"===G&&(0,ei.jsxs)(w.K,{spacing:6,children:[(0,ei.jsx)(L.x,{fontWeight:"semibold",fontSize:"lg",children:"Manually connect your domain"}),(0,ei.jsxs)(ex.i,{variant:"simple",children:[(0,ei.jsx)(eb.h,{children:(0,ei.jsxs)(ej.Tr,{children:[(0,ei.jsx)(eg.Th,{children:"Name"}),(0,ei.jsx)(eg.Th,{children:"Type"}),(0,ei.jsx)(eg.Th,{isNumeric:!0,children:"Data"})]})}),(0,ei.jsx)(ev.p,{children:(H||[]).map(function(e){return(0,ei.jsxs)(ej.Tr,{children:[(0,ei.jsx)(ey.Td,{fontFamily:"mono",children:e.host}),(0,ei.jsx)(ey.Td,{fontFamily:"mono",children:e.type}),(0,ei.jsx)(ey.Td,{isNumeric:!0,fontFamily:"mono",children:e.value})]},e.value)})})]}),(0,ei.jsxs)(ew.b,{status:"info",colorScheme:"orange",children:[(0,ei.jsx)(eC.z,{}),(0,ei.jsxs)(w.K,{children:[(0,ei.jsx)(L.x,{fontWeight:"bold",fontSize:"md",children:"Instructions"}),(0,ei.jsxs)(ek.GS,{pl:"4",spacing:"2",children:[B?1===Q.length?(0,ei.jsxs)(ek.HC,{children:["Add an ",(0,ei.jsx)(eO.E,{colorScheme:"gray",children:"A"})," record pointing to",(0,ei.jsx)(eO.E,{colorScheme:"gray",children:Q[0]}),". If you have any existing"," ",(0,ei.jsx)(eO.E,{colorScheme:"gray",children:"A"})," records, remove them."]}):(0,ei.jsxs)(ek.HC,{children:["Add ",(0,ei.jsx)(eO.E,{colorScheme:"gray",children:"A"})," records pointing to"," ",(0,ei.jsx)(V.U,{display:"inline",divider:(0,ei.jsx)("span",{children:", "}),children:Q.slice(0,-1).map(function(e){return(0,ei.jsx)(eO.E,{colorScheme:"gray",children:e},e)})}),"and",(0,ei.jsx)(eO.E,{colorScheme:"gray",children:Q.slice(-1)[0]}),". If you have any existing"," ",(0,ei.jsx)(eO.E,{colorScheme:"gray",children:"A"})," records, remove them."]}):null,(0,ei.jsxs)(ek.HC,{children:["Add a ",(0,ei.jsx)(eO.E,{colorScheme:"gray",children:"CNAME"})," record pointing ",(0,ei.jsx)(eO.E,{colorScheme:"gray",children:$})," ","to",(0,ei.jsx)(eO.E,{colorScheme:"gray",children:Y}),"."]})]})]})]}),(0,ei.jsx)(V.U,{children:(0,ei.jsx)(O.z,{onClick:function(){R("initial"),t(),en({hostname:n.name}),u(!1),C(!0)},size:"md",mx:"auto",children:"Finish and confirm"})})]})]})})})]})})})},eE=t(16019),eP=t(2046),e_=t(56241),eA=function(e){var n=e.isExpanded,t=e.setIsExpanded,i=e.path,r=e.handlePathUpdate,o=e.isUpdatingRoute,s=(0,P.useState)(i),a=s[0],c=s[1];return(0,eE.r)(function(){c(i)},[i]),(0,ei.jsxs)(ed.Z,{variant:"filled",children:[(0,ei.jsxs)(V.U,{p:2,mr:2,onClick:function(){n||t(!0)},children:[(0,ei.jsx)(L.x,{pl:2,children:"URL path"}),(0,ei.jsx)(F.L,{}),i&&(0,ei.jsx)(L.x,{fontSize:"sm",fontFamily:"mono",children:"/".concat(i)}),(0,ei.jsx)(em.h,{"aria-label":"Expand collapse path editor",variant:"ghost",icon:n?(0,ei.jsx)(D.G,{icon:ea.mT}):(0,ei.jsx)(D.G,{icon:es.pt}),onClick:function(){t(!n)}})]}),(0,ei.jsx)(eu.U,{in:n,animateOpacity:!0,children:(0,ei.jsx)(ep.e,{pt:0,children:(0,ei.jsx)(w.K,{spacing:2,children:(0,ei.jsx)(V.U,{spacing:1,children:(0,ei.jsxs)(eP.NI,{as:"fieldset",children:[(0,ei.jsxs)(V.U,{children:[(0,ei.jsxs)(H.B,{children:[(0,ei.jsx)(B.Ui,{children:"/"}),(0,ei.jsx)($.I,{bg:"white",flex:2,value:a,onChange:function(e){c(e.currentTarget.value.replace(" ","-").replace(/\//,"").toLocaleLowerCase())},onKeyDown:function(e){"Enter"===e.key&&(r(a),e.currentTarget.blur())}})]}),i!==a&&(0,ei.jsx)(O.z,{variant:"solid",onClick:function(){return r(a)},isLoading:o,children:"Update"})]}),(0,ei.jsx)(eP.Q6,{children:(0,ei.jsxs)(w.K,{spacing:"4",children:[(0,ei.jsxs)(w.K,{spacing:"1",children:[(0,ei.jsx)(L.x,{children:'eg. "contact" or "about-me"'}),(0,ei.jsx)(L.x,{children:"Leave blank if you want this to be the homepage"})]}),(0,ei.jsxs)(ew.b,{colorScheme:"gray",bg:"blackAlpha.100",children:[(0,ei.jsx)(eC.z,{}),(0,ei.jsxs)(w.K,{children:[(0,ei.jsx)(L.x,{fontWeight:"bold",fontSize:"md",children:"Beta limitations:"}),(0,ei.jsxs)(ek.QI,{pl:"4",spacing:"1",children:[(0,ei.jsxs)(ek.HC,{children:["Gamma does not have a navigation bar yet"," ",(0,ei.jsx)(e_.u,{label:"We're working on it \uD83D\uDE42",placement:"top",children:(0,ei.jsx)(D.G,{icon:Z.sq})})]}),(0,ei.jsx)(ek.HC,{children:"To create multi-page websites, publish each page to a unique path on the same domain"}),(0,ei.jsx)(ek.HC,{children:"Slugs and page links won't redirect automatically if you edit them"})]})]})]})]})})]})})})})})]})},eT=t(19034),ez=t.n(eT),eG=function(e){var n=e.heading,t=e.subheading,i=e.icon,r=e.children;return(0,ei.jsxs)(S.k,{gap:4,alignItems:"center",children:[(0,ei.jsx)(S.k,{h:"8",w:"8",bg:"gray.200",borderRadius:"full",justifyContent:"center",alignItems:"center",color:"gray.800",children:(0,ei.jsx)(D.G,{icon:i})}),(0,ei.jsxs)(w.K,{spacing:0,children:[n,t]}),(0,ei.jsx)(F.L,{}),r]})},eR=function(e){var n,t=e.title,i=e.site,r=e.isLoading,o=e.publishedTime,s=e.enabled,a=e.onPublishClick,c=e.onUnpublishClick,l=null==i?void 0:null===(n=i.currentDeployment)||void 0===n?void 0:n.deploymentTime,u=Boolean(o)&&Boolean(l),p=(0,P.useMemo)(function(){var e=ez()(o);return{fromNow:e.fromNow(),calendar:e.format("LLLL")}},[o]);return(0,ei.jsx)(eG,{heading:(0,ei.jsxs)(V.U,{children:[(0,ei.jsx)(L.x,{children:void 0===t?"":t}),u&&(0,ei.jsx)(W.C,{colorScheme:"green",children:"Live"})]}),subheading:u?(0,ei.jsxs)(V.U,{spacing:1.5,children:[(0,ei.jsxs)(L.x,{children:["Last published"," ",(0,ei.jsx)(E.kH,{label:p.calendar,placement:"top",children:(0,ei.jsx)(L.x,{as:"span",cursor:"pointer",style:{textDecoration:"underline"},children:p.fromNow})}),"."]}),(0,ei.jsx)(eh.r,{onClick:c,children:"Unpublish"})]}):(0,ei.jsx)(L.x,{fontSize:"xs",color:"gray.500",children:"Not published"}),icon:d.Rk,children:(0,ei.jsx)(E.kH,{label:s?void 0:"Configure a domain below to enable publishing",shouldWrapChildren:!0,placement:"top",children:(0,ei.jsx)(O.z,{variant:"solid",isDisabled:!s,isLoading:void 0!==r&&r,loadingText:"Publishing...",onClick:a,children:"Publish"})})})},eN=function(e){var n,t,i,r,o,s=e.doc,a=(0,U.p)(),c=s.id,l=null===(i=s.organization)||void 0===i?void 0:i.id,d=(0,M.bBo)({variables:{workspaceId:l},skip:!l}).data,u=Boolean(s)&&Boolean(d),p=(0,P.useRef)(!1),h=null===(r=s.sites)||void 0===r?void 0:r[0],f=null==h?void 0:null===(o=h.routes)||void 0===o?void 0:o.find(function(e){return e.docId===c}),m=(null==f?void 0:f.path)==="/"?"":null==f?void 0:f.path,x=(null==d?void 0:d.sites)||[],b=x[0],j=h||b,g=(0,M.V$$)(),v=(0,G.Z)(g,2),y=v[0],C=v[1].loading,k=(0,M.sR8)(),O=(0,G.Z)(k,2),I=O[0],S=O[1].loading,D=(0,M.odt)(),_=(0,G.Z)(D,2),A=_[0],T=_[1].loading,R=(0,M.sIg)(),Z=(0,G.Z)(R,2),W=Z[0],F=Z[1].loading,V=(0,M.L24)(),H=(0,G.Z)(V,2),B=H[0],$=H[1].loading,K=(0,P.useState)(!1),q=K[0],J=K[1],X=(0,P.useState)(!1),Y=X[0],Q=X[1],ee=Boolean(Y);(0,P.useEffect)(function(){u&&j&&Q(!0)},[u,j]);var en=(0,P.useCallback)((n=(0,z.Z)(N().mark(function e(n){return N().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:y({variables:{input:{workspaceId:l,name:n,domains:[{name:n}],routes:[{path:"/",docId:c}]}},refetchQueries:["GetSites","GetDoc"]}).then(function(e){console.log("CREATED SITE",e.data),p.current=!0}).catch(function(e){console.error("Error creating site:",e.message)});case 1:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)}),[y,l,c]),et=(0,P.useCallback)((t=(0,z.Z)(N().mark(function e(n){var t,i,r;return N().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=null==j?void 0:j.id,i=""===n?"/":n,!(!t||!c)){e.next=4;break}return e.abrupt("return");case 4:return r=j.routes.filter(function(e){return e.docId===c}).map(function(e){return{path:e.path,docId:null}}).concat({path:i,docId:c}),e.next=7,A({variables:{input:{siteId:t,routes:r}},refetchQueries:["GetSites","GetDoc"]});case 7:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)}),[c,j,A]),eo=(0,P.useCallback)((0,z.Z)(N().mark(function e(){return N().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!h||!c)){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,W({variables:{id:c}});case 4:return e.abrupt("return",I({variables:{siteId:null==h?void 0:h.id}}).then(function(){a({description:"".concat((null==h?void 0:h.name)||"Page"," was successfully deployed"),status:"success",position:"top",duration:5e3,isClosable:!0})}).catch(function(e){console.error("Error deploying site:",e.message)}));case 5:case"end":return e.stop()}},e)})),[W,I,c,h,a]),es=(0,P.useCallback)((0,z.Z)(N().mark(function e(){var n,t;return N().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!(n=null==j?void 0:j.id)||!c)){e.next=3;break}return e.abrupt("return");case 3:return t=j.routes.filter(function(e){return e.docId===c}).map(function(e){return{path:e.path,docId:null}}),e.next=6,B({variables:{id:c}});case 6:return e.next=8,A({variables:{input:{siteId:n,routes:t}},refetchQueries:["GetSites","GetDoc"]});case 8:return e.abrupt("return",I({variables:{siteId:j.id}}).then(function(){a({description:"".concat((null==j?void 0:j.name)||"Page"," was successfully deployed"),status:"success",position:"top",duration:5e3,isClosable:!0})}).catch(function(e){console.error("Error deploying site:",e.message)}));case 9:case"end":return e.stop()}},e)})),[j,c,B,A,I,a]);return(console.log("DOCID",c),console.log("DOCSITE",h),console.log("DOCROUTE",f),console.log("DOCPATH",m),console.log("SITETOUSE",j),console.log("SITES",x),u)?(0,ei.jsxs)(w.K,{spacing:4,py:4,children:[(0,ei.jsxs)(L.x,{color:"gray.700",children:["Publish your ",E._u," as a static website you can connect to your domain"]}),(0,ei.jsx)(eR,{title:null==s?void 0:s.title,isLoading:F||S||$,publishedTime:null==s?void 0:s.publishedTime,site:h,enabled:ee,onPublishClick:eo,onUnpublishClick:es}),j?(0,ei.jsx)(eD,{domain:j.domains[0],openOnMount:p.current,path:m,onConfirmSetup:function(){return Q(!0)}}):(0,ei.jsx)(er,{onCreate:en,isCreating:C}),j&&(0,ei.jsx)(eA,{isExpanded:q,setIsExpanded:J,path:m,handlePathUpdate:et,isUpdatingRoute:T})]}):null},eU=t(33660),eL=t(18992),eM=t(59637),eZ=t(94659),eW=t(12067),eF=t(75652),eV=t.n(eF),eH=t(22087),eB=t(29999),e$=t(66564),eK=(o=(0,z.Z)(N().mark(function e(n,t,i){var r;return N().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r="".concat(X.v.API_HOST||"","/export/docs/").concat(n,"/").concat(i),e.abrupt("return",fetch(r,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","share-token":X.v.SHARE_TOKEN||""},body:JSON.stringify({docContent:t})}));case 2:case"end":return e.stop()}},e)})),function(e,n,t){return o.apply(this,arguments)}),eq=function(e,n,t){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"pdf",r=(0,U.p)(),o=(0,P.useRef)(null),s=(0,eB.z$)(),a=(0,P.useState)(!1),c=a[0],l=a[1],d=(0,P.useCallback)(function(){o.current=r({id:"export-toast-".concat(e.id,"-").concat(i),isClosable:!1,position:"top",duration:null,status:"loading",variant:"light",title:"Generating ".concat(i.toUpperCase(),"...")})},[null==e?void 0:e.id,r,i]),u=(0,P.useCallback)(function(){o.current&&r.update(o.current,{status:"loading",variant:"light",title:"Generating ".concat(i.toUpperCase(),"..."),description:"This is taking a while. You can keep waiting, or close this and we'll email it to you.",isClosable:!0})},[r,i]),p=(0,P.useCallback)(function(){o.current&&r.update(o.current,{title:"Error exporting file.",status:"error",duration:null,isClosable:!0})},[r]),h=(0,P.useCallback)(function(e){o.current&&r.update(o.current,{status:"success",title:"Your ".concat(i.toUpperCase()," is ready"),description:(0,ei.jsxs)(L.x,{children:["A download should start automatically. If not,"," ",(0,ei.jsx)(eh.r,{textDecoration:"underline",target:"_blank",href:e||void 0,onClick:function(){return o.current&&r.close(o.current)},children:"click here to download it."})]}),isClosable:!0})},[r,i]);return{handleExport:(0,P.useCallback)(function(){var r,o=null==t?void 0:t.getJSON();l(!0),d();var a=setTimeout(u,3e4);eK(e.id,o,i).then((r=(0,z.Z)(N().mark(function t(r){var o,a,c,l,d,u;return N().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.blob();case 2:if(a=t.sent,r.ok){t.next=5;break}throw Error("Export failed.");case 5:c="pdf"===i?eB.AA.PDF_EXPORTED:eB.AA.PPTX_EXPORTED,null==s||s.track(c,{doc_id:e.id,source:n}),h(decodeURIComponent(r.headers.get("x-gamma-download-url")||"")||void 0),l=window.URL.createObjectURL(a),d=document.createElement("a"),u=decodeURIComponent((null===(o=(r.headers.get("Content-Disposition")||"").split(";").find(function(e){return e.includes("filename=")}))||void 0===o?void 0:o.replace("filename=","").trim())||"".concat(e.id,".").concat(i)),d.download=u,d.href=l,d.style.display="none",document.body.appendChild(d),d.click(),d.remove();case 17:case"end":return t.stop()}},t)})),function(e){return r.apply(this,arguments)})).catch(function(){p()}).finally(function(){l(!1),clearTimeout(a)})},[s,null==e?void 0:e.id,t,n,i,p,d,u,h]),exportInProgress:c}},eJ=function(e){var n=(0,eH.CG)(e$.Pu),t=e.theme||n;return(0,P.useMemo)(function(){var e=t.fonts?(0,K.Z)(t.fonts):[];return e.length<2&&e.push({id:"Inter",name:"Inter",url:"https://fonts.googleapis.com/css2?family=Inter"}),eV()(e).map(function(e){var n;return null!==(n=e.url)&&void 0!==n&&n.includes("fonts.googleapis.com")?{name:e.name,url:"https://fonts.google.com/specimen/".concat(e.name)}:{name:e.name}}).filter(function(e){return Boolean(e)})},[t])},eX=t(71193),eY=t(85275),eQ=t(60096),e0=t(20884),e1=function(e){var n=e.onSharePanelClose,t=e.onSharePanelOpen,i=e.segmentEvent,r=e.doc,o=(0,eY.y)("upsellUXEnabled_Pro"),s=(0,eQ.dU)(null==r?void 0:r.organization),a=(0,e0.zc)().openUpsellModal;return!1===s&&o?(0,ei.jsxs)(w.K,{my:4,borderTop:"1px solid var(--chakra-colors-gray-100)",w:"100%",children:[(0,ei.jsxs)(V.U,{mt:4,children:[(0,ei.jsxs)(V.U,{children:[(0,ei.jsx)(L.x,{children:'Remove "Made with Gamma" badge'}),(0,ei.jsx)(W.C,{colorScheme:"trueblue",variant:"solid",children:"Pro"})]}),(0,ei.jsx)(F.L,{}),(0,ei.jsx)(eX.r,{onClickCapture:function(e){e.preventDefault(),a({onOpenCallback:n,onCloseCallback:t,segmentEvent:i})},checked:!1})]}),(0,ei.jsx)(L.x,{fontSize:"xs",color:"gray.600",children:"Upgrade to share your work without any Gamma branding."})]}):null},e2=function(e){var n=e.doc,t=e.editor,i=e.onSharePanelOpen,r=e.onSharePanelClose,o=(0,A.ye)("pptExport");return(0,ei.jsxs)(eZ.g,{spacing:4,align:"start",pt:2,children:[(0,ei.jsxs)(L.x,{fontSize:"sm",color:"gray.600",children:["Download a static copy of your ",E._u," to share with others."]}),(0,ei.jsx)(e3,{format:"pdf",label:"PDF",icon:eM.gS,doc:n,editor:t}),o&&(0,ei.jsx)(e3,{format:"pptx",label:"PowerPoint",icon:eL.WO,doc:n,editor:t,badge:(0,ei.jsx)(W.C,{colorScheme:"green",ml:2,children:"Beta"})}),o&&(0,ei.jsx)(e5,{doc:n}),(0,ei.jsx)(e1,{onSharePanelClose:r,onSharePanelOpen:i,segmentEvent:eW.AA.GAMMA_PRO_UPSELL_EXPORT_SETTINGS_REMOVE_WATERMARK,doc:n}),!o&&(0,ei.jsx)(ew.b,{colorScheme:"gray",mt:"4",children:"Note: we don't currently support PowerPoint or Google Slides export, but we'll be exploring this in the future."})]})},e5=function(e){var n=eJ(e.doc);return n.length?(0,ei.jsxs)(ei.Fragment,{children:[(0,ei.jsx)(L.x,{fontSize:"sm",color:"gray.600",children:"For fonts to display correctly in PowerPoint, you may need the following fonts:"}),(0,ei.jsx)(V.U,{children:n.map(function(e){var n=e.name,t=e.url;return(0,ei.jsx)(j.xu,{border:"1px",borderColor:"gray.200",borderRadius:"md",h:"auto",_hover:t?{boxShadow:"var(--chakra-shadows-md)",borderColor:"var(--chakra-colors-trueblue-300)",color:"var(--chakra-colors-trueblue-400)"}:{},onClick:t?function(){return window.open(t,"_blank")}:void 0,cursor:t?"pointer":void 0,children:(0,ei.jsxs)(V.U,{p:4,paddingRight:6,spacing:4,children:[(0,ei.jsx)(L.x,{fontWeight:"medium",children:n}),t&&(0,ei.jsx)(D.G,{icon:ec.faArrowUpRightFromSquare,size:"1x"})]})},"name")})})]}):null},e3=function(e){var n=e.format,t=e.doc,i=e.editor,r=e.icon,o=e.label,s=e.badge,a=eq(t,"share_panel",i,n),c=a.handleExport,l=a.exportInProgress;return(0,ei.jsx)(j.xu,{alignContent:"left",width:"100%",onClick:c,borderRadius:"md",border:"1px",borderColor:"gray.200",bgColor:l?"gray.50":"white",cursor:l?"progress":void 0,disabled:l,as:"button",transitionProperty:"common",transitionDuration:"normal",_hover:l?{}:{boxShadow:"var(--chakra-shadows-md)",borderColor:"var(--chakra-colors-trueblue-300)",color:"var(--chakra-colors-trueblue-400)"},children:(0,ei.jsxs)(V.U,{p:4,paddingRight:6,justifyContent:"space-between",children:[(0,ei.jsxs)(V.U,{spacing:3,children:[(0,ei.jsx)(S.k,{bgColor:l?"gray.100":"gray.50",color:"red.500",height:12,width:12,alignItems:"center",justifyContent:"center",borderRadius:"md",fontSize:"2xl",children:(0,ei.jsx)(D.G,{icon:r,fixedWidth:!0})}),(0,ei.jsxs)(eZ.g,{alignItems:"flex-start",spacing:0,children:[(0,ei.jsxs)(L.x,{fontWeight:"medium",children:["Export to ",o," ",s]}),l&&(0,ei.jsxs)(L.x,{color:"gray.600",fontSize:"xs",children:["Your ",o," is being generated. It's safe to close the share panel."]})]})]}),!l&&(0,ei.jsx)(D.G,{icon:u.fu,size:"1x"})]})})},e4=t(95235),e9=t(11446),e6=t(47299),e8=t(3851),e7=t(64256),ne=t(49626),nn=t(59195),nt=t(61751),ni=t(40130),nr=t(27037),no=t(52622),ns=(t(98683),t(97907),t(50390)),na=t(12221),nc=t(1842),nl=t.n(nc),nd=t(25206),nu=t(83775),np=t(20435),nh=t(35157),nf=t(39586),nm=t(25180),nx=t(75673),nb=t(97473),nj=t(19911),ng=function(e){var n=e.icon,t=e.showDisabled,i=void 0!==t&&t;return(0,ei.jsx)(j.Cd,{color:"gray.800",textAlign:"center",bg:"gray.200",size:8,opacity:i?.5:1,children:i?(0,ei.jsxs)("span",{className:"fa-stack",children:[(0,ei.jsx)(D.G,{icon:nj.u6,className:"fa-stack-1x"}),(0,ei.jsx)(D.G,{icon:n,className:"fa-stack-1x"})]}):(0,ei.jsx)(D.G,{size:"1x",icon:n})})},nv=function(e){var n=e.channel,t=e.doc,i=e.isDisabled,r=e.showDisabledIcon,o=void 0!==r&&r,s=(0,nb.Z)().removeDocChannel,a=(0,P.useCallback)(function(){t&&s(t,n.id)},[n.id,t,s]),c=(0,nm.j)({slug:n.slug,id:n.id});return(0,ei.jsxs)(V.U,{py:2,w:"100%",justify:"space-between","data-testid":"workspace-row-".concat(n.id),children:[(0,ei.jsx)(j.xu,{children:(0,ei.jsxs)(S.k,{alignItems:"center",children:[(0,ei.jsx)(ng,{icon:np.Ty,showDisabled:o}),(0,ei.jsx)(j.xu,{ml:3,opacity:o?.5:1,children:(0,ei.jsx)(eh.r,{href:c,target:"_blank",children:n.name})})]})}),(0,ei.jsx)(O.z,{size:"sm",variant:"ghost",colorScheme:"red",onClick:a,isDisabled:i,children:"Remove"})]},n.id)},ny=t(46949),nw=t(76648),nC=t(35316),nk=t(90113),nO=t(38421),nI=t.n(nO),nS=function(e){var n=e.workspaceId,t=e.docId,i=e.existingChannels,r=e.isDisabled,o=(0,P.useRef)(null),s=(0,P.useState)(""),a=s[0],c=s[1],l=(0,P.useState)([]),d=l[0],u=l[1],p=(0,P.useState)(!1),h=p[0],f=p[1],m=(0,nb.Z)().addDocChannel,x=(0,_.Kce)({variables:{query:a,workspaceId:n},skip:!a}),b=x.data,g=x.loading;(0,P.useEffect)(function(){if(!g&&b){var e=b.search.filter(Boolean);u(e),f(0===e.length)}},[b,g]);var v=(0,P.useMemo)(function(){return a?d.filter(function(e){return!i.find(function(n){return n.id===e.id})}):[]},[i,a,d]),y=(0,P.useCallback)(function(e){var n=v.find(function(n){return n.id===e});if(!n){console.error("[ChannelSearchBar.addSelectedChannel] No matching channel found");return}m({docId:t,channel:n,existingChannels:i})},[m,t,i,v]);return(0,ei.jsx)(nw.h,{w:"100%",mb:2,alignItems:"flex-start","data-testid":"sharepanel-channel-search-bar",children:(0,ei.jsx)(j.xu,{flex:1,children:(0,ei.jsxs)(H.B,{w:"100%",justifyContent:"center",zIndex:1,children:[(0,ei.jsx)(S.k,{display:"none",position:"absolute",h:"100%",w:"100%",alignItems:"center",justifyContent:"center",bg:"gray.300",zIndex:"overlay",opacity:.4,children:(0,ei.jsx)(ef.$,{})}),(0,ei.jsxs)(nk.AutoComplete,{rollNavigation:!0,multiple:!0,emptyState:function(){return!!h&&(0,ei.jsxs)(S.k,{direction:"column",justify:"center",align:"center",w:"100%",my:6,children:[(0,ei.jsx)(j.xu,{w:"80%",maxW:"200px",mb:6,alignContent:"center",children:(0,ei.jsx)(nI(),{src:"/images/Sal-Fishing-2x.png",width:"640",height:"361",alt:"Sal, the Gamma mascot, fishing extraterrestrially"})}),(0,ei.jsxs)(ns.X,{size:"xs",mb:2,textAlign:"center",children:["No ",E.j8," found."]}),(0,ei.jsx)(L.x,{fontSize:"sm",color:"gray.400",textAlign:"center",children:"Try changing your search query."})]})},suggestWhenEmpty:!1,openOnFocus:!0,filter:function(){return!0},onSelectOption:function(e){y(e.item.value),c("")},children:[(0,ei.jsxs)(nC.Z,{pointerEvents:"none",color:"gray.300",h:"100%",flexDirection:"column",children:[(0,ei.jsx)(S.k,{flex:1}),(0,ei.jsx)(S.k,{h:10,py:4,alignItems:"center",children:(0,ei.jsx)(ny.W,{w:10})})]}),(0,ei.jsx)(nk.AutoCompleteInput,{ref:o,"data-testid":"autocomplete-channels-input",cursor:r?"not-allowed":void 0,disabled:r,w:"100%",pl:5,wrapStyles:{px:2},fontSize:"md",placeholder:"Add to ".concat(E.sj),transition:"width 1s ease-in-out",value:a,onChange:function(e){var n=e.target.value;c(n),n||u([])}}),(0,ei.jsx)(nk.AutoCompleteList,{w:"100%",mt:0,display:a.length>0?"flex":"none",children:v.length>0&&v.map(function(e){var n=e.id,t=e.name,i=e.memberCount,r=e.isMember,o=e.members;return(0,ei.jsx)(nk.AutoCompleteItem,{"data-testid":"autocomplete-item-channel-".concat(n),value:{id:e.id},getValue:function(e){return e.id},align:"center",_focus:{bg:"trueblue.50"},children:(0,ei.jsxs)(V.U,{spacing:4,p:0,flex:1,children:[(0,ei.jsx)(j.xu,{color:"gray.700",children:(0,ei.jsx)(D.G,{icon:np.Ty})}),(0,ei.jsxs)(w.K,{spacing:0,flex:"1",children:[(0,ei.jsx)(L.x,{children:t}),(0,ei.jsxs)(L.x,{fontSize:"sm",color:"gray.400",children:[i," ",1===i?"member":"members",r&&", including you."]})]}),(0,ei.jsx)(E.NL,{size:"xs",avatars:o||[],max:3,onClick:function(e){e.preventDefault(),e.stopPropagation()}})]})},n)})})]})]})})})},nD=t(4448),nE=t(7985),nP=t(73137),n_=t(37061),nA=t(55090),nT=t(58952),nz=t(68825),nG=t(36471),nR=t(9088),nN=t(30893),nU=t(40771),nL=t(63849),nM=t(2575),nZ=t(49747),nW=t(82904);(a||(a={})).NoAccess="no_access";var nF=(s={},(0,e4.Z)(s,_.y3$.Manage,{title:np.T6,description:"Can view, comment, edit, and share with others.",verb:"own"}),(0,e4.Z)(s,_.y3$.Edit,{title:"Edit",description:"Can view, comment, edit, but not share with others.",verb:"edit"}),(0,e4.Z)(s,_.y3$.Comment,{title:"Comment",description:"Can view and comment, but not edit.",verb:"comment on"}),(0,e4.Z)(s,_.y3$.View,{title:"View",description:"Can view, but not comment or edit.",verb:"view"}),(0,e4.Z)(s,a.NoAccess,{title:"No access",description:"Cannot view, comment, or edit."}),s),nV=function(e){var n=e.isDisabled,t=e.options,i=e.disabledOptions,r=void 0===i?[]:i,o=e.selected,s=e.variant,c=e.onClick,l=void 0===c?function(){}:c,d=e.onRemove;return(0,ei.jsxs)(nR.v,{closeOnSelect:!0,children:[(0,ei.jsx)(nN.j,{"data-testid":"permission-menu-value-".concat(o),as:O.z,display:"flex",size:"sm",isDisabled:n,variant:void 0===s?"ghost":s,rightIcon:(0,ei.jsx)(D.G,{icon:es.pt}),children:nF[o||a.NoAccess].title}),(0,ei.jsx)(nU.q,{textAlign:"left",zIndex:"overlay",children:(0,ei.jsxs)(nL._,{defaultValue:o,value:o,title:"Permissions",type:"radio",onChange:function(e){l(e)},children:[t.map(function(e){var n=r.find(function(n){return n.permission===e}),t=n&&n.reason;return(0,ei.jsx)(nM.i,{isDisabled:Boolean(n),value:e,alignItems:"start",pt:3,children:(0,ei.jsx)(E.kH,{label:t,"aria-label":t,isDisabled:!n,placement:"top",children:(0,ei.jsxs)(j.xu,{children:[(0,ei.jsx)(L.x,{mt:-1,children:nF[e].title}),(0,ei.jsx)(L.x,{fontSize:"sm",color:"gray.500",mt:1,children:nF[e].description})]})},e)},e)}),d&&(0,ei.jsxs)(ei.Fragment,{children:[(0,ei.jsx)(nZ.R,{}),(0,ei.jsx)(nW.s,{color:"red.500",onClick:d,icon:(0,ei.jsx)(D.G,{icon:nG.$,fixedWidth:!0}),children:"Remove"})]})]})})]})},nH=t(2760);function nB(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,i)}return t}function n$(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?nB(Object(t),!0).forEach(function(n){(0,e4.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):nB(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var nK=(0,nP.E)(j.xu),nq=function(e,n,t){if(!t)return e;var i=(0,K.Z)(e),r=e.findIndex(function(e){return"email"in e&&e.email===t}),o=n.find(function(e){return e.email===t});return -1!==r&&i.splice(r,1),[].concat((0,K.Z)(i),[o||{email:t}])},nJ=function(e){var n,t=e.workspaceId,i=e.docId,r=e.user,o=e.existingDocCollaborators,s=e.existingInvitations,a=e.registerDoneFn,c=e.isDisabled,l=(0,U.p)(),d=(0,P.useState)(!1),u=d[0],p=d[1],h=(0,P.useRef)(),f=(0,P.useRef)(null),m=(0,P.useState)(""),x=m[0],b=m[1],g=(0,P.useState)([]),v=g[0],y=g[1],w=(0,P.useState)(_.y3$.Manage),C=w[0],k=w[1],I=(0,P.useState)(new nT.B),A=I[0],T=I[1],R=(0,P.useState)([]),M=R[0],Z=R[1],W=M.filter(function(e){return"email"in e}),F=o.map(function(e){return e.user}),B=(0,el.q)({id:"unsentInvitationsModalDisclosure"}),$=B.isOpen,q=B.onOpen,J=B.onClose,X=(0,_.qVw)(),Y=(0,G.Z)(X,2),Q=Y[0],ee=Y[1],en=ee.loading,et=ee.error;(0,eI.GJ)("Error inviting collaborators.",et);var er=(0,n_.j)(_.aAR),eo=(0,_.PGi)({variables:{query:x,workspaceId:t},skip:!x}),es=eo.data,ea=eo.loading;(0,P.useEffect)(function(){!ea&&es&&y(es.search.filter(Boolean))},[es,ea]);var ec=(0,P.useMemo)(function(){return x?v.filter(function(e){return"User"===e.__typename&&e.id!==r.id&&!W.concat(F).find(function(n){return n.email===e.email})}):[]},[v,F,x,W,r.id]),ed=Boolean(x)&&!ec.find(function(e){return e.email===x}),eu=C===_.y3$.Manage&&W.some(function(e){return!("__typename"in e&&"User"===e.__typename)}),ep=M.concat({email:x}).filter(function(e){return!("email"in e)||(0,nE.G)(e.email||"")}),eh=Boolean(M.length),em=Boolean(ep.length);(0,P.useEffect)(function(){a(function(){return function(){return em?q():A.resolve(),A.promise}})},[a,A,em,q]);var ex=(0,P.useCallback)((n=(0,z.Z)(N().mark(function e(n){var i;return N().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return p(!0),Z(function(e){return n.reduce(function(e,n){return nq(e,ec,n.trim())},e)}),e.next=4,Promise.all(n.map(function(e){return er({workspaceId:t,query:e}).then(function(n){var t;return null===(t=n.data)||void 0===t?void 0:t.search.find(function(n){return"User"===n.__typename&&n.email===e})})}));case 4:i=e.sent.filter(Boolean),Z(function(e){return n.reduce(function(e,n){return nq(e,i,n.trim())},e)}),p(!1);case 7:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)}),[ec,er,t]),eb=(0,P.useCallback)((0,z.Z)(N().mark(function e(){var n,t,a;return N().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==W.length){e.next=2;break}return e.abrupt("return");case 2:return n=nq(W,ec,x.trim()).filter(function(e){return"email"in e&&(0,nE.G)(e.email||"")}),t=[].concat((0,K.Z)(o),(0,K.Z)(n.map(function(e){if("id"in e)return{docId:i,user:e,guest:!1,permission:C,__typename:"DocCollaborator"}}))).filter(function(e){return Boolean(e)}),a=[].concat((0,K.Z)(s),(0,K.Z)(n.map(function(e){if(!("id"in e))return{id:"temp",docTitle:"temp-title",invitedBy:r,docId:i,email:e.email,permission:C,__typename:"DocInvitation"}}))).filter(function(e){return Boolean(e)}),e.abrupt("return",Q({variables:{docId:i,collaborators:n.map(function(e){var n={permission:C};return n$(n$({},"id"in e?{userId:e.id}:{email:e.email}),n)})},update:function(e,n){var t=n.data;e.writeFragment({id:"Doc:".concat(i),fragment:_.yAO,data:null==t?void 0:t.addCollaborators})},optimisticResponse:{addCollaborators:{id:i,collaborators:t,invitations:a}}}).then(function(){var e=(0,nz.Hs)(n.map(function(e){return"displayName"in e?e.displayName:e.email}),3),t=n.length>1;l({title:"Invitation".concat(t?"s":""," sent"),description:"".concat(e," ").concat(t?"were":"was"," invited to ").concat(nF[C].verb," this ").concat(E._u,"."),status:"success",duration:5e3,isClosable:!0,position:"top"})}));case 6:case"end":return e.stop()}},e)})),[Q,i,x,C,ec,W,o,s,l,r]),ej=(0,P.useCallback)((0,z.Z)(N().mark(function e(){return N().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all([eb()]).then(function(){var e;Z([]),b(""),null===(e=h.current)||void 0===e||e.resetItems(!0),A.resolve(),T(new nT.B)}).catch(function(e){console.warn(e)}));case 1:case"end":return e.stop()}},e)})),[eb,A]),eg=c||en||u;return(0,ei.jsxs)(nw.h,{w:"100%",mb:2,alignItems:"flex-start","data-testid":"sharepanel-search-bar",children:[(0,ei.jsx)(j.xu,{flex:1,children:(0,ei.jsxs)(H.B,{w:"100%",justifyContent:"center",zIndex:2,children:[(0,ei.jsx)(S.k,{display:u?"flex":"none",position:"absolute",h:"100%",w:"100%",alignItems:"center",justifyContent:"center",bg:"gray.300",zIndex:"overlay",opacity:.4,children:(0,ei.jsx)(ef.$,{})}),(0,ei.jsxs)(nk.AutoComplete,{ref:h,values:M,maxSelections:100,maxSuggestions:20,creatable:!0,multiple:!0,freeSolo:!0,suggestWhenEmpty:!1,openOnFocus:!0,filter:function(e,n){return!W.find(function(e){return e.email===n})},onSelectOption:function(e){var n=e.item;"collaborator"===n.originalValue.type&&Z(function(e){return nq(e,ec,n.value)}),b("")},onTagRemoved:function(e){Z(function(n){return(0,K.Z)(n).filter(function(n){return"email"in n?n.email!==e:!("id"in n)||n.id!==e})})},children:[(0,ei.jsxs)(nC.Z,{pointerEvents:"none",color:"gray.300",h:"100%",flexDirection:"column",children:[(0,ei.jsx)(S.k,{flex:1}),(0,ei.jsx)(S.k,{h:10,py:4,alignItems:"center",children:(0,ei.jsx)(ny.W,{w:10})})]}),(0,ei.jsx)(nk.AutoCompleteInput,{ref:f,"data-testid":"autocomplete-collaborators-input",cursor:eg?"not-allowed":void 0,disabled:eg,w:"100%",pl:5,wrapStyles:{px:2},fontSize:"md",placeholder:"Add emails or people",transition:"width 1s ease-in-out",value:x,onKeyDown:function(e){if("Backspace"===e.key&&0===x.length&&M.length>0){var n,t=M.slice(-1).pop();t&&(null===(n=h.current)||void 0===n||n.removeItem("email"in t?t.email:t.id))}},onPaste:function(e){e.preventDefault(),e.stopPropagation(),ex(e.clipboardData.getData("Text").trim().split(/[,|;\s]+/)),b(""),y([])},onChange:function(e){var n=e.target.value;b(n),n||y([])},children:M.map(function(e,n){return(0,ei.jsx)(nH.L,{idx:n,selectedCollaborator:e,handleRemoveClick:function(){var n;null===(n=h.current)||void 0===n||n.removeItem(e.email)}},"id"in e?e.id:e.email)})}),(0,ei.jsx)(nk.AutoCompleteList,{w:"100%",mt:0,display:x.length>0?"flex":"none",children:ec.map(function(e){var n=e.id,t=e.email,i=e.displayName,r=e.profileImageUrl;return(0,ei.jsx)(nk.AutoCompleteItem,{fixed:!0,"data-testid":"autocomplete-item-user-".concat(n),value:{email:t,type:"collaborator"},getValue:function(e){return e.email},align:"center",_focus:{bg:"trueblue.50"},children:(0,ei.jsxs)(V.U,{children:[(0,ei.jsx)(na.q,{size:"sm",name:i,src:r}),(0,ei.jsxs)(j.xu,{children:[(0,ei.jsx)(L.x,{textTransform:"capitalize",children:i}),(0,ei.jsx)(L.x,{fontSize:"xs",color:"gray.500",children:null==t?void 0:t.toLowerCase()})]})]})},n)}).concat((0,ei.jsx)(nk.AutoCompleteItem,{value:{email:x,type:"collaborator"},align:"center",display:ed?"flex":"none",_focus:{bg:"trueblue.50"},children:(0,ei.jsxs)(V.U,{children:[(0,ei.jsx)(j.Cd,{bg:"trueblue.100",size:8,children:(0,ei.jsx)(D.G,{icon:nr.FU})}),(0,ei.jsx)(L.x,{size:"md",children:x})]})},x))})]}),(0,ei.jsx)(nD.p,{in:eh,unmountOnExit:!0,children:(0,ei.jsx)(nC.x,{w:"auto",justifyContent:"flex-end",pr:1,children:(0,ei.jsx)(nV,{isDisabled:en,options:[_.y3$.Manage,_.y3$.Edit,_.y3$.Comment,_.y3$.View],variant:"ghost",selected:C,onClick:function(e){return k(e)}})})})]})}),(0,ei.jsx)(nK,{overflowX:"hidden",mr:-2,transition:"slow",animate:{maxWidth:eh?"200px":"0px"},children:(0,ei.jsx)(E.kH,{label:np.GF,"aria-label":np.GF,isDisabled:!eu,placement:"top",children:(0,ei.jsx)(j.xu,{children:(0,ei.jsx)(O.z,{variant:"solid",onClick:ej,isDisabled:!em||eu,isLoading:en,"data-testid":"add-selected-items",children:"Add"})})})}),(0,ei.jsx)(nA.C,{invitationCount:ep.length,onDiscardClick:function(){J(),A.resolve(),T(new nT.B)},onSendInvitationsClick:function(){J(),ej()},onClose:function(){J(),A.reject(),T(new nT.B)},isOpen:$})]})},nX=function(e){var n=e.title,t=e.subtitle,i=e.img,r=e.isDisabled,o=e.disabledText,s=e.tooltipText,a=e.testId,c=e.infoIcon,l=e.permissionsControl,d=e.workspaceGuestInvite,u="string"==typeof t?(0,ei.jsx)(L.x,{fontSize:"xs",color:"gray.500",children:t}):t,p=(0,ei.jsx)(E.kH,{isDisabled:!s,label:(0,ei.jsx)(L.x,{children:s}),placement:"top",children:(0,ei.jsx)(j.xu,{children:l})});return(0,ei.jsxs)(V.U,{w:"100%",justify:"space-between",py:2,"data-testid":"permission-settings-row".concat(a?"-"+a:""),children:[(0,ei.jsx)(j.xu,{children:(0,ei.jsxs)(S.k,{alignItems:"center",children:[i,(0,ei.jsxs)(j.xu,{ml:3,children:[(0,ei.jsx)(L.x,{children:n}),(0,ei.jsxs)(S.k,{align:"center",children:[d&&d,u&&u]})]})]})}),(0,ei.jsx)(j.xu,{children:(0,ei.jsx)(E.kH,{isDisabled:!s,label:(0,ei.jsx)(L.x,{children:s}),placement:"top",children:void 0!==r&&r?(0,ei.jsx)(L.x,{size:"sm",color:"gray.500","data-testid":"permission-controls-disabled-".concat(a),children:o}):c?(0,ei.jsxs)(V.U,{children:[c,p]}):p})})]})},nY=t(82269),nQ=["children","showDivider"];function n0(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,i)}return t}function n1(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?n0(Object(t),!0).forEach(function(n){(0,e4.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):n0(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var n2=function(e){var n=e.children,t=e.showDivider,i=(0,nY.Z)(e,nQ);return(0,ei.jsxs)(ei.Fragment,{children:[(0,ei.jsx)(eZ.g,n1(n1({spacing:1,align:"stretch",py:4},i),{},{children:n})),(void 0===t||t)&&(0,ei.jsx)(v.i,{})]})},n5=function(e){var n=e.subtitle,t=e.tooltipLabel,i=e.ariaLabel,r=e.icon;return(0,ei.jsxs)(V.U,{spacing:1,align:"center",children:[(0,ei.jsx)(L.x,{fontSize:"xs",color:"gray.500",children:n}),(0,ei.jsx)(E.kH,{label:t,placement:"top","aria-label":i,children:(0,ei.jsx)(j.xu,{color:"gray.500",lineHeight:"1",children:(0,ei.jsx)(D.G,{size:"xs",icon:r})})})]})},n3=t(43794),n4=t(54728),n9=t(51434),n6=t(91333),n8=t(10344),n7=t(23742),te=t(83897),tn=function(e){var n=e.email,t=e.name,i=e.workspaceName,r=e.workspaceId,o=(0,_.f4M)(),s=(0,G.Z)(o,1)[0],a=(0,P.useState)(!1),c=a[0],l=a[1],d=(0,U.p)();return(0,ei.jsx)(n4.J,{closeOnBlur:!0,children:function(e){var o=e.onClose;return(0,ei.jsxs)(ei.Fragment,{children:[(0,ei.jsx)(n9.x,{children:(0,ei.jsx)(O.z,{leftIcon:(0,ei.jsx)(D.G,{icon:n3.Gg}),size:"xs",colorScheme:"gray",mr:1,px:2,h:"auto",py:1,children:"Guest"})}),(0,ei.jsxs)(n6.y,{bg:"white",children:[(0,ei.jsx)(n8.Q,{}),(0,ei.jsx)(n7.Y,{fontWeight:"bold",children:"Invite guest to workspace?"}),(0,ei.jsxs)(te.b,{children:[(0,ei.jsxs)(L.x,{fontSize:"sm",children:[t," is not a member of the ",i," workspace. If you invite them to this workspace, they’ll have access to"," ",E._u,"s shared with workspace members."]}),(0,ei.jsx)(O.z,{isDisabled:c,w:"100%",mt:2,onClick:function(){r&&n&&(l(!0),s({variables:{workspaceId:r,invitees:[{email:n}]}}).then(function(){d({title:"Invitation sent",status:"success",duration:5e3,isClosable:!0,position:"top"})}).catch(function(e){console.error(e),d({title:"Error sending invitation: ".concat(e.message),status:"error",isClosable:!0,position:"top"})}).finally(function(){l(!1),o()}))},children:"Invite to workspace"})]})]})]})}})};function tt(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,i)}return t}function ti(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?tt(Object(t),!0).forEach(function(n){(0,e4.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):tt(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var tr={view:{subtitle:"view",tooltip:np.gP},comment:{subtitle:"view and comment",tooltip:np.gP+" If they sign in they'll be added as a collaborator with comment permission."},edit:{subtitle:"view, comment and edit",tooltip:np.gP+" If they sign in they'll be added as a collaborator with edit permission."}},to=function(e,n){var t,i,r="DocCollaborator"===e.__typename?null===(t=e.user.displayName)||void 0===t?void 0:t.toUpperCase():"DocInvitation"===e.__typename?e.email.toUpperCase():"",o="DocCollaborator"===n.__typename?null===(i=n.user.displayName)||void 0===i?void 0:i.toUpperCase():"DocInvitation"===n.__typename?n.email.toUpperCase():"";return!o||r&&r<o?-1:!r||o&&r>o?1:0},ts=function(e,n){if(e.permission!==n.permission){if("manage"===e.permission)return -1;if("manage"===n.permission)return 1}return to(e,n)},ta=function(e){var n,t,i,r=e.workspaceId,o=e.isFromOtherOrg,s=e.doc,c=e.user,l=e.setVerifySearchDone,d=e.canManage,u=(0,U.p)(),p=(0,nf._)(nx.H.hasDismissedDocWorkspaceNotice,!1),h=(0,G.Z)(p,2),f=h[0],m=(h[1],(0,P.useState)(!1)),x=m[0],b=m[1],g=(0,_.$gs)().isConnected,v=(0,_.qVw)(),y=(0,G.Z)(v,2),w=y[0],C=y[1].error,k=(0,_.mrc)(),O=(0,G.Z)(k,2),I=O[0],A=O[1].error;(0,eI.GJ)("Error updating collaborator.",C),(0,eI.GJ)("Error removing collaborator.",A);var z=(0,_.rIg)(),R=(0,G.Z)(z,1)[0],N=(0,_.kTH)(),M=(0,G.Z)(N,1)[0],Z=null==s?void 0:null===(n=s.accessLinks)||void 0===n?void 0:n[0],W=(0,P.useMemo)(function(){return(0,nm.Gn)({docTitle:null==s?void 0:s.title,docId:null==s?void 0:s.id,token:null==Z?void 0:Z.token,absolute:!0})},[s,null==Z?void 0:Z.token]),F=d&&g,H=!o,B=(H&&!f&&s&&s.orgAccess,Boolean(!(null!=s&&s.orgAccess)&&(null==s?void 0:s.channels)&&(null==s?void 0:s.channels.length)>0&&(null==s?void 0:s.channels.every(function(e){return nl()(e.permission)})))),$=(null==s?void 0:s.orgAccess)==null&&(null==s?void 0:s.publicAccess)==_.y3$.View,q=(0,T.qw)(s),J=(null==s?void 0:s.collaborators)||[],X=(null==s?void 0:s.invitations)||[],Y=J.filter(function(e){return e.permission===_.y3$.Manage}).length,Q=[].concat((0,K.Z)(J),(0,K.Z)(X)).sort(ts),ee=function(e){return function(){u({title:"Permission ".concat(e),status:"success",duration:5e3,isClosable:!0,position:"top"})}},en=null!=Z&&Z.permission?null==Z?void 0:Z.permission:a.NoAccess,et=en===a.NoAccess,er=(null==Z?void 0:Z.token)==="",eo=Z&&Z.permission!==_.y3$.View,es=s.orgAccess?s.orgAccess:a.NoAccess,ea=es!==a.NoAccess;return(0,ei.jsxs)(ei.Fragment,{children:[F&&(0,ei.jsx)(nJ,{workspaceId:r,docId:s.id,user:c,existingDocCollaborators:J,existingInvitations:X,registerDoneFn:l,isDisabled:!d}),(0,ei.jsx)(nd.V,{label:"Sharing will be available when you reconnect.",isConnected:g,mb:4}),(0,ei.jsx)(L.x,{fontSize:"sm",color:"gray.600",pt:2,children:q}),(0,ei.jsxs)(n2,{children:[!1,(0,ei.jsx)(nX,{testId:"workspace",title:"Workspace ".concat(nh.pd,"s"),subtitle:ea?"Everyone in ".concat(null==s?void 0:null===(t=s.organization)||void 0===t?void 0:t.name):"",img:(0,ei.jsx)(ng,{icon:no.P8,showDisabled:!ea}),isDisabled:!F,disabledText:nF[es].title,infoIcon:$?(0,ei.jsx)(E.kH,{label:"This ".concat(E._u," will not appear in your workspace, but anyone with the link can view."),placement:"top",children:(0,ei.jsx)(j.xu,{color:"yellow.500",children:(0,ei.jsx)(D.G,{icon:ni.faCircleInfo})})}):void 0,permissionsControl:(0,ei.jsx)(nV,{isDisabled:!F,selected:es,options:[_.y3$.Manage,_.y3$.Edit,_.y3$.Comment,_.y3$.View,a.NoAccess],onClick:function(e){var n={id:s.id,orgAccess:e===a.NoAccess?null:e};R({variables:n,optimisticResponse:{updateDoc:ti(ti({},n),{},{__typename:"Doc"})},refetchQueries:["GetDocs"]}).then(ee(e===a.NoAccess?"removed":"updated"))}})}),H&&(null===(i=s.channels)||void 0===i?void 0:i.map(function(e){return(0,ei.jsx)(nv,{channel:e,doc:s,isDisabled:!g,showDisabledIcon:B},e.id)})),Boolean(s.orgAccess)&&H&&!B&&(0,ei.jsx)(j.xu,{w:"100%",mt:2,children:(0,ei.jsx)(nS,{existingChannels:s.channels,workspaceId:r,docId:s.id,isDisabled:!g})}),(0,ei.jsx)(eu.U,{in:H&&B,children:(0,ei.jsxs)(ew.b,{status:"warning",children:[(0,ei.jsx)(eC.z,{}),"Your ",E._u," will be hidden from these"," ",E.j8," until you provide workspace access"]})})]}),Q&&(0,ei.jsx)(n2,{showDivider:d,children:Q.map(function(e){var n=e.permission===_.y3$.Manage&&Y<2,t=!F||n,i=n?"At least 1 ".concat(np.T6," collaborator is required."):void 0,o=nF[e.permission].title;if("DocCollaborator"===e.__typename){var a,l=e.user;return(0,ei.jsx)(nX,{testId:l.email,title:"".concat(l.displayName," ").concat(l.id===c.id?"(You)":""),img:(0,ei.jsx)(na.q,{name:l.displayName,src:l.profileImageUrl,size:"sm"}),subtitle:t?void 0:l.email,isDisabled:t,disabledText:o,tooltipText:i,workspaceGuestInvite:!t&&e.guest?(0,ei.jsx)(tn,{name:l.displayName,workspaceName:null===(a=s.organization)||void 0===a?void 0:a.name,workspaceId:r,email:e.user.email}):void 0,permissionsControl:(0,ei.jsx)(nV,{isDisabled:t,selected:e.permission,options:[_.y3$.Manage,_.y3$.Edit,_.y3$.Comment,_.y3$.View],disabledOptions:e.guest?[{permission:_.y3$.Manage,reason:np.GF}]:[],onClick:function(e){var n={docId:s.id,collaborators:[{userId:l.id,permission:e}]};w({variables:n,optimisticResponse:{addCollaborators:{id:n.docId,collaborators:J.map(function(n){return ti(ti({},n),{},{permission:n.user.id===l.id?e:n.permission})}),invitations:X,__typename:"Doc"}}}).then(ee("updated")).catch(function(){})},onRemove:function(){var e={docId:s.id,collaborators:[{userId:l.id}]};I({variables:e,optimisticResponse:{removeCollaborators:{id:e.docId,collaborators:J.filter(function(e){return e.user.id!==l.id}),invitations:X,__typename:"Doc"}}}).then(ee("removed"))}})},l.id)}return"DocInvitation"===e.__typename?(0,ei.jsx)(nX,{testId:e.email,title:e.email,subtitle:"Invitation Sent",img:(0,ei.jsx)(j.Cd,{bg:"trueblue.50",size:8,children:(0,ei.jsx)(D.G,{icon:nr.FU,size:"sm"})}),isDisabled:t,disabledText:o,permissionsControl:(0,ei.jsx)(nV,{selected:e.permission,options:[_.y3$.Manage,_.y3$.Edit,_.y3$.Comment,_.y3$.View],disabledOptions:[{permission:_.y3$.Manage,reason:np.GF}],onClick:function(n){var t={docId:s.id,collaborators:[{email:e.email,permission:n}]};w({variables:t,optimisticResponse:{addCollaborators:{id:t.docId,invitations:X.map(function(t){return ti(ti({},t),{},{permission:t.email===e.email?n:t.permission})}),collaborators:J,__typename:"Doc"}}}).then(ee("updated")).catch(function(){console.warn("Error updating permission")})},onRemove:function(){var n={docId:s.id,collaborators:[{email:e.email}]};I({variables:n,optimisticResponse:{removeCollaborators:{id:n.docId,invitations:X.filter(function(n){return n.email!==e.email}),collaborators:J,__typename:"Doc"}}}).then(ee("removed"))}})},e.email):null})}),d&&(0,ei.jsxs)(n2,{showDivider:!1,children:[(0,ei.jsx)(nX,{title:"Anyone with the link",subtitle:et?"Link sharing has been turned off":(0,ei.jsx)(n5,{subtitle:"Can ".concat(tr[en].subtitle),tooltipLabel:tr[en].tooltip,ariaLabel:"Can ".concat(tr[en]),icon:ni.faCircleInfo}),img:(0,ei.jsx)(ng,{icon:nt.nN,showDisabled:et}),isDisabled:!F,disabledText:nF[en].title,permissionsControl:(0,ei.jsx)(nV,{selected:en,options:[_.y3$.Edit,_.y3$.Comment,_.y3$.View,a.NoAccess],onClick:function(e){var n=null==Z?void 0:Z.id,t={id:s.id,accessLinks:e===a.NoAccess?[{permission:null}]:[{permission:e}]};M({variables:t,optimisticResponse:{updateDoc:ti(ti({},t),{},{accessLinks:[{__typename:"AccessLink",id:n||"temp-id",permission:e===a.NoAccess?null:e}],__typename:"Doc"})}}).then(ee(e===a.NoAccess?"removed":"updated"))}})}),(0,ei.jsxs)(eu.U,{animateOpacity:!0,in:Boolean(null==Z?void 0:Z.permission),children:[(0,ei.jsx)(E.Iq,{url:W,customLabel:"Copy link",buttonWidth:"7rem",onClick:function(){(0,nu.J)({docId:s.id,source:"sharePanel",type:"tokenUrl"})}}),!er&&(0,ei.jsxs)(ei.Fragment,{children:[(0,ei.jsx)(eu.U,{in:x,unmountOnExit:!0,children:(0,ei.jsxs)(eZ.g,{mt:3,align:"stretch",spacing:4,bg:"gray.50",p:6,borderRadius:"md",children:[(0,ei.jsxs)(V.U,{spacing:4,align:"center",children:[(0,ei.jsx)(j.xu,{color:"purple.600",children:(0,ei.jsx)(D.G,{fixedWidth:!0,icon:e8._1})}),(0,ei.jsx)(L.x,{fontSize:"sm",children:"This link contains a special token that acts like a password."})]}),(0,ei.jsxs)(V.U,{spacing:4,align:"center",children:[(0,ei.jsx)(j.xu,{color:"purple.600",children:(0,ei.jsx)(D.G,{fixedWidth:!0,icon:e6.Md})}),(0,ei.jsxs)(L.x,{fontSize:"sm",display:"inline-block",children:["Anyone with this link will be able to view this"," ",E._u," without a Gamma account."]})]}),eo&&(0,ei.jsxs)(V.U,{spacing:4,align:"center",children:[(0,ei.jsx)(j.xu,{color:"purple.600",children:(0,ei.jsx)(D.G,{fixedWidth:!0,icon:e9.FK})}),(0,ei.jsxs)(L.x,{fontSize:"sm",children:["If they sign in or create a Gamma account, they'll be added as a collaborator with"," ",(0,ei.jsx)(L.x,{as:"span",fontWeight:"bold",children:en})," ","permission."]})]})]})}),(0,ei.jsx)(S.k,{justify:"center",alignItems:"center",my:3,children:(0,ei.jsxs)(V.U,{spacing:1,as:"button",onClick:function(){return b(!x)},children:[x?(0,ei.jsx)(D.G,{fixedWidth:!0,size:"xs",icon:nn.on}):(0,ei.jsx)(D.G,{fixedWidth:!0,size:"xs",icon:ne.r8}),(0,ei.jsx)(L.x,{lineHeight:"normal",marginLeft:"auto",marginRight:"auto",fontSize:"xs",fontWeight:"medium",children:x?"Hide explanation":"How ".concat(np.Cg,"s work")})]})}),(0,ei.jsxs)(V.U,{background:"teal.50",fontSize:"sm",padding:3,borderRadius:"md",children:[(0,ei.jsx)(D.G,{icon:e7.RR}),(0,ei.jsxs)(L.x,{children:["Give your ",E._u," a nice Slack preview with our"," ",(0,ei.jsx)(eh.r,{href:"https://gamma.app/slack",isExternal:!0,fontWeight:600,textDecoration:"underline",children:"Slack app"}),"."]})]})]})]})]})]})},tc=t(46802),tl=t(34638),td=function(e){var n=e.visibility,t=e.isFromOtherOrg,i=(0,tl.ff)("white","var(--chakra-colors-gray-900)");return(0,ei.jsxs)(ei.Fragment,{children:[t&&(0,ei.jsx)(D.G,{icon:n3.Gg}),(0,ei.jsxs)(j.xu,{as:"span",className:"fa-layers fa-fw",children:[(0,ei.jsx)(D.G,{icon:n.primaryIcon}),n.secondaryIcon&&(0,ei.jsxs)(ei.Fragment,{children:[(0,ei.jsx)(D.G,{icon:tc.di,color:i,transform:"down-6 right-6"}),(0,ei.jsx)(D.G,{icon:n.secondaryIcon,transform:"shrink-7 right-6 down-6"})]})]})]})},tu=t(49294),tp=t(25793),th="embed-copied-toast",tf=function(e){var n=e.embedCode,t=e.isDisabled,i=e.docId,r=(0,U.p)(),o=(0,P.useState)(!1),s=o[0],a=o[1],c=(0,tu.V)(n),l=c.hasCopied,d=c.onCopy,u=(0,P.useRef)(null);(0,P.useEffect)(function(){u.current&&s&&(u.current.focus(),u.current.select())},[s]);var p=(0,P.useCallback)(function(){return a(!0)},[]),h=(0,P.useCallback)(function(){return a(!1)},[]),f=(0,P.useCallback)(function(){d(),r.isActive(th)||r({id:th,title:"Embed code copied to clipboard",status:"success",duration:5e3}),(0,nu.J)({docId:i,source:"sharePanel",type:"embed"})},[i,d,r]);return(0,ei.jsxs)(eZ.g,{spacing:4,align:"stretch",children:[(0,ei.jsx)(tp.g,{ref:u,rows:5,variant:"filled",fontFamily:"mono",colorScheme:"gray",disabled:t,onClick:p,onBlur:h,isReadOnly:!0,resize:"none",pointerEvents:t?"none":void 0,children:n}),(0,ei.jsx)(O.z,{alignSelf:"flex-end",onClick:f,isDisabled:t,size:"sm",children:l?"Copied":"Copy embed code"})]})};function tm(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,i)}return t}function tx(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?tm(Object(t),!0).forEach(function(n){(0,e4.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):tm(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var tb=function(e){var n=e.doc,t=e.isSharePublic,i=e.isConnected,r=e.onSharePanelOpen,o=e.onSharePanelClose,s=(0,U.p)(),c=(0,P.useState)(!!n.publicAccess),l=c[0],d=c[1],u=(0,_.o6I)(),h=(0,G.Z)(u,1)[0],f=(0,P.useMemo)(function(){var e=(0,nm.Gn)({docId:n.id,docTitle:n.title,path:"public",absolute:!0});return t?e:(0,nm.lT)({docId:n.id,docTitle:n.title})},[n.id,n.title,t]),m=(0,P.useCallback)(function(e){d(e.target.checked);var t={id:n.id,publicAccess:e.target.checked?_.y3$.View:null};h({variables:t,optimisticResponse:{updateDoc:tx(tx({},t),{},{__typename:"Doc"})}}).then(function(){s({title:"Public access ".concat(e.target.checked?"enabled":"removed"),status:"success",duration:5e3,isClosable:!0,position:"top"})})},[n.id,s,h]),x=n.publicAccess?nF[_.y3$.View].title:nF[a.NoAccess].title,b=t?(0,ei.jsxs)(ei.Fragment,{children:["Let anyone with a link view a"," ",(0,ei.jsx)(E.kH,{placement:"top",label:"They won't be able to see other people active in the ".concat(E._u,", or follow along if you're presenting."),"aria-label":"public access is read only",children:(0,ei.jsx)(L.x,{as:"span",borderBottom:"0.125em dashed",borderColor:"gray.400",cursor:"help",children:"read-only"})})," ","version of your ",E._u,"."]}):"Enable public access to embed a copy of your ".concat(E._u," anywhere online.");return(0,ei.jsxs)(ei.Fragment,{children:[(0,ei.jsx)(L.x,{fontSize:"sm",color:"gray.600",pt:2,children:b}),(0,ei.jsx)(n2,{showDivider:!1,children:(0,ei.jsx)(nX,{title:"Public access",testId:"public-access",subtitle:(0,ei.jsx)(n5,{subtitle:"Anyone with a link can view",tooltipLabel:np.gP,ariaLabel:"Anyone with a link can view",icon:ni.faCircleInfo}),img:(0,ei.jsx)(ng,{icon:p.Xj}),isDisabled:!i,disabledText:x,permissionsControl:(0,ei.jsx)(eP.NI,{children:(0,ei.jsx)(eX.r,{id:"public-access",isChecked:l,onChange:m})})})}),(0,ei.jsx)(E.kH,{label:"Enable public access to ".concat(t?"copy the public share link.":"get the embed code."),placement:"top",isDisabled:l,children:(0,ei.jsx)(j.xu,{children:t?(0,ei.jsx)(E.Iq,{isDisabled:!n.publicAccess,url:f,customLabel:"Copy public link",buttonWidth:"10rem",onClick:function(){(0,nu.J)({docId:n.id,source:"sharePanel",type:"public"})}}):(0,ei.jsx)(tf,{embedCode:f,isDisabled:!l,docId:n.id})})}),(0,ei.jsx)(e1,{onSharePanelClose:o,onSharePanelOpen:r,segmentEvent:eB.AA.GAMMA_PRO_UPSELL_SHARE_SETTINGS_REMOVE_WATERMARK,doc:n})]})},tj=function(e){var n,t=e.doc,i=e.editor,r=e.isSharePanelOpen,o=e.onSharePanelClose,s=e.onSharePanelOpen,a=e.onAnalyticsPanelOpen,z=e.view,G=e.setView,R=(0,P.useRef)(!1),N=(0,eU.SE)(),U=N.user,L=N.currentWorkspace,M=(0,_.$gs)().isConnected,Z=(0,A.ye)("publishing"),W=(0,eU.py)("manage",t),F=W&&a,V=(0,P.useState)(function(){return function(){return Promise.resolve()}}),H=V[0],B=V[1],$=(0,P.useCallback)(function(){H().then(function(){G("invite"),o()},function(){console.debug("[handleSharePanelClose] CollaboratorSearchBar rejected \uD83D\uDC4E\uD83C\uDFFC")})},[G,o,H]),K=(0,P.useCallback)(function(){a&&(o(),a())},[a,o]);if(!U)return null;var q=(0,T.h_)(t,U),J=q?T.IK[q]:null,X=(0,T.Gi)(t,L);if(t&&null===J)return console.error("[SharePanel] Unknown VisibilityValue for doc",t),null;var Y=null==t?void 0:null===(n=t.organization)||void 0===n?void 0:n.id;return!t||Y||R.current||(console.error("[SharePanelModal] Doc unexpectedly doesnt have a workspaceId",{docId:t.id,organization:t.organization}),R.current=!0),(0,ei.jsx)(E.Wk,{isDark:!1,children:(0,ei.jsxs)(f.u_,{onEsc:$,isOpen:r,onClose:o,trapFocus:!1,size:"3xl",returnFocusOnClose:!1,children:[(0,ei.jsx)(m.Z,{}),(0,ei.jsxs)(x.h,{"data-share-panel-modal-content":!0,children:[(0,ei.jsxs)(b.x,{children:[J&&(0,ei.jsx)(j.xu,{as:"span",mr:3,children:(0,ei.jsx)(td,{visibility:J,isFromOtherOrg:X})}),t?"Share ".concat(t.title):"Share"]}),(0,ei.jsx)(g.o,{"data-share-panel-close-button":!0,onClick:function(e){e.preventDefault(),$()}}),(0,ei.jsx)(v.i,{}),t?(0,ei.jsx)(y.f,{pb:6,"data-testid":"share-panel-modal-body",children:t&&Y&&(0,ei.jsxs)(ei.Fragment,{children:[W&&(0,ei.jsxs)(k.E,{my:4,children:[(0,ei.jsx)(k.U,{children:(0,ei.jsx)(O.z,{leftIcon:(0,ei.jsx)(D.G,{icon:h.FK,"aria-label":"Invite others"}),variant:"ghost",size:"sm",fontWeight:"600",bg:"invite"===z?"trueblue.50":"transparent",color:"invite"===z?"trueblue.500":"gray.600",onClick:function(){return G("invite")},children:"Invite others"})}),(0,ei.jsx)(k.U,{children:(0,ei.jsx)(O.z,{leftIcon:(0,ei.jsx)(D.G,{icon:p.Xj,"aria-label":"Share publicly"}),variant:"ghost",size:"sm",fontWeight:"600",bg:"public"===z?"trueblue.50":"transparent",color:"public"===z?"trueblue.500":"gray.600",onClick:function(){return G("public")},children:"Share publicly"})}),(0,ei.jsx)(k.U,{children:(0,ei.jsx)(O.z,{leftIcon:(0,ei.jsx)(D.G,{icon:u.fu,"aria-label":"Export"}),variant:"ghost",size:"sm",fontWeight:"600",bg:"export"===z?"trueblue.50":"transparent",color:"export"===z?"trueblue.500":"gray.600",onClick:function(){return G("export")},children:"Export"})}),Z&&W&&(0,ei.jsx)(k.U,{children:(0,ei.jsx)(O.z,{leftIcon:(0,ei.jsx)(D.G,{icon:d.Rk,"aria-label":"Publish website"}),variant:"ghost",size:"sm",fontWeight:"600",bg:"publish"===z?"trueblue.50":"transparent",color:"publish"===z?"trueblue.500":"gray.600",onClick:function(){return G("publish")},children:"Publish website"})}),(0,ei.jsx)(k.U,{children:(0,ei.jsx)(O.z,{leftIcon:(0,ei.jsx)(D.G,{icon:l.dT,"aria-label":"Embed"}),variant:"ghost",size:"sm",fontWeight:"600",bg:"embed"===z?"trueblue.50":"transparent",color:"embed"===z?"trueblue.500":"gray.600",onClick:function(){return G("embed")},children:"Embed"})})]}),"publish"===z&&t&&(0,ei.jsx)(eN,{workspaceId:Y,doc:t,user:U}),(!W||"invite"==z)&&(0,ei.jsx)(ta,{workspaceId:Y,doc:t,user:U,setVerifySearchDone:B,canManage:W,isFromOtherOrg:X}),W&&("public"===z||"embed"===z)&&(0,ei.jsx)(tb,{doc:t,isSharePublic:"public"==z,isConnected:M,onSharePanelOpen:s,onSharePanelClose:o}),W&&"export"===z&&(0,ei.jsx)(e2,{doc:t,editor:i,onSharePanelOpen:s,onSharePanelClose:o})]})}):(0,ei.jsx)(y.f,{pb:6,"data-testid":"share-panel-modal-body",children:(0,ei.jsxs)(w.K,{children:[(0,ei.jsx)(C.O,{height:"55px"}),(0,ei.jsx)(C.O,{height:"55px"}),(0,ei.jsx)(C.O,{height:"55px"}),(0,ei.jsx)(C.O,{height:"55px"})]})}),(0,ei.jsx)(v.i,{}),(0,ei.jsx)(I.m,{children:(0,ei.jsxs)(S.k,{justifyContent:F?"space-between":"flex-end",flex:1,children:[F&&(0,ei.jsx)(O.z,{isDisabled:!M,leftIcon:(0,ei.jsx)(D.G,{icon:c.M}),variant:"ghost",onClick:K,children:"View analytics"}),(0,ei.jsx)(O.z,{onClick:function(e){e.preventDefault(),$()},variant:"solid",children:"Done"})]})})]})]})})}},97473:function(e,n,t){t.d(n,{Z:function(){return l}});var i=t(12741),r=t(81333),o=t(55479),s=t(42751),a=t(2784),c=t(24553),l=function(){var e=(0,o.p)(),n=(0,c.yx3)({refetchQueries:["GetChannelDocActivity","GetChannels"]}),t=(0,r.Z)(n,1)[0];return{addDocChannel:(0,a.useCallback)(function(n){var r=n.docId,o=n.doc,a=n.channel,l=n.existingChannels,d=r||(null==o?void 0:o.id);if(!d){console.error("Invalid docid");return}var u={input:{docId:d,sharing:[{op:c.Bdm.Add,path:"/channels",value:[{channelId:a.id}]}]}},p=(null==o?void 0:o.title)||s._u,h=[].concat((0,i.Z)(void 0===l?[]:l),[{id:a.id,slug:a.slug,name:a.name,permission:c.y3$.Comment}]).sort(function(e,n){return e.slug.localeCompare(n.slug,"en")});t({variables:u,update:function(e,n){var t=n.data;e.writeFragment({id:"Doc:".concat(d),fragment:c.IiT,data:null==t?void 0:t.updatePublicChannels})},optimisticResponse:{updatePublicChannels:{id:u.input.docId,channels:h}}}).then(function(){e({title:"Added ".concat(p," to ").concat(s.sj),description:"This ".concat(s._u," has been added to ").concat(a.name),status:"success",duration:5e3,isClosable:!0,position:"top"})},function(n){e({title:"Error adding ".concat(p," to ").concat(s.sj," ").concat(a.name),description:n.message,duration:null,status:"error",isClosable:!0,position:"top"})})},[t,e]),removeDocChannel:(0,a.useCallback)(function(n,i){if(i){var r,o={input:{docId:n.id,sharing:[{op:c.Bdm.Remove,path:"/channels",value:[{channelId:i}]}]}};t({variables:o,update:function(e,t){var i=t.data;e.writeFragment({id:"Doc:".concat(n.id),fragment:c.P6u,data:null==i?void 0:i.updatePublicChannels})},optimisticResponse:{updatePublicChannels:{id:o.input.docId,channels:null===(r=n.channels)||void 0===r?void 0:r.filter(function(e){return e.id!==i})}}}).then(function(){e({title:"".concat((0,s.kC)(s._u)," removed from ").concat(s.sj,"."),status:"success",duration:1e4,position:"top"})}).catch(function(n){e({title:"Error removing ".concat(s.sj,":"),description:n.message,status:"error",duration:3e3,isClosable:!0,position:"top"}),console.error("[addRemoveDocChannel] Error removing channel:",n.message)})}},[t,e])}}},8276:function(e,n,t){t.d(n,{Gi:function(){return g},IK:function(){return w},h_:function(){return C},nZ:function(){return I},qw:function(){return k},uG:function(){return S}});var i,r=t(12741),o=t(95235),s=t(52622),a=t(11530),c=t(53110),l=t(70110),d=t(43794),u=t(60239),p=t(60670),h=t(76547),f=t(61751),m=t(42751),x=t(20435),b=t(35157),j=t(25180),g=function(e,n){var t;return(null==e?void 0:null===(t=e.organization)||void 0===t?void 0:t.id)!==(null==n?void 0:n.id)},v={PRIVATE:"private",LINK_VIEW:"link-view",LINK_COMMENT:"link-comment",LINK_EDIT:"link-edit",INDIVIDUAL:"individual",ORG_VIEW:"org-view",ORG_COMMENT:"org-comment",ORG_EDIT:"org-edit",ORG_MANAGE:"org-manage",CHANNEL_PRIVATE:"channel-private",PUBLIC:"public"},y=[v.ORG_VIEW,v.ORG_COMMENT,v.ORG_EDIT,v.ORG_MANAGE],w=(i={},(0,o.Z)(i,v.PRIVATE,{title:function(){return"This ".concat(m._u," is private.")},subtitle:function(){return"Only you can view and edit this ".concat(m._u,".")},primaryIcon:c.by}),(0,o.Z)(i,v.LINK_VIEW,{title:function(){return"This ".concat(m._u," is viewable by anyone with the link.")},primaryIcon:f.nN}),(0,o.Z)(i,v.LINK_COMMENT,{title:function(){return"This ".concat(m._u," is viewable and commentable by anyone with the link.")},primaryIcon:f.nN}),(0,o.Z)(i,v.LINK_EDIT,{title:function(){return"This ".concat(m._u," is editable by anyone with the link.")},primaryIcon:f.nN}),(0,o.Z)(i,v.INDIVIDUAL,{title:function(){return"This ".concat(m._u," is only shared with specific users.")},subtitle:function(e){return"".concat(e," can access this ").concat(m._u,".")},primaryIcon:a.IL}),(0,o.Z)(i,v.ORG_VIEW,{title:function(e){return"This ".concat(m._u," is viewable by everyone at ").concat(e,".")},primaryIcon:s.P8,secondaryIcon:h.Md}),(0,o.Z)(i,v.ORG_COMMENT,{title:function(e){return"This ".concat(m._u," is viewable and commentable by everyone at ").concat(e,".")},primaryIcon:s.P8,secondaryIcon:p.Mz}),(0,o.Z)(i,v.ORG_EDIT,{title:function(e){return"This ".concat(m._u," is editable by everyone at ").concat(e,".")},primaryIcon:s.P8,secondaryIcon:u.Tz}),(0,o.Z)(i,v.ORG_MANAGE,{title:function(e){return"This ".concat(m._u," is editable and shareable by everyone at ").concat(e,".")},primaryIcon:s.P8}),(0,o.Z)(i,v.CHANNEL_PRIVATE,{title:function(){return"Only ".concat(m.sj," members have access.")},primaryIcon:x.Ty}),(0,o.Z)(i,v.PUBLIC,{title:function(){return"This ".concat(m._u," is publicly viewable.")},primaryIcon:l.Xj}),i),C=function(e,n){var t;return e?null!=e&&e.publicAccess?v.PUBLIC:(null==e?void 0:e.orgAccess)==="manage"?v.ORG_MANAGE:(null==e?void 0:e.orgAccess)==="edit"?v.ORG_EDIT:(null==e?void 0:e.orgAccess)==="comment"?v.ORG_COMMENT:(null==e?void 0:e.orgAccess)==="view"?v.ORG_VIEW:null!=e&&e.channels&&e.channels.some(function(e){return null!==e.permission})?v.CHANNEL_PRIVATE:null!=e&&e.collaborators&&(null==e?void 0:null===(t=e.collaborators)||void 0===t?void 0:t.length)>1?v.INDIVIDUAL:null!=e&&e.accessLinks&&e.accessLinks.some(function(e){return"view"===e.permission&&""===e.token})?v.LINK_VIEW:null!=e&&e.accessLinks&&e.accessLinks.some(function(e){return"comment"===e.permission&&""===e.token})?v.LINK_COMMENT:null!=e&&e.accessLinks&&e.accessLinks.some(function(e){return"edit"===e.permission&&""===e.token})?v.LINK_EDIT:S(e,n)?v.PRIVATE:v.INDIVIDUAL:null},k=function(e){return null!=e&&e.publicAccess?"Anyone with the link can open this ".concat(m._u,"."):null!=e&&e.orgAccess?"Only workspace ".concat(b.pd,"s and those invited can open this ").concat(m._u,"."):"Only those invited can open the link to this ".concat(m._u,".")},O=function(e,n,t){if(!n)return[];var i,o,u=(null==e?void 0:null===(i=e.channels)||void 0===i?void 0:i.map(function(e){var n=e.id,t=e.name,i=e.slug;return{id:n,label:t,href:(0,j.j)({id:n,slug:i}),icon:x.Ty}}))||[],p=C(e,n),h=g(e,t),f=h?[{id:"shared-from-external-org",label:"Shared from ".concat((null==e?void 0:null===(o=e.organization)||void 0===o?void 0:o.name)||"an external workspace"),icon:d.Gg,color:"gray.500"}]:[];if(p===v.PUBLIC)return[{id:"public",label:"Public",icon:l.Xj,color:"gray.500"}].concat(f,(0,r.Z)(u));if(p===v.PRIVATE)return[{id:"private",label:"Private",icon:c.by,color:"gray.500"}].concat(f);if(p===v.INDIVIDUAL){var m=(e.collaborators||[]).filter(function(e){return e.user.id!==n.id}).length;return[{id:"collaborators",label:m>0?"Shared with ".concat(m," ").concat(1===m?"other":"others"):"Shared",icon:a.IL,color:"gray.500"}].concat(f)}return h?f:p&&y.includes(p)?[{id:"workspace",label:"Shared",icon:s.P8,color:"gray.500"}].concat(f,(0,r.Z)(u)):u},I=function(e){var n=e.doc,t=e.user,i=e.currentWorkspace,r=e.channelToExclude;return O(n,t,i).filter(function(e){return e.id!==r})},S=function(e,n){var t;return e&&n&&!e.orgAccess&&!e.publicAccess&&(null===(t=e.createdBy)||void 0===t?void 0:t.id)===n.id}}}]);
//# sourceMappingURL=4439-33837855c9121dbc.js.map