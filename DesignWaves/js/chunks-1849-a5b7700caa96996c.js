"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1849],{3510:function(e,t,r){r.d(t,{R:function(){return h},c:function(){return O}});var n=r(20406),o=r(95235),c=r(81333),i=r(28526),a=r.n(i),u=r(55479),d=r(5632),l=r(2784),s=r(24553),p=r(69262),f=r(83775),v=r(4640),m=r(27628),b=r(33660);function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}var h={example_deck_clone_toast:s.L17.DuplicateInspiration,import:s.L17.ImportGoogleDoc,blank:s.L17.Blank,template_browser:s.L17.DuplicateTemplate,get_started_modal:s.L17.Blank,template_modal_griditem:s.L17.DuplicateTemplate,template_dashboard_griditem:s.L17.DuplicateTemplate,template_modal_preview:s.L17.DuplicateTemplate,template_modal_preview_create_theme:s.L17.DuplicateTemplate,"slash-new":s.L17.SlashNew,editor_toolbar_doc_menu_duplicate:s.L17.DuplicateDoc,dashboard_docs_view_duplicate:s.L17.DuplicateDoc,ai_generated:s.L17.AiGenerated,ai_generated_advanced:s.L17.AiGenerated},O=function(){var e=(0,b.SE)(),t=e.user,r=e.currentWorkspace,i=(0,p.ye)("cardLayoutsEnabled"),O=(0,s.CsQ)(),y=(0,c.Z)(O,2),w=y[0],j=y[1],D=j.data,_=j.loading,E=(0,d.useRouter)(),k=E.push,P=E.replace,x=(0,u.p)();return[(0,l.useCallback)(function(e){var c,u,d=null==t?void 0:null===(u=t.settings)||void 0===u?void 0:u.needsEditorOnboarding,l=e.source,s=null==e?void 0:e.channelId,p=(null==e?void 0:e.historyFn)==="replace"?P:k;if(!(null!=r&&r.id)){console.error("[createDocAndNavigate] No currentWorkspace found");return}var b={cardLayoutsEnabled:i},O=null!=e&&e.document?e.document:"empty"==(d?"quickstart":"empty")?(0,v.R$)(t,{docFlags:b}):(0,v.VK)(t,{docFlags:b}),y=(0,m.q)(O);return console.debug("[createDocAndNavigate] Creating doc",{document:O,encodedDocument:y}),w({variables:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach(function(t){(0,o.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({workspaceId:null==r?void 0:r.id,title:(null==e?void 0:e.title)||"",source:h[e.source],initialContent:{ydoc:y,schemaVersion:v.bI,editors:[null==t?void 0:t.id]}},s?{channels:[{channelId:s}]}:{})}).then((c=(0,n.Z)(a().mark(function e(t){var r;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=t.data,(0,f.Q)({doc_id:null==r?void 0:r.createDoc.id,source:l,channel:s||null}),console.debug("[createDocAndNavigate] Doc created. Navigating to Editor",null==r?void 0:r.createDoc.id),p("/docs/".concat(null==r?void 0:r.createDoc.id).concat(d?"?tour=true":""));case 4:case"end":return e.stop()}},e)})),function(e){return c.apply(this,arguments)})).catch(function(e){console.error("[createDocAndNavigate]",e),x({title:"Error creating document",description:e.message,position:"top",status:"error",isClosable:!0,duration:null})})},[i,w,null==r?void 0:r.id,k,P,x,t]),{data:D,loading:_}]}},30959:function(e,t,r){r.d(t,{p:function(){return v}});var n=r(95235),o=r(28871),c=r(54073),i=r.n(c),a=r(30764),u=r(2784),d=r(69262),l=r(22087),s=r(16981),p=r(69479);function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}var v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,r=(0,l.TL)(),n=(0,d.ye)("cardTextComputedEnabled");(0,u.useEffect)(function(){if(t&&n){var e=i()(function(){var e={};t.state.doc.descendants(function(r,n){if((0,s.KH)(r)&&r.attrs.id){var c=r.toJSON(),i=(0,o.getCardTitle)(c),a=t.state.doc.resolve(n),u=0===a.parentOffset&&1===a.depth;e[r.attrs.id]={title:i,text:m(t.schema,c,i),isFirstCard:u}}return!0}),r((0,p.uD)({localCardTextMap:e}))},1e3);return e(),t.on("update",e),function(){t.off("update",e)}}},[t,r,n]),(0,u.useEffect)(function(){e&&r((0,p.eJ)({cards:e}))},[r,e]),(0,u.useEffect)(function(){return function(){r((0,p.mc)())}},[])},m=function(e,t,r){var c,i=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},t);i.content=null===(c=i.content)||void 0===c?void 0:c.map(function(e){if("card"!==e.type)return e;var t=(0,o.getCardTitle)(e);return{type:"paragraph",content:t?[{type:"text",text:t}]:[]}});var u=a.NB.fromJSON(e,i),d=u.textBetween(0,u.content.size,"\n\n",function(e){var t=e.type.name;return b[t]&&b[t](e)||" "});return r?(0,o.removeTitle)(d,r):d},b={text:function(e){return e.text},emoji:function(e){return e.attrs.native},embed:function(e){var t=e.attrs,r=t.meta,n=t.sourceUrl,o=t.url;return(null==r?void 0:r.title)||n||o||void 0},mention:function(e){return"@"+e.attrs.label},video:function(e){var t=e.attrs,r=t.meta,n=t.sourceUrl,o=t.embedUrl;return(null==r?void 0:r.title)||n||o||void 0}}},60096:function(e,t,r){r.d(t,{R4:function(){return n.R},dU:function(){return o.dU},Yt:function(){return o.Yt},hA:function(){return o.hA}}),r(83216);var n=r(17129),o=r(44907)},83775:function(e,t,r){r.d(t,{J:function(){return i},Q:function(){return c}});var n=r(29999),o=r(12067),c=function(e){var t=e.doc_id,r=e.source,c=e.source_doc_id,i=e.channel;null===n.co||void 0===n.co||n.co.track(o.AA.DOC_CREATED,{doc_id:t,source_doc_id:c,source:r,channel:i})},i=function(e){var t=e.docId,r=e.type,c=e.source;if(!t){console.debug("[trackDocShareLinkCopiedEvent]: doc_id is required");return}null===n.co||void 0===n.co||n.co.track(o.AA.DOC_SHARELINK_COPIED,{doc_id:t,source:c,type:r})}},99121:function(e,t,r){r.d(t,{n:function(){return y}});var n=r(95235),o=r(53738),c=r(11919),i=r(91012),a=r(34676),u=r(2784),d=r(68358),l=r(23649),s=r(11625),p=r(79898),f=r(73057),v=r(94410),m=r(8836),b=r(38675),g=r(52322);function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var y=(0,u.memo)(function(e){var t,r=e.theme,n=e.variant,u=r.config.contentStyles,h=(0,p.R5)(r),y=(0,d.wj)(r),w=(0,m.l)(r),j=(0,f.J)(r,!1),D=(0,b.c)(r),_=(0,p.wh)(h,y,!0),E=null===(t=r.config.accentBackgrounds)||void 0===t?void 0:t[0],k=E?(0,p.wh)(E,y,!0):{};return(0,g.jsx)(o.xu,{css:w,sx:j,w:"100%",children:(0,g.jsxs)(c.k,O(O({borderTopRadius:"ghost"===(void 0===n?"outline":n)?"none":"md",boxShadow:"sm",_focus:{boxShadow:"outline"},p:4,minH:"9em",maxH:"9em",transitionProperty:"common",transitionDuration:"normal"},_),{},{backgroundAttachment:"initial",direction:"row",align:"center",children:[(0,g.jsx)(l.P,{theme:r}),(0,g.jsxs)(o.xu,O(O({sx:O(O({},D.cardSx),u)},E?{display:"grid",gridTemplateRows:"minmax(2.5em, auto) auto",gridTemplateAreas:'"accent" "body"',gridTemplateColumns:"1fr",overflow:"hidden"}:{}),{},{borderRadius:"base",className:"".concat(s.pL," ").concat(y?"is-dark":""),color:y?"white":"gray.900",flex:1,pointerEvents:"none",children:[E&&(0,g.jsx)(o.xu,O({gridArea:'"accent"'},k)),(0,g.jsxs)(o.xu,{gridArea:E?'"body"':void 0,py:E?2:4,px:4,children:[(0,g.jsx)(i.x,{className:"block-title",mt:"0 !important",mb:"".concat(E?"0":"var(--chakra-space-1)"," !important"),children:(0,g.jsx)(i.x,{as:"span",className:(0,a.cx)("title",v.A8),fontSize:"1.6em !important",paddingBottom:"0 !important",children:"Title"})}),(0,g.jsxs)(i.x,{fontSize:"var(--chakra-fontSizes-sm) !important",noOfLines:3,className:"block block-paragraph",my:"0 !important",children:["Body &"," ",(0,g.jsx)(i.x,{as:"a",className:"link",children:"link"})]})]})]}))]}))})});y.displayName="ThemePreviewThumbnail"},48230:function(e,t,r){r.d(t,{e:function(){return g}});var n=r(95235),o=r(81333),c=r(55479),i=r(42751),a=r(5632),u=r(2784),d=r(24553),l=r(3510),s=r(29999),p=r(83775),f=r(33660),v=r(50360),m=r(27628);function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}var g=function(){var e=(0,d.So6)({refetchQueries:["GetDocs"]}),t=(0,o.Z)(e,1)[0],r=(0,a.useRouter)().push,g=(0,c.p)(),h=(0,f.SE)(),O=h.user,y=h.currentWorkspace,w=(0,s.z$)();return(0,u.useCallback)(function(e){var o,c=e.docId,a=e.docTitle,u=e.initialContent,d=e.channelId,f=e.source,h=e.openThemeEditor,j=e.onSuccess,D=e.newWindow,_=null==O?void 0:null===(o=O.settings)||void 0===o?void 0:o.needsEditorOnboarding;if(!c)return Promise.reject(Error("Cannot duplicate without a docId"));var E=g({id:"duplicate-toast-".concat(c),isClosable:!1,position:"top",status:"loading",variant:"light",duration:null,title:"Copying ".concat(i._u,"...")});return O&&null!=y&&y.id?t({variables:{duplicateDocInput:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({orgId:null==y?void 0:y.id,sourceDocId:c,source:l.R[f],initialContent:u?{ydoc:(0,m.q)(u),schemaVersion:v.bI,editors:[null==O?void 0:O.id]}:void 0},d?{channels:[{channelId:d}]}:{})}}).then(function(e){if(!(null!=e&&null!==(t=e.data)&&void 0!==t&&t.duplicateDoc))throw Error("No data received");null==w||w.track(s.AA.EXAMPLE_DUPLICATED,{doc_id:c,title:a,source:f});var t,n,o=(null==e?void 0:null===(n=e.data)||void 0===n?void 0:n.duplicateDoc).id;(0,p.Q)({doc_id:o,source:f,source_doc_id:c}),console.debug("[Duplicate.".concat(f,"] ").concat((0,i.kC)(i._u)," duplicated New doc id (").concat(o,"). Navigating to Editor")),g.update(E,{status:"success",description:"Success",duration:5e3,isClosable:!0});var u=h?"/docs/".concat(o).concat(h?"?openThemeEditor=true":""):_?"/docs/".concat(o,"?tour=true"):"/docs/".concat(o);D?window.open(u,"_blank"):r(u),j&&o&&j(o)},function(e){console.error("[Duplicate.".concat(f,"] Error duplicating doc:"),e.message),g.update(E,{title:"Error duplicating doc",description:e.message,status:"error",duration:null,isClosable:!0})}).catch(function(e){console.error("[Duplicate.".concat(f,"] Error duplicating doc:"),e.message),g.update(E,{title:"Error duplicating doc",description:e.message,status:"error",duration:null,isClosable:!0})}):(console.error("[Duplicate.".concat(f,"] Cannot duplicate without a user or workspace"),{user:O}),Promise.reject(Error("Cannot duplicate without a user or workspace")))},[null==y?void 0:y.id,O,g,t,w,r])}},93143:function(e,t){t.Z={src:"/_next/static/media/Sal-Spray.5abcbf19.svg",height:1657,width:2161}}}]);
//# sourceMappingURL=1849-a5b7700caa96996c.js.map