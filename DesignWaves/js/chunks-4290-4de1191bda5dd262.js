"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4290],{4757:function(e,t,r){r.d(t,{Ii:function(){return k},TL:function(){return j}});var n,o=r(20406),i=r(12741),s=r(96412),a=r(13089),c=r(95235),u=r(81333),l=r(28526),d=r.n(l),p=r(24553),m=r(86508),f=r(42584),g=r(14114);function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach(function(t){(0,c.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var x={temperature:.5,maxTokens:2e3,model:"gpt-3.5-turbo"},b=function(e,t){var r=Object.entries(t).reduce(function(t,r){var n=(0,u.Z)(r,2),o=n[0],i=n[1];return e.variables.includes(o)?t+(0,g.J1)(i):t},0);return e.length/g.ie+r},j=function(){function e(t){var r=t.variables,n=t.systemPrompt,o=t.systemPromptOperation,i=t.userPrompt,a=t.userPromptOperation,u=t.openAiParams;(0,s.Z)(this,e),(0,c.Z)(this,"variables",void 0),(0,c.Z)(this,"systemPrompt",void 0),(0,c.Z)(this,"systemPromptOperation",void 0),(0,c.Z)(this,"userPrompt",void 0),(0,c.Z)(this,"userPromptOperation",void 0),(0,c.Z)(this,"openAiParams",void 0),this.variables=r,this.systemPrompt=n,this.systemPromptOperation=o,this.userPrompt=i,this.userPromptOperation=a,this.openAiParams=v(v({},x),u)}return(0,a.Z)(e,[{key:"generate",value:function(e){var t=e.variables,r=e.history,n=e.interactionId,o=e.params,s=v({role:p.XaP.System},this.systemPromptOperation?{operation:this.systemPromptOperation.operation,variables:t}:{content:y(this.systemPrompt,t)}),a=v({role:p.XaP.User},this.userPromptOperation?{operation:this.userPromptOperation.operation,variables:t}:{content:y(this.userPrompt,t)}),c=this.filterHistory(void 0===r?[]:r,a,s,n),u=m.VH.get("azureOpenAI")?"azure":"openai";return{messages:[s].concat((0,i.Z)(c),[a]),params:v(v({provider:u},this.openAiParams),o)}}},{key:"filterHistory",value:function(e,t,r,n){var o=(t.content?(0,g.J1)(t.content):b(this.userPromptOperation,t.variables))+(t.content?(0,g.J1)(r.content):b(this.systemPromptOperation,r.variables)),i=4e3-this.openAiParams.maxTokens-o;if(i<0)throw new f.Iy("Not enough tokens to generate a response.",{chatMessage:"Sorry, this card is too big for me to edit. Please try again with a smaller card.",userMessage:t.content,systemMessage:r.content,params:this.openAiParams,userSystemTokens:o,interactionId:n});for(var s=e.length-1;s>=0;s--){var a=e[s],c=(0,g.J1)(a.content);if(i-c<0)return e.slice(s+1);i-=c}return e}},{key:"toJson",value:function(){return{variables:this.variables,systemPrompt:this.systemPrompt,userPrompt:this.userPrompt,openAiParams:this.openAiParams}}}]),e}();function y(e,t){var r=e;for(var n in t)r=r.replaceAll("{{".concat(n,"}}"),t[n]);return r}var k=(n=(0,o.Z)(d().mark(function e(t,r){var n,o,i,s,a,c=arguments;return d().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=c.length>2&&void 0!==c[2]?c[2]:{},s=m.VH.get("aiRequestRetries").chat,i.retries=null!==(n=i.retries)&&void 0!==n?n:s,e.next=5,(0,g._j)(t.messages,t.params,r,i);case 5:return a=e.sent,e.abrupt("return",null==a?void 0:null===(o=a.chatCompletion)||void 0===o?void 0:o[0].content);case 7:case"end":return e.stop()}},e)})),function(e,t){return n.apply(this,arguments)})},42584:function(e,t,r){r.d(t,{$D:function(){return f},An:function(){return m},Iy:function(){return h},ME:function(){return g},Og:function(){return p},eo:function(){return v}});var n=r(13089),o=r(96412),i=r(41701),s=r(90129),a=r(29017),c=r(48200),u=r(3907),l=r(95235);function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=(0,c.Z)(e);if(t){var o=(0,c.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,a.Z)(this,r)}}var p=function(e){(0,s.Z)(r,e);var t=d(r);function r(e){var n,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,o.Z)(this,r),n=t.call(this,e),(0,l.Z)((0,i.Z)(n),"opts",void 0),n.opts=s,n}return(0,n.Z)(r)}((0,u.Z)(Error));p.prototype.name="DesignPartnerError";var m=function(e){(0,s.Z)(r,e);var t=d(r);function r(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,o.Z)(this,r),t.call(this,e,n)}return(0,n.Z)(r)}(p);m.prototype.name="CouldNotApplySuggestionError";var f=function(e){(0,s.Z)(r,e);var t=d(r);function r(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,o.Z)(this,r),t.call(this,e,n)}return(0,n.Z)(r)}(p);f.prototype.name="InvalidResponseError";var g=function(e){(0,s.Z)(r,e);var t=d(r);function r(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,o.Z)(this,r),t.call(this,e,n)}return(0,n.Z)(r)}(p);g.prototype.name="NoopSuggestionError";var h=function(e){(0,s.Z)(r,e);var t=d(r);function r(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,o.Z)(this,r),t.call(this,"InputTooLongError: ".concat(e),n)}return(0,n.Z)(r)}(p);h.prototype.name="InputTooLongError";var v=function(e){(0,s.Z)(r,e);var t=d(r);function r(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,o.Z)(this,r),t.call(this,"ParsedSuggestionError: ".concat(e),n)}return(0,n.Z)(r)}(p);g.prototype.name="ParsedSuggestionError"},6608:function(e,t,r){r.d(t,{c:function(){return s}});var n=r(72338),o=r(30764),i=r(2408),s=function(e,t){var r=a(e),n=o.HY.from(t),s=r.serializeFragment(n),c=(0,i.SN)(s),u=document.createElement("div");return u.appendChild(c),u.innerHTML},a=function(e){var t=e.schema,r=e.extensionManager;if(t.cached.aiDomSerializer)return t.cached.aiDomSerializer;var i=o.PW.marksFromSchema(t),s=o.PW.nodesFromSchema(t),a=e.extensionManager.attributes;r.extensions.forEach(function(e){if(e.config.renderHTMLforAI){var t=a.filter(function(t){return t.type===e.name});s[e.name]&&(s[e.name]=function(r){var o=(0,n.m7)(r,t);return e.config.renderHTMLforAI.bind(e)({node:r,HTMLAttributes:o})}),i[e.name]&&(i[e.name]=function(r,o){var i=(0,n.m7)(r,t);return e.config.renderHTMLforAI.bind(e)({mark:r,inline:o,HTMLAttributes:i})})}});var c=new o.PW(s,i);return t.cached.aiDomSerializer=c,c}},19165:function(e,t,r){r.d(t,{y:function(){return d}});var n,o=r(20406),i=r(28526),s=r.n(i),a=r(72338),c=r(4640),u=r(49333),l=r(7008),d=(n=(0,o.Z)(s().mark(function e(t){var r,n,o,i,d=arguments;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:{},e.next=3,(0,l.T)(t,r);case 3:return n=e.sent,o=(0,c.yg)(),i=(0,a.J1)(o),e.abrupt("return",(0,u.Tk)(n,i));case 7:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)})},83476:function(e,t,r){r.d(t,{T:function(){return p}});var n=r(20406),o=r(28526),i=r.n(o),s=r(2784),a=r(24553),c=r(22087),u=r(93230),l=r(66564),d=r(1533),p=function(){var e,t=(0,d._)().editor,r=null==t?void 0:t.gammaDocId,o=(0,u.vi)({docId:r,editor:t}).updateDocThemeWithAccentImages,p=(0,c.CG)(l.F_),m=(0,s.useCallback)(function(e){return p===e},[p]),f=(0,a.WQq)();return{setThemeWithAccentImages:o,isThemeApplied:m,currentThemeId:p,isValidTheme:(0,s.useCallback)((e=(0,n.Z)(i().mark(function e(t){var r;return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.query({query:a.vGj,variables:{id:t},returnPartialData:!1});case 3:return r=e.sent.data,e.abrupt("return",(null==r?void 0:r.theme)!==null);case 8:return e.prev=8,e.t0=e.catch(0),console.warn("[useThemeModificationController.isValidTheme] Error checking if theme is valid",e.t0),e.abrupt("return",!1);case 12:case"end":return e.stop()}},e,null,[[0,8]])})),function(t){return e.apply(this,arguments)}),[f])}}},27128:function(e,t,r){r.d(t,{a:function(){return m},r:function(){return f}});var n,o=r(20406),i=r(28526),s=r.n(i),a=r(28871),c=r(72338),u=r(19165),l=r(4640),d=r(49333),p=r(38737),m=function(e){var t=e.chunk,r=e.theme,n=e.outputFormat,o=t.id,i=t.html,s=t.layout,a=t.cardSize,u=t.index,m=t.cardComplete,f=(0,l.yg)(),g=(0,c.J1)(f),h=(0,d.Tk)(i,g).content;return(0,p.S)({bodyContent:h.toJSON(),theme:r,format:n,cardId:o,index:u,seed:o,layout:s,cardSize:a,addContributorsBlock:m})},f=(n=(0,o.Z)(s().mark(function e(t,r,n,o){var i,c;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,u.y)(t,{removeImagesFromLayouts:!0,imageLicense:o});case 2:return i=e.sent.content.toJSON().filter(function(e){return"card"===e.type}).map(function(e,t){return(0,p.S)({bodyContent:e.content,theme:r,format:n,index:t})}),c=(0,a.getCardTitle)(i[0]),e.abrupt("return",{doc:(0,l.vL)({docFlags:{cardLayoutsEnabled:!0},format:n.docFormat},i),title:c});case 7:case"end":return e.stop()}},e)})),function(e,t,r,o){return n.apply(this,arguments)})},38307:function(e,t,r){r.d(t,{r:function(){return S}});var n=r(95235),o=r(82269),i=r(11919),s=r(15631),a=r(44907),c=r(37857),u=r(46925),l=r(40130),d=r(32834),p=r(45650),m=r(420),f=r(91012),g=r(49929),h=r(42751),v=r(2784),x=r(45826),b=r(98415),j=r(52322);function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function k(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var C=(0,v.memo)(function(e){var t=e.credits,r=e.lowCreditStatus,n=e.onClick,o=e.variant,i=null===t;return(0,j.jsx)(h.kH,{label:"Learn how to get more ".concat(x._8,"s"),placement:"top",children:(0,j.jsx)(p.z,k(k({onClick:n,isDisabled:i},"ghost"===(void 0===o?"solid":o)?{variant:"ghost",size:"sm",colorScheme:"blackAlpha"}:{variant:"unstyled",bg:"white",px:4}),{},{leftIcon:(0,j.jsx)(g.G,{icon:d.ow,size:"sm"}),rightIcon:(0,j.jsx)(g.G,{color:"var(--chakra-colors-gray-600)",icon:l.faCircleInfo,size:"xs"}),children:i?(0,j.jsx)(m.$,{size:"xs"}):(0,j.jsx)(f.x,{as:"span",color:null===r?void 0:x.Ro[r].lightColor,children:(0,b.$)(t)})}))})}),O=["modalId","variant"];function w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function P(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?w(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var S=function(e){var t=e.modalId,r=e.variant,n=(0,o.Z)(e,O),l=(0,c.qO)(),d=l.credits,p=l.lowCreditStatus,m=(0,a.fg)(),f=(0,s.M)({id:void 0===t?"ai-credits-modal":t}),g=f.isOpen,h=f.onOpen,v=f.onClose;return m?null:(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(i.k,P(P({},n),{},{children:(0,j.jsx)(C,{credits:d,onClick:h,lowCreditStatus:p,variant:r})})),(0,j.jsx)(u.H,{isOpen:g,onOpen:h,onClose:v,credits:d})]})}},39775:function(e,t,r){r.d(t,{J:function(){return x}});var n=r(95235),o=r(82269),i=r(32834),s=r(4036),a=r(8283),c=r(91012),u=r(49929),l=r(42751),d=r(69262),p=r(44907),m=r(45826),f=r(52322),g=["type"];function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var x=function(e){var t,r=e.type,n=(0,o.Z)(e,g),h=(0,d.ye)("aiDebits");if((0,p.fg)())return null;var x=null!==(t=h[r])&&void 0!==t?t:m.Sy[r];return(0,f.jsx)(l.kH,{label:"This will cost ".concat(x," credits"),children:(0,f.jsx)(s.C,v(v({colorScheme:"whiteAlpha",bg:"whiteAlpha.300",textTransform:"none",textShadow:"none",fontSize:"xxs",ml:2},n),{},{children:(0,f.jsxs)(a.U,{spacing:1,children:[(0,f.jsx)(c.x,{children:x}),(0,f.jsx)(u.G,{icon:i.ow,size:"sm"})]})}))})}},76106:function(e,t,r){r.d(t,{xg:function(){return eb},rN:function(){return ev},r8:function(){return eh}});var n=r(11919),o=r(71354),i=r(25925),s=r(2784),a=r(37857),c=r(91012),u=r(20261),l=r(12683),d=r(45393),p=r.n(d),m=r(94659),f=r(45650),g=r(52322),h=["Make this more concise","Suggest some images","Expand on this","Turn this into a timeline","Put the key points into boxes","Format this as a table","Make this sound more professional","Split this into columns","Give me a more exciting way to say this","Add another card"],v=["Italicize the key words","Add some emojis","Turn this into a haiku","Underline all the nouns","Rewrite this for a 5 year old"],x=function(e){var t=e.sendMessage,r=(0,s.useState)(p()(h,4).concat(p()(v,2)))[0];return(0,g.jsx)(m.g,{spacing:2,align:"flex-start",children:r.map(function(e,r){return(0,g.jsx)(f.z,{variant:"unstyled",bg:"white",borderRadius:"md",size:"sm",px:2,border:"1px solid",borderColor:"gray.200",color:"orchid.400",fontWeight:"500",_hover:{bg:"trueblue.50",color:"trueblue.700"},onClick:function(){t(e)},children:e},r)})})},b=function(e){var t,r=e.sendMessage,n=e.hideSuggestions,o=(0,u.SE)().user;return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(l.K,{from:"Designer",children:(t=null==o?void 0:o.firstName,{from:"Designer",type:"text",message:"\uD83D\uDC4B Hi".concat(t?" "+t:"",", I'm your AI design partner. Click on a card and then type below to have me change it. I'm still in beta testing, so please be patient with me."),timestamp:Date.now()}).message}),!(void 0!==n&&n)&&(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(c.x,{color:"gray.500",fontSize:"sm",children:"Here are some ways I can help:"}),(0,g.jsx)(x,{sendMessage:r})]})]})},j=r(27429),y=r(13813),k=r(40110),C=r(8283),O=r(53738),w=r(15110),P=r(49929),S=r(81921),I=r(83476),T=r(22087),A=r(36117),D=r(66564),E=r(8369),M=r(54073),Z=r.n(M);function z(e,t,r){var n;return null!==(n=r.find(function(r){return r.modification.isApplied(e,t)}))&&void 0!==n?n:null}function L(e,t){var r=(0,T.CG)(D.Pu),n=(0,I.T)(),o=(0,s.useState)(function(){return e?z(e,n,t):null}),i=o[0],a=o[1],c=(0,s.useCallback)(function(){e&&a(z(e,n,t))},[e,t,n]);return(0,s.useEffect)(function(){if(e){var r=Z()(function(){a(z(e,n,t))},1e3);return e.on("update",r),function(){e.off("update",r)}}},[e,t,n]),(0,s.useEffect)(function(){c()},[c,r]),{activeSuggestion:i,forceUpdate:c}}var R=r(20280),F=r(30628),H=r(55479),N=r(93319),G=r(76648),K=r(67887),q=r(91391),_=r(25793),U=r(42751),W=r(29999),B=(0,s.memo)(function(e){var t=e.message,r=(0,H.p)(),n=(0,W.z$)(),i=eh().scrollToBottom,a=(0,s.useRef)(null),c=(0,s.useState)(!1),u=c[0],l=c[1],d=(0,s.useState)(null),p=d[0],m=d[1];(0,s.useEffect)(function(){if(u){var e;null===(e=a.current)||void 0===e||e.focus(),null==i||i()}},[u,i,n]);var h=t.interactionId,v=t.type,x=(0,s.useCallback)(function(e){m(e),l(!0),null==n||n.track(W.AA.AI_SUGGESTION_FEEDBACK,{interactionId:h,rating:e,type:v})},[n,h,v]),b=(0,s.useCallback)(function(){var e;l(!1),null==n||n.track(W.AA.AI_SUGGESTION_FEEDBACK,{interactionId:h,rating:p,type:v,feedback:null===(e=a.current)||void 0===e?void 0:e.value}),a.current&&(a.current.value=""),r({title:"Thanks for your feedback.",description:"We appreciate your help in making Gamma better.",status:"success",duration:5e3,isClosable:!0})},[r,n,h,p,v]);return(0,g.jsxs)(o.K,{width:"100%",children:[(0,g.jsxs)(C.U,{children:[(0,g.jsx)(N.L,{}),(0,g.jsxs)(G.h,{size:"xs",variant:"ghost",colorScheme:"blackAlpha",children:[(0,g.jsx)(U.kH,{label:"Poor suggestion",placement:"top",children:(0,g.jsx)(K.h,{"aria-label":"thumbs down",color:"poor"===p?"red.600":void 0,borderWidth:"1px",borderColor:"poor"===p?"red.600":"transparent",bg:"poor"===p?"red.100":void 0,_hover:{bg:"poor"===p?"red.200":"blackAlpha.100"},icon:(0,g.jsx)(P.G,{icon:F.b}),onClick:function(){x("poor")}})}),(0,g.jsx)(U.kH,{label:"Good suggestion",placement:"top",children:(0,g.jsx)(K.h,{"aria-label":"thumbs up",color:"good"===p?"green.600":void 0,borderWidth:"1px",borderColor:"good"===p?"green.600":"transparent",bg:"good"===p?"green.100":void 0,_hover:{bg:"good"===p?"green.200":"blackAlpha.100"},icon:(0,g.jsx)(P.G,{icon:R.u8}),onClick:function(){x("good")}})})]})]}),(0,g.jsx)(q.U,{in:u,children:(0,g.jsxs)(o.K,{children:[(0,g.jsx)(_.g,{ref:a,bg:"white",size:"sm",placeholder:"Optionally, tell us why you rated this suggestion as you did."}),(0,g.jsxs)(G.h,{children:[(0,g.jsx)(N.L,{}),(0,g.jsx)(f.z,{onClick:function(){return l(!1)},size:"xs",variant:"ghost",colorScheme:"blackAlpha",children:"Skip"}),(0,g.jsx)(f.z,{onClick:b,size:"xs",variant:"plain",children:"Send feedback"})]})]})})]})});B.displayName="SuggestionFeedback";var J=(0,s.memo)(function(e){var t=e.message,r=e.editor,n=(0,E.E)(),i=(0,I.T)(),a=L(r,t.suggestions),u=a.activeSuggestion,d=a.forceUpdate,p=(0,s.useCallback)(function(e){r&&(n.trackSuggestionApplied({interactionId:t.interactionId,suggestionType:e.type,suggestionLabel:e.description,suggestionContent:e.getContentForTracking()}),e.apply(r,i),d())},[r,d,t.interactionId,i,n]);return r?(0,g.jsx)(l.K,{children:(0,g.jsxs)(o.K,{divider:(0,g.jsx)(k.i,{borderColor:"blackAlpha.200"}),children:[(0,g.jsx)(c.x,{children:t.message||"How's this?"}),t.suggestions.map(function(e,t){return(0,g.jsx)(V,{isSelected:e.label===(null==u?void 0:u.label),jsonContentPreview:e.jsonContentPreview,label:e.label,modification:e.modification,onClick:function(){p(e.modification)}},t)}),(0,g.jsx)(B,{message:t})]})}):null});J.displayName="SuggestContent";var V=function(e){var t=e.label,r=e.modification,o=e.jsonContentPreview,i=e.isSelected,a=e.onClick,u=(0,T.CG)(D.Pu);console.debug("[".concat(t,"] jsonContentPreview"),o,r);var l=(0,s.useCallback)(function(){i||a()},[i,a]);return(0,g.jsxs)(C.U,{onClick:l,cursor:"pointer",px:2,py:1,borderRadius:"xl",_hover:{bg:"blackAlpha.100"},bg:i?"whiteAlpha.600":void 0,transitionProperty:"common",transitionDuration:"normal",spacing:4,children:[o&&(0,g.jsx)(n.k,{sx:{"mask-image":"linear-gradient(to bottom, black 75%, transparent 100%)"},children:(0,g.jsx)(n.k,{sx:S.i,justifyContent:"center",alignItems:"top",width:"150px",h:16,children:(0,g.jsx)(O.xu,{transformOrigin:"top",transform:"scale(0.15)",pointerEvents:"none",children:(0,g.jsx)(A.m,{content:o,theme:u})})})}),(0,g.jsx)(c.x,{flex:1,fontSize:"sm",children:t}),(0,g.jsx)(w.M,{in:i,children:(0,g.jsx)(P.G,{icon:y.LE,fixedWidth:!0})})]})},X=r(75652),$=r.n(X),Y=r(5766),Q=r(36895),ee=r(64501),et=r(5246),er=(0,s.memo)(function(e){var t=e.message,r=e.editor,n=t.suggestions.slice(0,8),i=$()(n.map(function(e){return e.query})),s=0===i.length?"images":1==i.length?'images of "'.concat(i[0].toLowerCase(),'"'):2==i.length?'images of "'.concat(i[0].toLowerCase(),'" and "').concat(i[1].toLowerCase(),'"'):'images of "'.concat(i[0].toLowerCase(),'", "').concat(i[1].toLowerCase(),'", and "').concat(i[2].toLowerCase(),'"');return(0,g.jsx)(l.K,{children:(0,g.jsxs)(o.K,{align:"start",children:[(0,g.jsxs)(c.x,{children:["Ok, I tried searching for ",s,". Here's what I found:"]}),(0,g.jsx)(c.x,{color:"gray.500",textAlign:"center",fontSize:"xs",children:"Tip: Click and hold to drag these in."}),(0,g.jsx)(Y.M,{columns:2,spacing:2,w:"100%",children:n.map(function(e){var t=e.image,n=e.query,o=e.provider;return(0,g.jsx)(Q.E,{src:t.thumbnailUrl,onDragStart:function(){r&&(0,et.UV)(r,{type:"image",attrs:(0,ee.C)(t,n,o)})},h:24,draggable:!0,w:"100%",borderRadius:"md",transitionDuration:"normal",transitionProperty:"common",objectFit:"cover",cursor:"grab",_hover:{shadow:"outline"}},t.id)})}),(0,g.jsx)(B,{message:t})]})})});er.displayName="SuggestImage";var en=(0,s.memo)(function(e){var t=e.message,r=e.editor,n=(0,E.E)(),o=(0,I.T)(),i=L(r,t.suggestions),s=i.activeSuggestion,a=i.forceUpdate;return(0,g.jsx)(l.K,{from:t.from,children:(0,g.jsxs)(m.g,{spacing:2,align:"start",children:[(0,g.jsx)(c.x,{children:t.message||"Here are some ideas:"}),t.suggestions.map(function(e,i){return(0,g.jsx)(eo,{value:e,isSelected:e===s,onClick:function(){if(r){var i=e.modification;n.trackSuggestionApplied({interactionId:t.interactionId,suggestionType:i.type,suggestionLabel:i.description,suggestionContent:i.getContentForTracking()}),i.apply(r,o),a()}}},i)}),(0,g.jsx)(B,{message:t})]})})}),eo=function(e){var t=e.value,r=e.isSelected,n=e.onClick,o=(0,s.useCallback)(function(){r||n()},[r,n]);return(0,g.jsxs)(C.U,{onClick:o,cursor:"pointer",p:4,borderRadius:"xl",_hover:{bg:"whiteAlpha.600"},bg:"white",transitionProperty:"common",transitionDuration:"normal",spacing:4,shadow:"md",align:"start",children:[(0,g.jsxs)(O.xu,{children:[(0,g.jsx)(c.x,{fontSize:"sm",color:"gray.500",children:t.reason}),(0,g.jsx)(c.x,{fontSize:"sm",noOfLines:3,children:t.value.replace(/(<([^>]+)>)/gi,"")})]}),(0,g.jsx)(w.M,{in:r,children:(0,g.jsx)(P.G,{icon:y.LE,fixedWidth:!0})})]})};en.displayName="SuggestText";var ei=r(18504),es=r(99121),ea=r(93230),ec=r(42437),eu=(0,s.memo)(function(e){var t=e.message,r=e.editor,n=eh().onClose,i=(0,E.E)(),a=(0,I.T)(),u=L(r,t.suggestions).activeSuggestion,d=(0,s.useCallback)(function(e){r&&(i.trackSuggestionApplied({interactionId:t.interactionId,suggestionType:t.type,suggestionLabel:e.description,suggestionContent:e.getContentForTracking()}),e.apply(r,a))},[r,i,t,a]);return(0,g.jsx)(l.K,{children:(0,g.jsxs)(o.K,{children:[(0,g.jsx)(c.x,{children:t.message}),t.suggestions.map(function(e){var t=e.themeId,r=e.label;return(0,g.jsxs)(s.Fragment,{children:["Original"===r&&(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(k.i,{borderColor:"blackAlpha.200"}),(0,g.jsxs)(c.x,{children:[r,": "]})]}),(0,g.jsx)(el,{themeId:t,onClick:function(){return d(e.modification)},isSelected:(null==u?void 0:u.themeId)===t})]},t)}),(0,g.jsx)(c.x,{children:"You can use the theme picker to choose a new theme, or create custom ones."}),(0,g.jsx)(f.z,{leftIcon:(0,g.jsx)(P.G,{icon:ei.q2}),w:"100%",onClick:function(){n(),ec.T.emit("toggleThemeBlock",!0)},children:"Open theme picker"}),(0,g.jsx)(B,{message:t})]})})});eu.displayName="SuggestThemes";var el=(0,s.memo)(function(e){var t=e.themeId,r=e.onClick,n=e.isSelected,o=(0,ea.c2)(t);return"new"===o.id?null:(0,g.jsxs)(m.g,{onClick:r,cursor:"pointer",p:2,borderRadius:"xl",_hover:{bg:"blackAlpha.100"},bg:n?"whiteAlpha.600":void 0,transitionProperty:"common",transitionDuration:"normal",children:[(0,g.jsx)(O.xu,{borderRadius:"lg",overflow:"hidden",w:"100%",children:(0,g.jsx)(es.n,{theme:o,variant:"outline"})}),(0,g.jsxs)(C.U,{alignSelf:"flex-start",color:n?"trueblue.700":void 0,children:[(0,g.jsx)(w.M,{in:n,unmountOnExit:!0,children:(0,g.jsx)(P.G,{icon:y.LE,fixedWidth:!0})}),(0,g.jsx)(c.x,{fontSize:"sm",fontWeight:n?"semibold":void 0,children:o.name})]})]})});el.displayName="ThemeMessageThumbnailPreview";var ed=r(29705),ep=r(84103),em=(0,s.memo)(function(e){var t=e.message,r=e.sendMessage;return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(l.K,{children:t.message&&(0,g.jsx)(g.Fragment,{children:(0,g.jsxs)(c.x,{children:[(0,g.jsx)("span",{className:"emoji",role:"img","aria-label":"sorry",children:"\uD83D\uDE14"})," ",t.message," ",t.learnMoreLink&&(0,g.jsxs)(ep.r,{href:t.learnMoreLink,textDecoration:"underline",isExternal:!0,children:["Learn more ",(0,g.jsx)(ed.h,{mx:"2px",fontSize:"sm"})]})]})})}),(0,g.jsx)(c.x,{color:"gray.500",fontSize:"sm",children:"Here are some other things I can do:"}),(0,g.jsx)(x,{sendMessage:r})]})});em.displayName="UnsupportedTask";var ef=(0,s.memo)(function(e){var t=e.message;return(0,g.jsx)(l.K,{warning:t.warning,from:t.from,children:t.message})});ef.displayName="UserDesignerMessage";var eg=s.createContext({scrollToBottom:function(){},onClose:function(){}}),eh=function(){return s.useContext(eg)},ev=function(e){var t=e.messages,r=e.scrollSelector,c=e.editor,u=e.sendMessage,l=e.isLoading,d=e.onClose,p=(0,a.qO)(),m=p.hasEnoughCreditsToChat,f=p.isCreditsReady&&!m,h=(0,s.useCallback)(function(){var e=r&&document.querySelector(r);e&&setTimeout(function(){requestAnimationFrame(function(){e.scrollTo({top:e.scrollHeight,behavior:"smooth"})})},400)},[r]),v=(0,s.useRef)({scrollToBottom:h,onClose:d});return v.current.scrollToBottom=h,(0,g.jsx)(eg.Provider,{value:v.current,children:(0,g.jsx)(n.k,{flex:1,flexDirection:"column",justifyContent:"flex-end",children:(0,g.jsx)(o.K,{pt:12,spacing:2,children:(0,g.jsxs)(i.M,{children:[(0,g.jsx)(b,{sendMessage:u,hideSuggestions:f}),t.map(function(e,t){return"text"===e.type?(0,g.jsx)(ef,{message:e},e.timestamp):"suggestImages"===e.type?(0,g.jsx)(er,{message:e,editor:c},e.timestamp):"suggestText"===e.type?(0,g.jsx)(en,{message:e,editor:c},e.timestamp):"suggestThemes"===e.type?(0,g.jsx)(eu,{message:e,editor:c},e.timestamp):"suggestContent"===e.type?(0,g.jsx)(J,{message:e,editor:c},e.timestamp):"unsupported"===e.type?(0,g.jsx)(em,{message:e,sendMessage:u},e.timestamp):(console.warn("[MessageList] Message type not found",e),null)}),f&&(0,g.jsx)(j.x,{}),l&&(0,g.jsx)(ex,{},"loading")]})})})})},ex=function(){return(0,g.jsx)(l.K,{from:"Designer",children:(0,g.jsx)(eb,{})})},eb=function(){return(0,g.jsxs)(n.k,{className:"bouncing-loader",justify:"center",children:[(0,g.jsx)("div",{}),(0,g.jsx)("div",{}),(0,g.jsx)("div",{})]})}},8369:function(e,t,r){r.d(t,{E:function(){return a}});var n=r(2784),o=r(53941),i=r(22087),s=r(35898),a=function(){var e=(0,i.qr)(),t=(0,i.TL)(),r=(0,n.useCallback)(function(e,r){t((0,s.Cj)({taskContext:e,provider:r})),(0,o.hq)({interactionId:e.interactionId,interface:"chat",inputMessage:e.message,docId:e.docId,cardId:e.editorContext.card.cardId,provider:r})},[t]),a=(0,n.useCallback)(function(e){t((0,s.z5)(e))},[t]),c=(0,n.useCallback)(function(e){t((0,s.zw)(e))},[t]),u=(0,n.useCallback)(function(r){t((0,s._M)(r));var n=r.taskContext,i=(0,s.FK)(n.interactionId)(e.getState());if(!i){console.error("[trackRequestComplete] no data found for interactionId",n.interactionId);return}(0,o.gb)({interactionId:n.interactionId,interface:"chat",docId:n.docId,cardId:i.cardId,classification:i.classification,provider:i.provider,inputMessage:n.message,inputContent:i.inputContent,rawResponse:r.resp,outputMessage:i.outputMessage,outputContent:i.outputContent,latency:performance.now()-n.startTime})},[t,e]),l=(0,n.useCallback)(function(t){var r=t.outputMessage,n=t.errorMessage,i=t.interactionId,a=t.resp,c=t.errorName,u=(0,s.FK)(i)(e.getState());if(!u){console.error("[trackRequestError] no data found for interactionId",i);return}(0,o.pQ)({interactionId:i,interface:"chat",docId:u.docId,cardId:u.cardId,classification:u.classification,provider:u.provider,inputMessage:u.message,inputContent:u.inputContent,outputMessage:r,errorName:c,errorMessage:n,rawResponse:a,latency:performance.now()-u.startTime})},[e]),d=(0,n.useCallback)(function(t){var r=t.interactionId,n=t.retriesRemaining,i=t.resp,a=(0,s.FK)(r)(e.getState());if(!a){console.error("[trackRequestRetry] no data found for interactionId",r);return}(0,o.Wf)({interactionId:r,interface:"chat",classification:a.classification,docId:a.docId,cardId:a.cardId,provider:a.provider,inputMessage:a.message,inputContent:a.inputContent,rawResponse:i,retriesRemaining:n})},[e]),p=(0,n.useCallback)(function(t){var r=t.interactionId,n=t.suggestionContent,i=t.suggestionType,a=t.suggestionLabel,c=t.autoApplied,u=(0,s.FK)(r)(e.getState());if(!u){console.error("[trackSuggestionApplied] no data found for interactionId",r);return}var l="string"==typeof n?n:"html"===n.type?n.html:"json"===n.type?n.json:void 0;(0,o.vL)({interactionId:r,interface:"chat",docId:u.docId,cardId:u.cardId,classification:u.classification,provider:u.provider,inputMessage:u.message,inputContent:u.inputContent,outputMessage:u.outputMessage,outputContent:u.outputContent,suggestionType:i,suggestionLabel:a,suggestionContent:l,autoApplied:!!c})},[e]);return(0,n.useMemo)(function(){return{trackClassification:a,trackRequestComplete:u,trackInputContent:c,trackRequestSent:r,trackRequestError:l,trackRequestRetry:d,trackSuggestionApplied:p}},[a,c,u,r,l,d,p])}},12683:function(e,t,r){r.d(t,{K:function(){return v}});var n=r(95235),o=r(82269),i=r(11919),s=r(34638),a=r(72360),c=r(48322),u=r(76360),l=r(75342),d=r(73137),p=r(52322),m=["children","from","warning","cardStyleOverrides","error"];function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var h=(0,d.E)(i.k),v=function(e){var t=e.children,r=e.from,n=e.warning,i=void 0!==n&&n,d=e.cardStyleOverrides,f=e.error,v=void 0!==f&&f,x=(0,o.Z)(e,m),b=(0,s.ff)("orchid.400","blue.700"),j=(0,s.ff)("trueblue.50","sunglow.700"),y=(0,s.ff)("red.100","red.500"),k="User"===(void 0===r?"Designer":r),C=k?g({bg:b,borderBottomRightRadius:0,color:"white"},d):g({bg:i?void 0:v?y:j,borderBottomLeftRadius:0},d);return(0,p.jsx)(h,g(g({justify:k?"flex-end":"flex-start",initial:{opacity:0,translateX:-20},animate:{opacity:1,translateX:0}},x),{},{children:i?(0,p.jsxs)(a.b,g(g({status:"warning",borderColor:"orange.200",borderWidth:"1px",fontSize:"inherit"},C),{},{children:[(0,p.jsx)(c.z,{}),t]})):(0,p.jsx)(u.Z,g(g({size:"sm",shadow:"sm",borderRadius:"xl",variant:"filled",minH:0,borderColor:v?"red.200":"blackAlpha.200"},C),{},{children:(0,p.jsx)(l.e,{py:2,px:2,children:t})}))}))}},27429:function(e,t,r){r.d(t,{x:function(){return p}});var n=r(11919),o=r(45650),i=r(2784),s=r(46925),a=r(6409),c=r(15631),u=r(22087),l=r(12683),d=r(52322),p=(0,i.memo)(function(e){var t=e.cardStyleOverrides,r=(0,c.M)({id:"ai-credits-modal-in-message"}),p=r.isOpen,m=r.onOpen,f=r.onClose,g=(0,u.CG)(a.Lj),h=(0,i.useMemo)(function(){return({from:"Designer",type:"text",message:"❗️You don't have enough credits.",timestamp:Date.now()}).message},[]);return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(l.K,{from:"Designer",error:!0,cardStyleOverrides:t,children:[(0,d.jsx)("strong",{children:h})," Earn more credits to continue using Gamma's AI generator and editing features.",(0,d.jsx)(n.k,{pt:3,children:(0,d.jsx)(o.z,{onClick:m,leftIcon:(0,d.jsx)("span",{role:"img","aria-label":"credits",children:"\uD83D\uDCB0"}),children:"Earn more credits"})})]}),(0,d.jsx)(s.H,{credits:g,onClose:f,isOpen:p,onOpen:m})]})})},42437:function(e,t,r){r.d(t,{T:function(){return n}});var n=new(r(52939)).v}}]);
//# sourceMappingURL=4290-4de1191bda5dd262.js.map